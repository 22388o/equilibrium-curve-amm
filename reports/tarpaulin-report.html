<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <style>html, body {
  margin: 0;
  padding: 0;
}

.app {
  margin: 10px;
  padding: 0;
}

.files-list {
  margin: 10px 0 0;
  width: 100%;
  border-collapse: collapse;
}
.files-list__head {
  border: 1px solid #999;
}
.files-list__head > tr > th {
  padding: 10px;
  border: 1px solid #999;
  text-align: left;
  font-weight: normal;
  background: #ddd;
}
.files-list__body {
}
.files-list__file {
  cursor: pointer;
}
.files-list__file:hover {
  background: #ccf;
}
.files-list__file > td {
  padding: 10px;
  border: 1px solid #999;
}
.files-list__file > td:first-child::before {
  content: '\01F4C4';
  margin-right: 1em;
}
.files-list__file_low {
  background: #fcc;
}
.files-list__file_medium {
  background: #ffc;
}
.files-list__file_high {
  background: #cfc;
}
.files-list__file_folder > td:first-child::before {
  content: '\01F4C1';
  margin-right: 1em;
}

.file-header {
  border: 1px solid #999;
  display: flex;
  justify-content: space-between;
  align-items: center;
}

.file-header__back {
  margin: 10px;
  cursor: pointer;
  flex-shrink: 0;
  flex-grow: 0;
  text-decoration: underline;
  color: #338;
}

.file-header__name {
  margin: 10px;
  flex-shrink: 2;
  flex-grow: 2;
}

.file-header__stat {
  margin: 10px;
  flex-shrink: 0;
  flex-grow: 0;
}

.file-content {
  margin: 10px 0 0;
  border: 1px solid #999;
  padding: 10px;
}

.code-line {
  margin: 0;
  padding: 0.3em;
  height: 1em;
}
.code-line_covered {
  background: #cfc;
}
.code-line_uncovered {
  background: #fcc;
}
</style>
</head>
<body>
    <div id="root"></div>
    <script>
        var data = {"files":[{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","build.rs"],"content":"use substrate_build_script_utils::{generate_cargo_keys, rerun_if_git_head_changed};\n\nfn main() {\n    generate_cargo_keys();\n\n    rerun_if_git_head_changed();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","chain_spec.rs"],"content":"use node_runtime::{\n    AccountId, AuraConfig, BalancesConfig, GenesisConfig, GrandpaConfig, Signature, SudoConfig,\n    SystemConfig, WASM_BINARY,\n};\nuse sc_service::ChainType;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{sr25519, Pair, Public};\nuse sp_finality_grandpa::AuthorityId as GrandpaId;\nuse sp_runtime::traits::{IdentifyAccount, Verify};\n\n// The URL for the telemetry server.\n// const STAGING_TELEMETRY_URL: \u0026str = \"wss://telemetry.polkadot.io/submit/\";\n\n/// Specialized `ChainSpec`. This is a specialization of the general Substrate ChainSpec type.\npub type ChainSpec = sc_service::GenericChainSpec\u003cGenesisConfig\u003e;\n\n/// Generate a crypto pair from seed.\npub fn get_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e \u003cTPublic::Pair as Pair\u003e::Public {\n    TPublic::Pair::from_string(\u0026format!(\"//{}\", seed), None)\n        .expect(\"static values are valid; qed\")\n        .public()\n}\n\ntype AccountPublic = \u003cSignature as Verify\u003e::Signer;\n\n/// Generate an account ID from seed.\npub fn get_account_id_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e AccountId\nwhere\n    AccountPublic: From\u003c\u003cTPublic::Pair as Pair\u003e::Public\u003e,\n{\n    AccountPublic::from(get_from_seed::\u003cTPublic\u003e(seed)).into_account()\n}\n\n/// Generate an Aura authority key.\npub fn authority_keys_from_seed(s: \u0026str) -\u003e (AuraId, GrandpaId) {\n    (get_from_seed::\u003cAuraId\u003e(s), get_from_seed::\u003cGrandpaId\u003e(s))\n}\n\npub fn development_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or_else(|| \"Development wasm not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Development\",\n        // ID\n        \"dev\",\n        ChainType::Development,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![authority_keys_from_seed(\"Alice\")],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                ],\n                true,\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\npub fn local_testnet_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or_else(|| \"Development wasm not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Local Testnet\",\n        // ID\n        \"local_testnet\",\n        ChainType::Local,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![\n                    authority_keys_from_seed(\"Alice\"),\n                    authority_keys_from_seed(\"Bob\"),\n                ],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie//stash\"),\n                ],\n                true,\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\n/// Configure initial storage state for FRAME modules.\nfn testnet_genesis(\n    wasm_binary: \u0026[u8],\n    initial_authorities: Vec\u003c(AuraId, GrandpaId)\u003e,\n    root_key: AccountId,\n    endowed_accounts: Vec\u003cAccountId\u003e,\n    _enable_println: bool,\n) -\u003e GenesisConfig {\n    GenesisConfig {\n        frame_system: Some(SystemConfig {\n            // Add Wasm runtime to storage.\n            code: wasm_binary.to_vec(),\n            changes_trie_config: Default::default(),\n        }),\n        pallet_balances: Some(BalancesConfig {\n            // Configure endowed accounts with initial balance of 1 \u003c\u003c 60.\n            balances: endowed_accounts\n                .iter()\n                .cloned()\n                .map(|k| (k, 1 \u003c\u003c 60))\n                .collect(),\n        }),\n        pallet_aura: Some(AuraConfig {\n            authorities: initial_authorities.iter().map(|x| (x.0.clone())).collect(),\n        }),\n        pallet_grandpa: Some(GrandpaConfig {\n            authorities: initial_authorities\n                .iter()\n                .map(|x| (x.1.clone(), 1))\n                .collect(),\n        }),\n        pallet_sudo: Some(SudoConfig {\n            // Assign network admin rights.\n            key: root_key,\n        }),\n    }\n}\n","traces":[{"line":18,"address":[6223840,6224336,6223788,6224272,6224764,6223360],"length":1,"stats":{"Line":0},"fn_name":"get_from_seed\u003csp_finality_grandpa::app::Public\u003e"},{"line":19,"address":[6223387,6223867,6224363],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[6224816],"length":1,"stats":{"Line":0},"fn_name":"get_account_id_from_seed\u003csp_core::sr25519::Public\u003e"},{"line":31,"address":[6224833],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[20549472],"length":1,"stats":{"Line":0},"fn_name":"authority_keys_from_seed"},{"line":36,"address":[20549489],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[20549632,20550217],"length":1,"stats":{"Line":0},"fn_name":"development_config"},{"line":40,"address":[6224910,6224896],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":42,"address":[20550162,20549995],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[20549759],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[6224944,6225475],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":49,"address":[6225394],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[6224962],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[6224993,6225529],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[6225105],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[6225490,6225142,6225263],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[6225155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[6225182],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[6225209],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[6225236],"length":1,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[20549795],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[20549951],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[20549963],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[20549975],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[20549987],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[20550873,20550288],"length":1,"stats":{"Line":0},"fn_name":"local_testnet_config"},{"line":79,"address":[6225614,6225600],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":81,"address":[20550651,20550818],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[20550415],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[6225648,6226713],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":88,"address":[6226632],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[6225666],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[6226767,6225697,6225779],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[6225728],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[6225752],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[6225887],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[6225924,6226261,6226728],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[6225937],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[6225964],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[6225991],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[6226018],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[6226045],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[6226072],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[6226099],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[6226126],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[6226153],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[6226180],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[6226207],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[6226234],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[20550451],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[20550607],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[20550619],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[20550631],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[20550643],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[20550944,20552213],"length":1,"stats":{"Line":0},"fn_name":"testnet_genesis"},{"line":137,"address":[20551144],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[20551419],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[20551587],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[20551755],"length":1,"stats":{"Line":0},"fn_name":null},{"line":159,"address":[20551850],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":60},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","cli.rs"],"content":"use sc_cli::RunCmd;\nuse structopt::StructOpt;\n\n#[derive(Debug, StructOpt)]\npub struct Cli {\n    #[structopt(subcommand)]\n    pub subcommand: Option\u003cSubcommand\u003e,\n\n    #[structopt(flatten)]\n    pub run: RunCmd,\n}\n\n#[derive(Debug, StructOpt)]\npub enum Subcommand {\n    /// Key management cli utilities\n    Key(sc_cli::KeySubcommand),\n    /// Build a chain specification.\n    BuildSpec(sc_cli::BuildSpecCmd),\n\n    /// Validate blocks.\n    CheckBlock(sc_cli::CheckBlockCmd),\n\n    /// Export blocks.\n    ExportBlocks(sc_cli::ExportBlocksCmd),\n\n    /// Export the state of a given block into a chain spec.\n    ExportState(sc_cli::ExportStateCmd),\n\n    /// Import blocks.\n    ImportBlocks(sc_cli::ImportBlocksCmd),\n\n    /// Remove the whole chain.\n    PurgeChain(sc_cli::PurgeChainCmd),\n\n    /// Revert the chain to a previous state.\n    Revert(sc_cli::RevertCmd),\n\n    /// The custom benchmark subcommmand benchmarking runtime pallets.\n    #[structopt(name = \"benchmark\", about = \"Benchmark runtime pallets.\")]\n    Benchmark(frame_benchmarking_cli::BenchmarkCmd),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","command.rs"],"content":"// This file is part of Substrate.\n\n// Copyright (C) 2017-2021 Parity Technologies (UK) Ltd.\n// SPDX-License-Identifier: Apache-2.0\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// \thttp://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse crate::cli::{Cli, Subcommand};\nuse crate::{chain_spec, service};\nuse node_runtime::Block;\nuse sc_cli::{ChainSpec, Role, RuntimeVersion, SubstrateCli};\nuse sc_service::PartialComponents;\n\nimpl SubstrateCli for Cli {\n    fn impl_name() -\u003e String {\n        \"Substrate Node\".into()\n    }\n\n    fn impl_version() -\u003e String {\n        env!(\"SUBSTRATE_CLI_IMPL_VERSION\").into()\n    }\n\n    fn description() -\u003e String {\n        env!(\"CARGO_PKG_DESCRIPTION\").into()\n    }\n\n    fn author() -\u003e String {\n        env!(\"CARGO_PKG_AUTHORS\").into()\n    }\n\n    fn support_url() -\u003e String {\n        \"support.anonymous.an\".into()\n    }\n\n    fn copyright_start_year() -\u003e i32 {\n        2017\n    }\n\n    fn load_spec(\u0026self, id: \u0026str) -\u003e Result\u003cBox\u003cdyn sc_service::ChainSpec\u003e, String\u003e {\n        Ok(match id {\n            \"dev\" =\u003e Box::new(chain_spec::development_config()?),\n            \"\" | \"local\" =\u003e Box::new(chain_spec::local_testnet_config()?),\n            path =\u003e Box::new(chain_spec::ChainSpec::from_json_file(\n                std::path::PathBuf::from(path),\n            )?),\n        })\n    }\n\n    fn native_runtime_version(_: \u0026Box\u003cdyn ChainSpec\u003e) -\u003e \u0026'static RuntimeVersion {\n        \u0026node_runtime::VERSION\n    }\n}\n\n/// Parse and run command line arguments\npub fn run() -\u003e sc_cli::Result\u003c()\u003e {\n    let cli = Cli::from_args();\n\n    match \u0026cli.subcommand {\n        Some(Subcommand::Key(cmd)) =\u003e cmd.run(\u0026cli),\n        Some(Subcommand::BuildSpec(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.sync_run(|config| cmd.run(config.chain_spec, config.network))\n        }\n        Some(Subcommand::CheckBlock(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    import_queue,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, import_queue), task_manager))\n            })\n        }\n        Some(Subcommand::ExportBlocks(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, config.database), task_manager))\n            })\n        }\n        Some(Subcommand::ExportState(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, config.chain_spec), task_manager))\n            })\n        }\n        Some(Subcommand::ImportBlocks(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    import_queue,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, import_queue), task_manager))\n            })\n        }\n        Some(Subcommand::PurgeChain(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.sync_run(|config| cmd.run(config.database))\n        }\n        Some(Subcommand::Revert(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    backend,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, backend), task_manager))\n            })\n        }\n        Some(Subcommand::Benchmark(cmd)) =\u003e {\n            if cfg!(feature = \"runtime-benchmarks\") {\n                let runner = cli.create_runner(cmd)?;\n\n                runner.sync_run(|config| cmd.run::\u003cBlock, service::Executor\u003e(config))\n            } else {\n                Err(\"Benchmarking wasn't enabled when building the node. \\\n\t\t\t\tYou can enable it with `--features runtime-benchmarks`.\"\n                    .into())\n            }\n        }\n        None =\u003e {\n            let runner = cli.create_runner(\u0026cli.run)?;\n            runner.run_node_until_exit(|config| async move {\n                match config.role {\n                    Role::Light =\u003e service::new_light(config),\n                    _ =\u003e service::new_full(config),\n                }\n                .map_err(sc_cli::Error::Service)\n            })\n        }\n    }\n}\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[24500302],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[24500336],"length":1,"stats":{"Line":0},"fn_name":"impl_version"},{"line":30,"address":[24500350],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[24500384],"length":1,"stats":{"Line":0},"fn_name":"description"},{"line":34,"address":[24500398],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":41,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":42,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":46,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":65,"address":[7339600,7344341],"length":1,"stats":{"Line":0},"fn_name":"run"},{"line":66,"address":[7339640],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[7339855,7343251,7340461,7342693,7341019,7339903,7343800,7341577,7342135,7343884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[7339744,7339820,7339865],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[7339916],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[7339928,7340253,7344628],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[9121731,9121712],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":74,"address":[7340474],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[7340811,7340486,7344590],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[9124302,9123488],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":78,"address":[9123717],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[9123741],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[9123774],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[9124735,9123862,9124264,9123521,9124458],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[9124325,9124054],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[7341032],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[7341369,7341044,7344552],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[7341249],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[9125189],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[9125213],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[9124961,9125249,9125912,9125762,9127146],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[9125469,9125806],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[7341590],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[7341602,7341927,7344514],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[9128999,9128224],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":101,"address":[9128485],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[9128509],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[9128978,9128257,9128545,9129097,9130331],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[9128765,9129022],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[7342148],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[7344476,7342160,7342485],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[7342365],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[9131637],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[9131661],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[9131694],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[9131441,9132378,9132655,9132184,9131782],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[9131974,9132245],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[7342706],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[7343043,7342718,7344441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[7342923],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[7343264],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[7344412,7343276,7343601],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[7343481],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[9134710],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[9134734],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[9134767],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[9134514,9134791,9135234,9135348,9135620],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[9135295,9134987],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[7343813],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[7343825],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[7339778,7343905,7344383,7344111],"length":1,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[7344036],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[9136029],"length":1,"stats":{"Line":0},"fn_name":null},{"line":151,"address":[9135993,9135909],"length":1,"stats":{"Line":0},"fn_name":null},{"line":152,"address":[9135936],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":75},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","lib.rs"],"content":"pub mod chain_spec;\npub mod rpc;\npub mod service;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","main.rs"],"content":"//! Substrate Node Template CLI library.\n#![warn(missing_docs)]\n\nmod chain_spec;\n#[macro_use]\nmod service;\nmod cli;\nmod command;\nmod rpc;\n\nfn main() -\u003e sc_cli::Result\u003c()\u003e {\n    command::run()\n}\n","traces":[{"line":11,"address":[11890160],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":12,"address":[11890171],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":2},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","rpc.rs"],"content":"//! A collection of node-specific RPC methods.\n//! Substrate provides the `sc-rpc` crate, which defines the core RPC layer\n//! used by Substrate nodes. This file extends those RPC definitions with\n//! capabilities that are specific to this project's runtime configuration.\n\n#![warn(missing_docs)]\n\nuse std::sync::Arc;\n\nuse node_runtime::{opaque::Block, AccountId, Balance, Index};\npub use sc_rpc_api::DenyUnsafe;\nuse sp_api::ProvideRuntimeApi;\nuse sp_block_builder::BlockBuilder;\nuse sp_blockchain::{Error as BlockChainError, HeaderBackend, HeaderMetadata};\nuse sp_transaction_pool::TransactionPool;\n\n/// Full client dependencies.\npub struct FullDeps\u003cC, P\u003e {\n    /// The client instance to use.\n    pub client: Arc\u003cC\u003e,\n    /// Transaction pool instance.\n    pub pool: Arc\u003cP\u003e,\n    /// Whether to deny unsafe calls\n    pub deny_unsafe: DenyUnsafe,\n}\n\n/// Instantiate all full RPC extensions.\npub fn create_full\u003cC, P\u003e(deps: FullDeps\u003cC, P\u003e) -\u003e jsonrpc_core::IoHandler\u003csc_rpc::Metadata\u003e\nwhere\n    C: ProvideRuntimeApi\u003cBlock\u003e,\n    C: HeaderBackend\u003cBlock\u003e + HeaderMetadata\u003cBlock, Error = BlockChainError\u003e + 'static,\n    C: Send + Sync + 'static,\n    C::Api: substrate_frame_rpc_system::AccountNonceApi\u003cBlock, AccountId, Index\u003e,\n    C::Api: pallet_transaction_payment_rpc::TransactionPaymentRuntimeApi\u003cBlock, Balance\u003e,\n    C::Api: BlockBuilder\u003cBlock\u003e,\n    P: TransactionPool + 'static,\n{\n    use pallet_transaction_payment_rpc::{TransactionPayment, TransactionPaymentApi};\n    use substrate_frame_rpc_system::{FullSystem, SystemApi};\n\n    let mut io = jsonrpc_core::IoHandler::default();\n    let FullDeps {\n        client,\n        pool,\n        deny_unsafe,\n    } = deps;\n\n    io.extend_with(SystemApi::to_delegate(FullSystem::new(\n        client.clone(),\n        pool,\n        deny_unsafe,\n    )));\n\n    io.extend_with(TransactionPaymentApi::to_delegate(TransactionPayment::new(\n        client.clone(),\n    )));\n\n    // Extend this RPC with a custom API by using the following syntax.\n    // `YourRpcStruct` should have a reference to a client, which is needed\n    // to call into the runtime.\n    // `io.extend_with(YourRpcTrait::to_delegate(YourRpcStruct::new(ReferenceToClient, ...)));`\n\n    io\n}\n","traces":[{"line":28,"address":[14880560,14880974],"length":1,"stats":{"Line":0},"fn_name":"create_full\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_runtime::RuntimeApi\u003e,sc_transaction_pool::BasicPool\u003csc_transaction_pool::api::FullChainApi\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_runtime::RuntimeApi\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e\u003e"},{"line":41,"address":[14880570],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[14880640],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[14880669],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[14880694],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[14880759,14880713],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[14880730],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[14880742],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[14880827,14880861],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[14880844],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[14880913],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":11},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","service.rs"],"content":"//! Service and ServiceFactory implementation. Specialized wrapper over substrate service.\n\nuse node_runtime::{self, opaque::Block, RuntimeApi};\nuse sc_client_api::{ExecutorProvider, RemoteBackend};\nuse sc_executor::native_executor_instance;\npub use sc_executor::NativeExecutor;\nuse sc_finality_grandpa::SharedVoterState;\nuse sc_keystore::LocalKeystore;\nuse sc_service::{error::Error as ServiceError, Configuration, TaskManager};\nuse sp_consensus_aura::sr25519::AuthorityPair as AuraPair;\nuse sp_inherents::InherentDataProviders;\nuse std::sync::Arc;\nuse std::time::Duration;\n\n// Our native executor instance.\nnative_executor_instance!(\n    pub Executor,\n    node_runtime::api::dispatch,\n    node_runtime::native_version,\n    frame_benchmarking::benchmarking::HostFunctions,\n);\n\ntype FullClient = sc_service::TFullClient\u003cBlock, RuntimeApi, Executor\u003e;\ntype FullBackend = sc_service::TFullBackend\u003cBlock\u003e;\ntype FullSelectChain = sc_consensus::LongestChain\u003cFullBackend, Block\u003e;\n\npub fn new_partial(\n    config: \u0026Configuration,\n) -\u003e Result\u003c\n    sc_service::PartialComponents\u003c\n        FullClient,\n        FullBackend,\n        FullSelectChain,\n        sp_consensus::DefaultImportQueue\u003cBlock, FullClient\u003e,\n        sc_transaction_pool::FullPool\u003cBlock, FullClient\u003e,\n        (\n            sc_consensus_aura::AuraBlockImport\u003c\n                Block,\n                FullClient,\n                sc_finality_grandpa::GrandpaBlockImport\u003c\n                    FullBackend,\n                    Block,\n                    FullClient,\n                    FullSelectChain,\n                \u003e,\n                AuraPair,\n            \u003e,\n            sc_finality_grandpa::LinkHalf\u003cBlock, FullClient, FullSelectChain\u003e,\n        ),\n    \u003e,\n    ServiceError,\n\u003e {\n    if config.keystore_remote.is_some() {\n        return Err(ServiceError::Other(format!(\n            \"Remote Keystores are not supported.\"\n        )));\n    }\n    let inherent_data_providers = sp_inherents::InherentDataProviders::new();\n\n    let (client, backend, keystore_container, task_manager) =\n        sc_service::new_full_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n    let client = Arc::new(client);\n\n    let select_chain = sc_consensus::LongestChain::new(backend.clone());\n\n    let transaction_pool = sc_transaction_pool::BasicPool::new_full(\n        config.transaction_pool.clone(),\n        config.role.is_authority().into(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n    );\n\n    let (grandpa_block_import, grandpa_link) = sc_finality_grandpa::block_import(\n        client.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        select_chain.clone(),\n    )?;\n\n    let aura_block_import = sc_consensus_aura::AuraBlockImport::\u003c_, _, _, AuraPair\u003e::new(\n        grandpa_block_import.clone(),\n        client.clone(),\n    );\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        aura_block_import.clone(),\n        Some(Box::new(grandpa_block_import.clone())),\n        client.clone(),\n        inherent_data_providers.clone(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone()),\n    )?;\n\n    Ok(sc_service::PartialComponents {\n        client,\n        backend,\n        task_manager,\n        import_queue,\n        keystore_container,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (aura_block_import, grandpa_link),\n    })\n}\n\nfn remote_keystore(_url: \u0026String) -\u003e Result\u003cArc\u003cLocalKeystore\u003e, \u0026'static str\u003e {\n    // FIXME: here would the concrete keystore be built,\n    //        must return a concrete type (NOT `LocalKeystore`) that\n    //        implements `CryptoStore` and `SyncCryptoStore`\n    Err(\"Remote Keystore not supported.\")\n}\n\n/// Builds a new service for a full client.\npub fn new_full(mut config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let sc_service::PartialComponents {\n        client,\n        backend,\n        mut task_manager,\n        import_queue,\n        mut keystore_container,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (block_import, grandpa_link),\n    } = new_partial(\u0026config)?;\n\n    if let Some(url) = \u0026config.keystore_remote {\n        match remote_keystore(url) {\n            Ok(k) =\u003e keystore_container.set_remote_keystore(k),\n            Err(e) =\u003e {\n                return Err(ServiceError::Other(format!(\n                    \"Error hooking up remote keystore for {}: {}\",\n                    url, e\n                )))\n            }\n        };\n    }\n\n    config\n        .network\n        .extra_sets\n        .push(sc_finality_grandpa::grandpa_peers_set_config());\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: None,\n            block_announce_validator_builder: None,\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    let role = config.role.clone();\n    let force_authoring = config.force_authoring;\n    let backoff_authoring_blocks: Option\u003c()\u003e = None;\n    let name = config.network.node_name.clone();\n    let enable_grandpa = !config.disable_grandpa;\n    let prometheus_registry = config.prometheus_registry().cloned();\n\n    let rpc_extensions_builder = {\n        let client = client.clone();\n        let pool = transaction_pool.clone();\n\n        Box::new(move |deny_unsafe, _| {\n            let deps = crate::rpc::FullDeps {\n                client: client.clone(),\n                pool: pool.clone(),\n                deny_unsafe,\n            };\n\n            crate::rpc::create_full(deps)\n        })\n    };\n\n    let (_rpc_handlers, telemetry_connection_notifier) =\n        sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n            network: network.clone(),\n            client: client.clone(),\n            keystore: keystore_container.sync_keystore(),\n            task_manager: \u0026mut task_manager,\n            transaction_pool: transaction_pool.clone(),\n            rpc_extensions_builder,\n            on_demand: None,\n            remote_blockchain: None,\n            backend,\n            network_status_sinks,\n            system_rpc_tx,\n            config,\n        })?;\n\n    if role.is_authority() {\n        let proposer = sc_basic_authorship::ProposerFactory::new(\n            task_manager.spawn_handle(),\n            client.clone(),\n            transaction_pool,\n            prometheus_registry.as_ref(),\n        );\n\n        let can_author_with =\n            sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone());\n\n        let aura = sc_consensus_aura::start_aura::\u003c_, _, _, _, _, AuraPair, _, _, _, _\u003e(\n            sc_consensus_aura::slot_duration(\u0026*client)?,\n            client.clone(),\n            select_chain,\n            block_import,\n            proposer,\n            network.clone(),\n            inherent_data_providers.clone(),\n            force_authoring,\n            backoff_authoring_blocks,\n            keystore_container.sync_keystore(),\n            can_author_with,\n        )?;\n\n        // the AURA authoring task is considered essential, i.e. if it\n        // fails we take down the service with it.\n        task_manager\n            .spawn_essential_handle()\n            .spawn_blocking(\"aura\", aura);\n    }\n\n    // if the node isn't actively participating in consensus then it doesn't\n    // need a keystore, regardless of which protocol we use below.\n    let keystore = if role.is_authority() {\n        Some(keystore_container.sync_keystore())\n    } else {\n        None\n    };\n\n    let grandpa_config = sc_finality_grandpa::Config {\n        // FIXME #1578 make this available through chainspec\n        gossip_duration: Duration::from_millis(333),\n        justification_period: 512,\n        name: Some(name),\n        observer_enabled: false,\n        keystore,\n        is_authority: role.is_network_authority(),\n    };\n\n    if enable_grandpa {\n        // start the full GRANDPA voter\n        // NOTE: non-authorities could run the GRANDPA observer protocol, but at\n        // this point the full voter should provide better guarantees of block\n        // and vote data availability than the observer. The observer has not\n        // been tested extensively yet and having most nodes in a network run it\n        // could lead to finality stalls.\n        let grandpa_config = sc_finality_grandpa::GrandpaParams {\n            config: grandpa_config,\n            link: grandpa_link,\n            network,\n            telemetry_on_connect: telemetry_connection_notifier.map(|x| x.on_connect_stream()),\n            voting_rule: sc_finality_grandpa::VotingRulesBuilder::default().build(),\n            prometheus_registry,\n            shared_voter_state: SharedVoterState::empty(),\n        };\n\n        // the GRANDPA voter task is considered infallible, i.e.\n        // if it fails we take down the service with it.\n        task_manager.spawn_essential_handle().spawn_blocking(\n            \"grandpa-voter\",\n            sc_finality_grandpa::run_grandpa_voter(grandpa_config)?,\n        );\n    }\n\n    network_starter.start_network();\n    Ok(task_manager)\n}\n\n/// Builds a new service for a light client.\npub fn new_light(mut config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let (client, backend, keystore_container, mut task_manager, on_demand) =\n        sc_service::new_light_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n\n    config\n        .network\n        .extra_sets\n        .push(sc_finality_grandpa::grandpa_peers_set_config());\n\n    let select_chain = sc_consensus::LongestChain::new(backend.clone());\n\n    let transaction_pool = Arc::new(sc_transaction_pool::BasicPool::new_light(\n        config.transaction_pool.clone(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n        on_demand.clone(),\n    ));\n\n    let (grandpa_block_import, _) = sc_finality_grandpa::block_import(\n        client.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        select_chain.clone(),\n    )?;\n\n    let aura_block_import = sc_consensus_aura::AuraBlockImport::\u003c_, _, _, AuraPair\u003e::new(\n        grandpa_block_import.clone(),\n        client.clone(),\n    );\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        aura_block_import,\n        Some(Box::new(grandpa_block_import)),\n        client.clone(),\n        InherentDataProviders::new(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::NeverCanAuthor,\n    )?;\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: Some(on_demand.clone()),\n            block_announce_validator_builder: None,\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n        remote_blockchain: Some(backend.remote_blockchain()),\n        transaction_pool,\n        task_manager: \u0026mut task_manager,\n        on_demand: Some(on_demand),\n        rpc_extensions_builder: Box::new(|_, _| ()),\n        config,\n        client,\n        keystore: keystore_container.sync_keystore(),\n        backend,\n        network,\n        network_status_sinks,\n        system_rpc_tx,\n    })?;\n\n    network_starter.start_network();\n\n    Ok(task_manager)\n}\n","traces":[{"line":27,"address":[13779516,13774224],"length":1,"stats":{"Line":0},"fn_name":"new_partial"},{"line":53,"address":[13774302],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[13774559,13774509],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[13774532],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[13775210,13774747,13779980],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[13775114,13775402],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[13775426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":67,"address":[13775488],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[13775518],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[13775629],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[13775656],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[13775699],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[13775841],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[13775888],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[13775958],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[13776624],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[13776647],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[13776717,13776845],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[13776835,13777033],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[13777057,13777134],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[13777181],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[13777228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[13777267],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[13777294],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[13777329],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[13778682],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[13778012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[13778028],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[13778044],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[13778125],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[13778205],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[13778245],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[13778261],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[13778277],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[13778293],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[13780576],"length":1,"stats":{"Line":0},"fn_name":"remote_keystore"},{"line":117,"address":[13780624,13790383],"length":1,"stats":{"Line":0},"fn_name":"new_full"},{"line":118,"address":[13781628,13791745,13780713],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[13781308],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[13781324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[13781348],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[13781395],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[13781445],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[13781493],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[13781517],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[13781541],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[13781196],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[13781812,13782052,13781565],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[13781833,13782016],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[13782018,13781856],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[13781875],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[13781915,13782073],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[13782435,13782484],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[13782441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[13783157],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[13782499],"length":1,"stats":{"Line":0},"fn_name":null},{"line":151,"address":[13782538],"length":1,"stats":{"Line":0},"fn_name":null},{"line":152,"address":[13782569],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[13782596],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[13782684],"length":1,"stats":{"Line":0},"fn_name":null},{"line":158,"address":[13783802,13783534,13783309],"length":1,"stats":{"Line":0},"fn_name":null},{"line":161,"address":[13783547,13783519],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[13783563],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[13783606],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[13783653],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[13783812],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[13783842],"length":1,"stats":{"Line":0},"fn_name":null},{"line":170,"address":[13783855],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[13783863],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[13783914],"length":1,"stats":{"Line":0},"fn_name":null},{"line":173,"address":[13783930],"length":1,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[13784014],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[13784061],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[6227072,6227291],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":180,"address":[6227179],"length":1,"stats":{"Line":0},"fn_name":null},{"line":181,"address":[6227117],"length":1,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[6227161],"length":1,"stats":{"Line":0},"fn_name":null},{"line":186,"address":[6227209],"length":1,"stats":{"Line":0},"fn_name":null},{"line":190,"address":[13785145],"length":1,"stats":{"Line":0},"fn_name":null},{"line":192,"address":[13784284],"length":1,"stats":{"Line":0},"fn_name":null},{"line":193,"address":[13784323],"length":1,"stats":{"Line":0},"fn_name":null},{"line":194,"address":[13784354],"length":1,"stats":{"Line":0},"fn_name":null},{"line":196,"address":[13784429],"length":1,"stats":{"Line":0},"fn_name":null},{"line":197,"address":[13784444],"length":1,"stats":{"Line":0},"fn_name":null},{"line":198,"address":[13784460],"length":1,"stats":{"Line":0},"fn_name":null},{"line":199,"address":[13784472],"length":1,"stats":{"Line":0},"fn_name":null},{"line":200,"address":[13784484],"length":1,"stats":{"Line":0},"fn_name":null},{"line":201,"address":[13784500],"length":1,"stats":{"Line":0},"fn_name":null},{"line":202,"address":[13784524],"length":1,"stats":{"Line":0},"fn_name":null},{"line":203,"address":[13784564],"length":1,"stats":{"Line":0},"fn_name":null},{"line":206,"address":[13785421,13785201,13785454],"length":1,"stats":{"Line":0},"fn_name":null},{"line":208,"address":[13785427,13785459],"length":1,"stats":{"Line":0},"fn_name":null},{"line":209,"address":[13785475],"length":1,"stats":{"Line":0},"fn_name":null},{"line":210,"address":[13785514],"length":1,"stats":{"Line":0},"fn_name":null},{"line":211,"address":[13785554],"length":1,"stats":{"Line":0},"fn_name":null},{"line":214,"address":[13785680],"length":1,"stats":{"Line":0},"fn_name":null},{"line":218,"address":[13785908,13785780],"length":1,"stats":{"Line":0},"fn_name":null},{"line":219,"address":[13786104,13785890],"length":1,"stats":{"Line":0},"fn_name":null},{"line":220,"address":[13786120],"length":1,"stats":{"Line":0},"fn_name":null},{"line":221,"address":[13786152],"length":1,"stats":{"Line":0},"fn_name":null},{"line":222,"address":[13786280],"length":1,"stats":{"Line":0},"fn_name":null},{"line":223,"address":[13786368],"length":1,"stats":{"Line":0},"fn_name":null},{"line":224,"address":[13786415],"length":1,"stats":{"Line":0},"fn_name":null},{"line":226,"address":[13786454],"length":1,"stats":{"Line":0},"fn_name":null},{"line":227,"address":[13786461],"length":1,"stats":{"Line":0},"fn_name":null},{"line":228,"address":[13786503],"length":1,"stats":{"Line":0},"fn_name":null},{"line":233,"address":[13786971,13787246],"length":1,"stats":{"Line":0},"fn_name":null},{"line":235,"address":[13787197,13787289,13790051],"length":1,"stats":{"Line":0},"fn_name":null},{"line":240,"address":[13787332,13787426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":241,"address":[13787428,13787371],"length":1,"stats":{"Line":0},"fn_name":null},{"line":243,"address":[13787406],"length":1,"stats":{"Line":0},"fn_name":null},{"line":248,"address":[13787473],"length":1,"stats":{"Line":0},"fn_name":null},{"line":250,"address":[13787510],"length":1,"stats":{"Line":0},"fn_name":null},{"line":253,"address":[13787622],"length":1,"stats":{"Line":0},"fn_name":null},{"line":256,"address":[13788081,13787824],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[6227344,6227351],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":268,"address":[13788094],"length":1,"stats":{"Line":0},"fn_name":null},{"line":270,"address":[13788164],"length":1,"stats":{"Line":0},"fn_name":null},{"line":275,"address":[13788431,13788704],"length":1,"stats":{"Line":0},"fn_name":null},{"line":277,"address":[13788458,13788750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":281,"address":[13788949],"length":1,"stats":{"Line":0},"fn_name":null},{"line":282,"address":[13788976],"length":1,"stats":{"Line":0},"fn_name":null},{"line":286,"address":[13792816,13799649],"length":1,"stats":{"Line":0},"fn_name":"new_light"},{"line":287,"address":[13793471,13800461,13792871],"length":1,"stats":{"Line":0},"fn_name":null},{"line":290,"address":[13793671,13793426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[13793433],"length":1,"stats":{"Line":0},"fn_name":null},{"line":295,"address":[13793686],"length":1,"stats":{"Line":0},"fn_name":null},{"line":297,"address":[13793997,13793902],"length":1,"stats":{"Line":0},"fn_name":null},{"line":298,"address":[13793748],"length":1,"stats":{"Line":0},"fn_name":null},{"line":299,"address":[13793770],"length":1,"stats":{"Line":0},"fn_name":null},{"line":300,"address":[13793797],"length":1,"stats":{"Line":0},"fn_name":null},{"line":301,"address":[13793840],"length":1,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[13793887],"length":1,"stats":{"Line":0},"fn_name":null},{"line":306,"address":[13794044],"length":1,"stats":{"Line":0},"fn_name":null},{"line":307,"address":[13794091],"length":1,"stats":{"Line":0},"fn_name":null},{"line":308,"address":[13794161],"length":1,"stats":{"Line":0},"fn_name":null},{"line":312,"address":[13794755],"length":1,"stats":{"Line":0},"fn_name":null},{"line":313,"address":[13794778],"length":1,"stats":{"Line":0},"fn_name":null},{"line":317,"address":[13795284,13794856],"length":1,"stats":{"Line":0},"fn_name":null},{"line":318,"address":[13794953],"length":1,"stats":{"Line":0},"fn_name":null},{"line":319,"address":[13795472,13795081],"length":1,"stats":{"Line":0},"fn_name":null},{"line":320,"address":[13795519],"length":1,"stats":{"Line":0},"fn_name":null},{"line":321,"address":[13795558],"length":1,"stats":{"Line":0},"fn_name":null},{"line":322,"address":[13795593],"length":1,"stats":{"Line":0},"fn_name":null},{"line":323,"address":[13795628],"length":1,"stats":{"Line":0},"fn_name":null},{"line":327,"address":[13796959],"length":1,"stats":{"Line":0},"fn_name":null},{"line":330,"address":[13796258],"length":1,"stats":{"Line":0},"fn_name":null},{"line":331,"address":[13796297],"length":1,"stats":{"Line":0},"fn_name":null},{"line":332,"address":[13796328],"length":1,"stats":{"Line":0},"fn_name":null},{"line":333,"address":[13796355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":334,"address":[13796451],"length":1,"stats":{"Line":0},"fn_name":null},{"line":335,"address":[13796482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":338,"address":[13797111,13797604,13797336],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[13797321,13797349],"length":1,"stats":{"Line":0},"fn_name":null},{"line":342,"address":[13797365],"length":1,"stats":{"Line":0},"fn_name":null},{"line":343,"address":[13797408],"length":1,"stats":{"Line":0},"fn_name":null},{"line":344,"address":[13797455],"length":1,"stats":{"Line":0},"fn_name":null},{"line":348,"address":[13798522,13798661,13798408,13798057],"length":1,"stats":{"Line":0},"fn_name":null},{"line":349,"address":[13797614],"length":1,"stats":{"Line":0},"fn_name":null},{"line":350,"address":[13797692],"length":1,"stats":{"Line":0},"fn_name":null},{"line":352,"address":[13797716],"length":1,"stats":{"Line":0},"fn_name":null},{"line":353,"address":[6227440,6227467],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":354,"address":[13797811],"length":1,"stats":{"Line":0},"fn_name":null},{"line":355,"address":[13797849],"length":1,"stats":{"Line":0},"fn_name":null},{"line":356,"address":[13797873],"length":1,"stats":{"Line":0},"fn_name":null},{"line":357,"address":[13797916],"length":1,"stats":{"Line":0},"fn_name":null},{"line":358,"address":[13797932],"length":1,"stats":{"Line":0},"fn_name":null},{"line":359,"address":[13797948],"length":1,"stats":{"Line":0},"fn_name":null},{"line":360,"address":[13797972],"length":1,"stats":{"Line":0},"fn_name":null},{"line":363,"address":[13798690],"length":1,"stats":{"Line":0},"fn_name":null},{"line":365,"address":[13798717],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":171},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","lib.rs"],"content":"//! # Project description\n//!\n//! Substrate-based runtime version of Curve automated market maker will be a 7 week long project which will deliver a following functionality:\n//!\n//! - Low slippage, high efficiency stablecoin exchange\n//!\n//! - High efficiency exchange tool for other homogeneous assets on Polkadot (e.g. wrapped assets)\n//!\n//! - Low risk fee income for liquidity providers.\n//!\n//! - Liquidity superfluidity with additional rewards from supplying liquidity to lending protocols such as Equilibrium and Acala.\n//!\n//! Curve AMM is of paramount importance to the entire Polkadot ecosystem. With the introduction of parachains and interconnection of different Polka-based projects the issue of multiple wrapped assets representing the same underlying assets arises.\n//!\n//! Consider ETH, for example. There are multiple bridging solutions who promise to introduce wrapped-ETH and other ERC-20 tokens to Polkadot. There needs to be a way to manage or exchange all of these representations of the same underlying asset inside Polkadot with low cost and low slippage, and that is where the Curve AMM comes into play.\n//!\n//! Curve’s unique stableswap invariant utilizes liquidity much more efficiently compared to all existing DEXes for stablecoins at already several hundred USD TVL (total value locked). Since initial liquidity on Polkadot is hardly going to be very large, proposed efficiency is VERY important for the ecosystem to flourish.\n//!\n//! ## Setup\n//!\n//! Before using Equilibrium Curve Amm Pallet in your code you need to setup it.\n//!\n//! For implementation examples please see `lib.rs` file from `runtime/src` directory and `mock.rs` file\n//! from `pallets/equilibrium-curve-amm/src` directory.\n//!\n//! Please note that all subsequent code snippets are for reference purposes only.\n//! Code for your specific runtime implementation can differ from these examples drastically.\n//!\n//! ### Runtime crate\n//!\n//! First of all you need to define some parameters.\n//!\n//! ```ignore\n//! parameter_types! {\n//!     // Anti ddos fee for pool creation\n//!     pub const CreationFee: Balance = 10_000;\n//!     // Module account\n//!     pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n//!     // Value that represents precision used for fixed-point iteration method\n//!     pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000_000);\n//! }\n//! ```\n//!\n//! Define convertion routines. They used by pallet to convert between various external types\n//! and internal `Number` type for math calculations:\n//!\n//! ```ignore\n//! pub struct FixedU128Convert;\n//!\n//! // Convertion from Permill to internal number representation\n//! impl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: Permill) -\u003e FixedU128 {\n//!         a.into()\n//!     }\n//! }\n//!\n//! // Convertion from Balance to internal number representation\n//! impl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: Balance) -\u003e FixedU128 {\n//!         FixedU128::saturating_from_integer(a)\n//!     }\n//! }\n//!\n//! // Convertion from byte to internal number representation\n//! impl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: u8) -\u003e FixedU128 {\n//!         FixedU128::saturating_from_integer(a)\n//!     }\n//! }\n//!\n//! // Convertion from usize to internal number represenation\n//! impl equilibrium_curve_amm::traits::CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n//!         Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n//!     }\n//! }\n//!\n//! // Convertion from internal number representation to Balance\n//! impl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n//!     fn convert(a: FixedU128) -\u003e Balance {\n//!         a.into_inner() / FixedU128::accuracy()\n//!     }\n//! }\n//! ```\n//!\n//! Define adapter for asset system used in your runtime. See `FrameAssets` struct from `runtime/src/lib.rs` file for\n//! example implementation that uses `pallet-assets` under the hood.\n//!\n//! ```ignore\n//! pub struct FrameAssets;\n//! impl equilibrium_curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for FrameAssets {\n//!     // Creates new asset\n//!     fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Mint tokens for the specified asset\n//!     fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Burn tokens for the specified asset\n//!     fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Transfer tokens for the specified asset\n//!     fn transfer(\n//!         asset: AssetId,\n//!         source: \u0026AccountId,\n//!         dest: \u0026AccountId,\n//!         amount: Balance,\n//!     ) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Checks the balance for the specified asset\n//!     fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Returns total issuance of the specified asset\n//!     fn total_issuance(asset: AssetId) -\u003e Balance {\n//!         panic!(\"Not implemented\");\n//!     }\n//! }\n//! ```\n//!\n//! Implement Financial Pallet for your Runtime:\n//!\n//! ```ignore\n//! impl equilibrium_curve_amm::Config for Runtime {\n//!     // The overarching event type.\n//!     type Event = Event;\n//!     // Identificator type of Asset\n//!     type AssetId = AssetId;\n//!     // The balance of an account\n//!     type Balance = Balance;\n//!     // Standart balances pallet for utility token or adapter\n//!     type Currency = pallet_balances::Pallet\u003cRuntime\u003e;\n//!     // Anti ddos fee for pool creation\n//!     type CreationFee = CreationFee;\n//!     // External implementation for required opeartions with assets\n//!     type Assets = FrameAssets;\n//!     type OnUnbalanced = EmptyUnbalanceHandler;\n//!     // Module account\n//!     type ModuleId = CurveAmmModuleId;\n//!     // Number type for underlying calculations\n//!     type Number = Number;\n//!     // Value that represents precision used for fixed-point iteration method\n//!     type Precision = Precision;\n//!     // Convertions between `Number` and various representations\n//!     type Convert = FixedU128Convert;\n//! }\n//! ```\n\n#![warn(missing_docs)]\n#![cfg_attr(not(feature = \"std\"), no_std)]\n\npub use pallet::*;\n\n#[cfg(test)]\nmod mock;\n\n#[cfg(test)]\nmod tests;\n\nuse frame_support::codec::{Decode, Encode};\nuse frame_support::traits::Get;\nuse sp_runtime::traits::{CheckedAdd, CheckedDiv, CheckedMul, CheckedSub, Convert};\nuse sp_runtime::Permill;\nuse sp_std::prelude::*;\nuse traits::CheckedConvert;\n\n#[frame_support::pallet]\npub mod pallet {\n    use super::{traits::Assets, traits::CheckedConvert, PoolId, PoolInfo, PoolTokenIndex};\n    use frame_support::{\n        dispatch::{Codec, DispatchResult, DispatchResultWithPostInfo},\n        pallet_prelude::*,\n        traits::{Currency, ExistenceRequirement, OnUnbalanced, WithdrawReasons},\n    };\n    use frame_system::pallet_prelude::*;\n    use sp_runtime::traits::{\n        AccountIdConversion, CheckedAdd, CheckedDiv, CheckedMul, CheckedSub, Convert,\n    };\n    use sp_runtime::{ModuleId, Permill};\n    use sp_std::collections::btree_set::BTreeSet;\n    use sp_std::iter::FromIterator;\n    use sp_std::prelude::*;\n\n    /// Config of Equilibrium Curve Amm pallet\n    #[pallet::config]\n    pub trait Config: frame_system::Config {\n        /// The overarching event type.\n        type Event: From\u003cEvent\u003cSelf\u003e\u003e + IsType\u003c\u003cSelf as frame_system::Config\u003e::Event\u003e;\n\n        /// Identificator type of Asset\n        type AssetId: Parameter + Ord + Copy;\n        /// The balance of an account\n        type Balance: Parameter + Codec + Copy + Ord;\n        /// External implementation for required opeartions with assets\n        type Assets: super::traits::Assets\u003cSelf::AssetId, Self::Balance, Self::AccountId\u003e;\n        /// Standart balances pallet for utility token or adapter\n        type Currency: Currency\u003cSelf::AccountId, Balance = Self::Balance\u003e;\n        /// Anti ddos fee for pool creation\n        #[pallet::constant]\n        type CreationFee: Get\u003cSelf::Balance\u003e;\n        /// What to do with fee (burn, transfer to treasury, etc)\n        type OnUnbalanced: OnUnbalanced\u003c\n            \u003cSelf::Currency as Currency\u003cSelf::AccountId\u003e\u003e::NegativeImbalance,\n        \u003e;\n        /// Module account\n        #[pallet::constant]\n        type ModuleId: Get\u003cModuleId\u003e;\n\n        /// Number type for underlying calculations\n        type Number: Parameter + CheckedAdd + CheckedSub + CheckedMul + CheckedDiv + Copy + Eq + Ord;\n        /// Value that represents precision used for fixed-point iteration method\n        type Precision: Get\u003cSelf::Number\u003e;\n        /// Convertions between `Self::Number` and various representations\n        type Convert: Convert\u003cPermill, Self::Number\u003e\n            + Convert\u003cSelf::Balance, Self::Number\u003e\n            + Convert\u003cu8, Self::Number\u003e\n            + CheckedConvert\u003cusize, Self::Number\u003e\n            + Convert\u003cSelf::Number, Self::Balance\u003e;\n    }\n\n    #[pallet::pallet]\n    #[pallet::generate_store(pub(super) trait Store)]\n    pub struct Pallet\u003cT\u003e(_);\n\n    /// Current number of pools\n    #[pallet::storage]\n    #[pallet::getter(fn pool_count)]\n    pub type PoolCount\u003cT: Config\u003e = StorageValue\u003c_, PoolId, ValueQuery\u003e;\n\n    /// Existing pools\n    #[pallet::storage]\n    #[pallet::getter(fn pools)]\n    pub type Pools\u003cT: Config\u003e =\n        StorageMap\u003c_, Blake2_128Concat, PoolId, PoolInfo\u003cT::AssetId, T::Number, T::Balance\u003e\u003e;\n\n    /// Event type for Equilibrium Curve AMM pallet\n    #[pallet::event]\n    #[pallet::metadata(T::AccountId = \"AccountId\")]\n    #[pallet::generate_deposit(pub(super) fn deposit_event)]\n    pub enum Event\u003cT: Config\u003e {\n        /// Pool with specified id created successfully\n        CreatePool(T::AccountId, PoolId),\n        /// Liquidity added into pool\n        AddLiquidity(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n            T::Balance,\n        ),\n        /// Token exchange happened\n        TokenExchange(\n            T::AccountId,\n            PoolId,\n            PoolTokenIndex,\n            T::Balance,\n            PoolTokenIndex,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool in balanced way\n        RemoveLiquidity(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool in imbalanced way\n        RemoveLiquidityImbalance(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool only for one token\n        RemoveLiquidityOne(T::AccountId, PoolId, T::Balance, T::Balance, T::Balance),\n    }\n\n    /// Error type for Equilibrium Curve AMM pallet\n    #[pallet::error]\n    pub enum Error\u003cT\u003e {\n        /// Could not create new asset\n        AssetNotCreated,\n        /// Values in the storage are inconsistent\n        InconsistentStorage,\n        /// Not enough assets provided\n        NotEnoughAssets,\n        /// Some provided assets are not unique\n        DuplicateAssets,\n        /// Pool with specified id is not found\n        PoolNotFound,\n        /// Error occurred while performing math calculations\n        Math,\n        /// Specified asset amount is wrong\n        WrongAssetAmount,\n        /// Required amount of some token did not reached during adding or removing liquidity\n        RequiredAmountNotReached,\n        /// Source does not have required amount of coins to complete operation\n        InsufficientFunds,\n    }\n\n    #[pallet::hooks]\n    impl\u003cT: Config\u003e Hooks\u003cBlockNumberFor\u003cT\u003e\u003e for Pallet\u003cT\u003e {}\n\n    #[pallet::call]\n    impl\u003cT: Config\u003e Pallet\u003cT\u003e {\n        /// Creates pool, taking creation fee from the caller\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn create_pool(\n            origin: OriginFor\u003cT\u003e,\n            assets: Vec\u003cT::AssetId\u003e,\n            amplification: T::Number,\n            fee: Permill,\n            admin_fee: Permill,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            // Assets related checks\n            ensure!(assets.len() \u003e 1, Error::\u003cT\u003e::NotEnoughAssets);\n            let unique_assets = BTreeSet::\u003cT::AssetId\u003e::from_iter(assets.iter().copied());\n            ensure!(\n                unique_assets.len() == assets.len(),\n                Error::\u003cT\u003e::DuplicateAssets\n            );\n\n            // Take fee\n            let creation_fee = T::CreationFee::get();\n            let imbalance = T::Currency::withdraw(\n                \u0026who,\n                creation_fee,\n                WithdrawReasons::FEE,\n                ExistenceRequirement::AllowDeath,\n            )\n            .map_err(|_| Error::\u003cT\u003e::InsufficientFunds)?;\n            T::OnUnbalanced::on_unbalanced(imbalance);\n\n            // Add new pool\n            let pool_id =\n                PoolCount::\u003cT\u003e::try_mutate(|pool_count| -\u003e Result\u003cPoolId, DispatchError\u003e {\n                    let pool_id = *pool_count;\n\n                    Pools::\u003cT\u003e::try_mutate_exists(pool_id, |maybe_pool_info| -\u003e DispatchResult {\n                        // We expect that PoolInfos have sequential keys.\n                        // No PoolInfo can have key greater or equal to PoolCount\n                        ensure!(maybe_pool_info.is_none(), Error::\u003cT\u003e::InconsistentStorage);\n\n                        let asset =\n                            T::Assets::create_asset().map_err(|_| Error::\u003cT\u003e::AssetNotCreated)?;\n\n                        let balances = vec![\n                            Self::convert_number_to_balance(Self::get_number(0));\n                            assets.len()\n                        ];\n\n                        *maybe_pool_info = Some(PoolInfo {\n                            pool_asset: asset,\n                            assets: assets,\n                            amplification,\n                            fee,\n                            admin_fee,\n                            balances,\n                        });\n\n                        Ok(())\n                    })?;\n\n                    *pool_count = pool_id\n                        .checked_add(1)\n                        .ok_or(Error::\u003cT\u003e::InconsistentStorage)?;\n\n                    Ok(pool_id)\n                })?;\n\n            Self::deposit_event(Event::CreatePool(who.clone(), pool_id));\n\n            Ok(().into())\n        }\n\n        /// Deposit coins into the pool.\n        /// `amounts` - list of amounts of coins to deposit,\n        /// `min_mint_amount` - minimum amout of LP tokens to mint from the deposit.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn add_liquidity(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amounts: Vec\u003cT::Balance\u003e,\n            min_mint_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let (provider, pool_id, token_amounts, fees, invariant, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let old_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    let d0 = Self::get_d(\u0026old_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    let mut new_balances = old_balances.clone();\n                    let n_amounts = amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_balance_to_number)\n                        .collect::\u003cVec\u003c_\u003e\u003e();\n                    for i in 0..n_coins {\n                        if token_supply == zero {\n                            ensure!(n_amounts[i] \u003e zero, Error::\u003cT\u003e::WrongAssetAmount);\n                        }\n                        new_balances[i] = new_balances[i]\n                            .checked_add(\u0026n_amounts[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n\n                    let d1 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(d1 \u003e d0, Error::\u003cT\u003e::WrongAssetAmount);\n\n                    let mut fees = vec![zero; n_coins];\n                    let mint_amount;\n\n                    // Only account for fees if we are not the first to deposit\n                    if token_supply \u003e zero {\n                        // Deposit x + withdraw y would charge about same\n                        // fees as a swap. Otherwise, one could exchange w/o paying fees.\n                        // And this formula leads to exactly that equality\n                        // fee = pool.fee * n_coins / (4 * (n_coins - 1))\n                        let fee = (|| {\n                            let n_coins =\n                                \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n_coins)?;\n                            let one = Self::get_number(1);\n                            let four = Self::get_number(4);\n\n                            \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee)\n                                .checked_mul(\u0026n_coins)?\n                                .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                        let admin_fee =\n                            \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                        for i in 0..n_coins {\n                            // ideal_balance = d1 * old_balances[i] / d0\n                            let ideal_balance =\n                                (|| d1.checked_mul(\u0026old_balances[i])?.checked_div(\u0026d0))()\n                                    .ok_or(Error::\u003cT\u003e::Math)?;\n\n                            let new_balance = new_balances[i];\n\n                            // difference = abs(ideal_balance - new_balance)\n                            let difference = (if ideal_balance \u003e new_balance {\n                                ideal_balance.checked_sub(\u0026new_balance)\n                            } else {\n                                new_balance.checked_sub(\u0026ideal_balance)\n                            })\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n\n                            fees[i] = fee.checked_mul(\u0026difference).ok_or(Error::\u003cT\u003e::Math)?;\n                            // new_pool_balance = new_balance - (fees[i] * admin_fee)\n                            let new_pool_balance =\n                                (|| new_balance.checked_sub(\u0026fees[i].checked_mul(\u0026admin_fee)?))()\n                                    .ok_or(Error::\u003cT\u003e::Math)?;\n                            pool.balances[i] = Self::convert_number_to_balance(new_pool_balance);\n\n                            new_balances[i] = new_balances[i]\n                                .checked_sub(\u0026fees[i])\n                                .ok_or(Error::\u003cT\u003e::Math)?;\n                        }\n                        let d2 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // mint_amount = token_supply * (d2 - d0) / d0\n                        mint_amount = (|| {\n                            token_supply\n                                .checked_mul(\u0026d2.checked_sub(\u0026d0)?)?\n                                .checked_div(\u0026d0)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                    } else {\n                        pool.balances = Self::convert_vec_number_to_balance(new_balances);\n                        mint_amount = d1;\n                    }\n\n                    ensure!(\n                        mint_amount \u003e= Self::convert_balance_to_number(min_mint_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_add(\u0026mint_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // Ensure that for all tokens user has sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026who) \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026who,\n                                \u0026T::ModuleId::get().into_account(),\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    T::Assets::mint(\n                        pool.pool_asset,\n                        \u0026who,\n                        Self::convert_number_to_balance(mint_amount),\n                    )?;\n\n                    let fees = fees\n                        .into_iter()\n                        .map(|x| Self::convert_number_to_balance(x))\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(d1),\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::AddLiquidity(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                invariant,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Perform an exchange between two coins.\n        /// `i` - index value of the coin to send,\n        /// `j` - index value of the coin to recieve,\n        /// `dx` - amount of `i` being exchanged,\n        /// `min_dy` - minimum amount of `j` to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn exchange(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            i: PoolTokenIndex,\n            j: PoolTokenIndex,\n            dx: T::Balance,\n            min_dy: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let one = Self::get_number(1);\n\n            // sold_id, tokens_sold, bought_id, tokens_bought\n            let (provider, pool_id, dy) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let i = i as usize;\n                    let j = j as usize;\n\n                    let n_dx = Self::convert_balance_to_number(dx);\n                    let n_min_dy = Self::convert_balance_to_number(min_dy);\n\n                    let xp = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    // xp[i] + dx\n                    let x = xp[i].checked_add(\u0026n_dx).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let n_coins = pool.assets.len();\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n                    let y = Self::get_y(i, j, x, \u0026xp, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // -1 just in case there were some rounding errors\n                    // dy = xp[j] - y - 1\n                    let n_dy =\n                        (|| xp[j].checked_sub(\u0026y)?.checked_sub(\u0026one))().ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let fee = \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee);\n                    let dy_fee = n_dy.checked_mul(\u0026fee).ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(n_dy \u003e= n_min_dy, Error::\u003cT\u003e::RequiredAmountNotReached);\n\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                    let dy_admin_fee = dy_fee.checked_mul(\u0026admin_fee).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    pool.balances[i] = Self::convert_number_to_balance(\n                        xp[i].checked_add(\u0026n_dx).ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n                    // When rounding errors happen, we undercharge admin fee in favor of LP\n                    // pool.balances[j] = xp[j] - n_dy - dy_admin_fee\n                    pool.balances[j] = Self::convert_number_to_balance(\n                        (|| xp[j].checked_sub(\u0026n_dy)?.checked_sub(\u0026dy_admin_fee))()\n                            .ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n\n                    let dy = Self::convert_number_to_balance(n_dy);\n\n                    T::Assets::transfer(\n                        pool.assets[i],\n                        \u0026who,\n                        \u0026T::ModuleId::get().into_account(),\n                        dx,\n                    )?;\n\n                    T::Assets::transfer(\n                        pool.assets[j],\n                        \u0026T::ModuleId::get().into_account(),\n                        \u0026who,\n                        dy,\n                    )?;\n\n                    Ok((who.clone(), pool_id, dy))\n                })?;\n\n            Self::deposit_event(Event::TokenExchange(provider, pool_id, i, dx, j, dy));\n\n            Ok(().into())\n        }\n\n        /// Withdraw coins from the pool.\n        /// Withdrawal amount are based on current deposit ratios.\n        /// `amount` - quantity of LP tokens to burn in the withdrawal,\n        /// `min_amounts` - minimum amounts of underlying coins to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amount: T::Balance,\n            min_amounts: Vec\u003cT::Balance\u003e,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let n_amount = Self::convert_balance_to_number(amount);\n\n            let min_amounts = min_amounts\n                .into_iter()\n                .map(Self::convert_balance_to_number)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            let (provider, pool_id, token_amounts, fees, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n\n                    let mut n_amounts = vec![zero; n_coins];\n\n                    for i in 0..n_coins {\n                        let old_balance = Self::convert_balance_to_number(pool.balances[i]);\n                        // value = old_balance * n_amount / token_supply\n                        let value = (|| {\n                            old_balance\n                                .checked_mul(\u0026n_amount)?\n                                .checked_div(\u0026token_supply)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                        ensure!(\n                            value \u003e= min_amounts[i],\n                            Error::\u003cT\u003e::RequiredAmountNotReached\n                        );\n\n                        // pool.balances[i] = old_balance - value\n                        pool.balances[i] = Self::convert_number_to_balance(\n                            old_balance\n                                .checked_sub(\u0026value)\n                                .ok_or(Error::\u003cT\u003e::InsufficientFunds)?,\n                        );\n\n                        n_amounts[i] = value;\n                    }\n\n                    let amounts = n_amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_number_to_balance)\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    let new_token_supply = token_supply\n                        .checked_sub(\u0026n_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let fees = vec![Self::convert_number_to_balance(zero); n_coins];\n\n                    T::Assets::burn(pool.pool_asset, \u0026who, amount)?;\n\n                    // Ensure that for all tokens we have sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                                \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026T::ModuleId::get().into_account(),\n                                \u0026who,\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidity(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Withdraw coins from the pool in an imbalanced amount.\n        /// `amounts` - list of amounts of underlying coins to withdraw,\n        /// `max_burn_amount` - maximum amount of LP token to burn in the withdrawal.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity_imbalance(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amounts: Vec\u003cT::Balance\u003e,\n            max_burn_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let (provider, pool_id, token_amounts, fees, invariant, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let old_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    let d0 = Self::get_d(\u0026old_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let mut new_balances = old_balances.clone();\n                    let n_amounts = amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_balance_to_number)\n                        .collect::\u003cVec\u003c_\u003e\u003e();\n                    for i in 0..n_coins {\n                        new_balances[i] = new_balances[i]\n                            .checked_sub(\u0026n_amounts[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n\n                    let d1 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // Deposit x + withdraw y would charge about same\n                    // fees as a swap. Otherwise, one could exchange w/o paying fees.\n                    // And this formula leads to exactly that equality\n                    // fee = pool.fee * n_coins / (4 * (n_coins - 1))\n                    let fee = (|| {\n                        let n_coins =\n                            \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n_coins)?;\n                        let one = Self::get_number(1);\n                        let four = one\n                            .checked_add(\u0026one)?\n                            .checked_add(\u0026one)?\n                            .checked_add(\u0026one)?;\n\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee)\n                            .checked_mul(\u0026n_coins)?\n                            .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)\n                    })()\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                    let mut fees = vec![zero; n_coins];\n                    for i in 0..n_coins {\n                        let new_balance = new_balances[i];\n\n                        ensure!(d0 != zero, Error::\u003cT\u003e::InsufficientFunds);\n                        // ideal_balance = d1 * old_balances[i] / d0\n                        let ideal_balance =\n                            (|| d1.checked_mul(\u0026old_balances[i])?.checked_div(\u0026d0))()\n                                .ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // difference = abs(ideal_balance - new_balance)\n                        let difference = (if ideal_balance \u003e new_balance {\n                            ideal_balance.checked_sub(\u0026new_balance)\n                        } else {\n                            new_balance.checked_sub(\u0026ideal_balance)\n                        })\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                        fees[i] = fee.checked_mul(\u0026difference).ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // pool.balances[i] = new_balance - (fees[i] * admin_fee)\n                        pool.balances[i] = Self::convert_number_to_balance(\n                            (|| new_balance.checked_sub(\u0026fees[i].checked_mul(\u0026admin_fee)?))()\n                                .ok_or(Error::\u003cT\u003e::Math)?,\n                        );\n\n                        new_balances[i] = new_balances[i]\n                            .checked_sub(\u0026fees[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n                    let d2 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    // token_amount = token_supply * (d0 - d2) / d0\n                    let token_amount = (|| {\n                        token_supply\n                            .checked_mul(\u0026d0.checked_sub(\u0026d2)?)?\n                            .checked_div(\u0026d0)\n                    })()\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(token_amount != zero, Error::\u003cT\u003e::WrongAssetAmount);\n                    // In case of rounding errors - make it unfavorable for the \"attacker\"\n                    let token_amount = token_amount\n                        .checked_add(\u0026T::Precision::get())\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    ensure!(\n                        token_amount \u003c= Self::convert_balance_to_number(max_burn_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_sub(\u0026token_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    T::Assets::burn(\n                        pool.pool_asset,\n                        \u0026who,\n                        Self::convert_number_to_balance(token_amount),\n                    )?;\n\n                    // Ensure that for all tokens we have sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                                \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026T::ModuleId::get().into_account(),\n                                \u0026who,\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    let fees = fees\n                        .into_iter()\n                        .map(|x| Self::convert_number_to_balance(x))\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(d1),\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidityImbalance(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                invariant,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Withdraw a signe coin from the pool.\n        /// `token_amount` - amount of LP tokens to burn in the withdrawal,\n        /// `i` - index value of the coin to withdraw,\n        /// `min_amount` - minimum amount of coin to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity_one_coin(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            token_amount: T::Balance,\n            i: PoolTokenIndex,\n            min_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let i = i as usize;\n\n            let n_token_amount = Self::convert_balance_to_number(token_amount);\n\n            let (provider, pool_id, burn_amount, dy, new_token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    let pool_fee = \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee);\n\n                    let pool_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n                    let (dy, dy_fee) = Self::calc_withdraw_one_coin(\n                        n_token_amount,\n                        i,\n                        \u0026pool_balances,\n                        ann,\n                        token_supply,\n                        pool_fee,\n                    )\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    ensure!(\n                        dy \u003e Self::convert_balance_to_number(min_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n\n                    // pool.balances[i] = pool.balances[i] - (dy + dy_fee * pool.admin_fee)\n                    pool.balances[i] = Self::convert_number_to_balance(\n                        (|| {\n                            pool_balances[i]\n                                .checked_sub(\u0026dy.checked_add(\u0026dy_fee.checked_mul(\u0026admin_fee)?)?)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_add(\u0026n_token_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let b_dy = Self::convert_number_to_balance(dy);\n\n                    ensure!(\n                        T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                            \u003e= b_dy,\n                        Error::\u003cT\u003e::InsufficientFunds\n                    );\n\n                    T::Assets::burn(pool.pool_asset, \u0026who, token_amount)?;\n\n                    T::Assets::transfer(\n                        pool.assets[i],\n                        \u0026T::ModuleId::get().into_account(),\n                        \u0026who,\n                        b_dy,\n                    )?;\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        token_amount,\n                        b_dy,\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidityOne(\n                provider,\n                pool_id,\n                burn_amount,\n                dy,\n                new_token_supply,\n            ));\n\n            Ok(().into())\n        }\n    }\n}\n\n// The main implementation block for the module.\nimpl\u003cT: Config\u003e Pallet\u003cT\u003e {\n    pub(crate) fn get_number(n: u8) -\u003e T::Number {\n        \u003cT::Convert as Convert\u003cu8, T::Number\u003e\u003e::convert(n)\n    }\n\n    pub(crate) fn convert_number_to_balance(number: T::Number) -\u003e T::Balance {\n        \u003cT::Convert as Convert\u003cT::Number, T::Balance\u003e\u003e::convert(number)\n    }\n\n    pub(crate) fn convert_balance_to_number(balance: T::Balance) -\u003e T::Number {\n        \u003cT::Convert as Convert\u003cT::Balance, T::Number\u003e\u003e::convert(balance)\n    }\n\n    pub(crate) fn convert_vec_number_to_balance(numbers: Vec\u003cT::Number\u003e) -\u003e Vec\u003cT::Balance\u003e {\n        numbers\n            .into_iter()\n            .map(Self::convert_number_to_balance)\n            .collect()\n    }\n\n    pub(crate) fn convert_vec_balance_to_number(balances: Vec\u003cT::Balance\u003e) -\u003e Vec\u003cT::Number\u003e {\n        balances\n            .into_iter()\n            .map(Self::convert_balance_to_number)\n            .collect()\n    }\n\n    /// Find `ann = amp * n^n` where `amp` - amplification coefficient,\n    /// `n` - number of coins.\n    pub(crate) fn get_ann(amp: T::Number, n: usize) -\u003e Option\u003cT::Number\u003e {\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n)?;\n        let mut ann = amp;\n        for _ in 0..n {\n            ann = ann.checked_mul(\u0026n_coins)?;\n        }\n        Some(ann)\n    }\n\n    /// Find `d` preserving StableSwap invariant.\n    /// Here `d` - total amount of coins when they have an equal price,\n    /// `xp` - coin amounts, `ann` is amplification coefficient multiplied by `n^n`,\n    /// where `n` is number of coins.\n    ///\n    /// # Notes\n    ///\n    /// Converging solution:\n    ///\n    /// ```latex\n    /// $$d_{j+1} = \\frac{a \\cdot n^n \\cdot \\sum x_i - \\frac{d_j^{n+1}}{n^n \\cdot \\prod x_i}}{a \\cdot n^n - 1} $$\n    /// ```\n    pub(crate) fn get_d(xp: \u0026[T::Number], ann: T::Number) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n        let one = Self::get_number(1);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        let mut s = zero;\n\n        for x in xp.iter() {\n            s = s.checked_add(x)?;\n        }\n        if s == zero {\n            return Some(zero);\n        }\n\n        let mut d = s;\n\n        for _ in 0..255 {\n            let mut d_p = d;\n            for x in xp.iter() {\n                // d_p = d_p * d / (x * n_coins)\n                d_p = d_p\n                    .checked_mul(\u0026d)?\n                    .checked_div(\u0026x.checked_mul(\u0026n_coins)?)?;\n            }\n            let d_prev = d;\n            // d = (ann * s + d_p * n_coins) * d / ((ann - 1) * d + (n_coins + 1) * d_p)\n            d = ann\n                .checked_mul(\u0026s)?\n                .checked_add(\u0026d_p.checked_mul(\u0026n_coins)?)?\n                .checked_mul(\u0026d)?\n                .checked_div(\n                    \u0026ann.checked_sub(\u0026one)?\n                        .checked_mul(\u0026d)?\n                        .checked_add(\u0026n_coins.checked_add(\u0026one)?.checked_mul(\u0026d_p)?)?,\n                )?;\n\n            if d \u003e d_prev {\n                if d.checked_sub(\u0026d_prev)? \u003c= prec {\n                    return Some(d);\n                }\n            } else {\n                if d_prev.checked_sub(\u0026d)? \u003c= prec {\n                    return Some(d);\n                }\n            }\n        }\n        // Convergence typically occurs in 4 rounds or less, this should be unreachable!\n        None\n    }\n\n    /// Find new amount `xp[j]` if one changes some other amount `x[i]` to value `x` preserving StableSwap invariant.\n    /// Here `xp` - coin amounts, `ann` is amplification coefficient multiplied by `n^n`, where\n    /// `n` is number of coins.\n    ///\n    /// # Explanation\n    ///\n    /// Here we give some explanations of how the function works and what its variables are used for.\n    ///\n    /// ```latex\n    /// Suppose we have $n$ coins with amounts $x_1, \\ldots, x_n$. Let $S$ be equal to $\\sum_{k=1}^{n}\n    /// x_k$ and $P$ equal to $\\prod_{k=1}^n x_k$.\n    /// Let's write StableSwap invariant:\n    /// $$a \\cdot n^n \\cdot S + d = a \\cdot n^n \\cdot d + \\frac{d^{n+1}}{n^n \\cdot P}$$\n    /// where $a$ - amplification coefficient, $d$ - total amount of coins when they have an equal\n    /// price.\n    ///\n    /// We know index $i$ of amount that changed to value $x$.  No other parameters have changed and\n    /// StableSwap invariant is preserved. We want to find a new amount with a given index $j$.\n    /// Let's denote this value $x_j$ as $y$. So for $S$ and $P$ we can write following:\n    /// $$S = x_1 + x_2 + \\ldots + x_{i-1} + x+x_{i+1} + \\ldots + x_{j-1} + y + x_{j+1} + \\ldots +\n    /// x_n$$\n    /// $$P = x_1 \\cdot x_2 \\cdot \\ldots \\cdot x_{i-1} \\cdot x \\cdot x_{i+1} \\cdot \\ldots \\cdot x_{j-1}\n    /// \\cdot y \\cdot x_{j+1} \\cdot \\ldots \\cdot x_n$$\n    ///\n    /// Let sum of all known terms in $S$ be $s$ and product of all known factors in $P$ be $p$. So we\n    /// can rewrite $S$ and $P$:\n    /// $$S = s + y$$\n    /// $$P = p \\cdot y$$\n    ///\n    /// Now we can substitute these values into StableSwap invariant:\n    /// $$a \\cdot n^n \\cdot (s + y) + d = a \\cdot n^n \\cdot d + \\frac{d^{n+1}}{n^n \\cdot p \\cdot y}$$\n    ///\n    /// It's obvious that $y\u003e0$, $a\u003e0$ and $n\u003e0$. So we can rewrite previous equation as a quadratic\n    /// equation with respect to $y$:\n    /// $$y^2 + \\left( s + \\frac{d}{a \\cdot n^n} - d \\right)y = \\frac{d^{n+1}}{a \\cdot n^{2n} \\cdot\n    /// p}$$\n    ///\n    /// Let's introduce variable $ann$ that equals to $a \\cdot n^n$. With $ann$ in mind rewrite\n    /// previous equation:\n    /// $$y^2 + \\left( s + \\frac{d}{ann} - d \\right)y = \\frac{d^{n+1}}{ann \\cdot n^n \\cdot p}$$\n    ///\n    /// Let's introduce $b$ and $c$ such that:\n    /// $$b = s + \\frac{d}{ann} - d$$\n    /// $$c = \\frac{d^{n+1}}{ann \\cdot n^n \\cdot p} $$\n    ///\n    /// Now we can rewrite our quadratic equation as:\n    /// $$y^2 + by = c$$\n    ///\n    /// To solve this equation numerically using fixed-point iteration method let's rewrite it as:\n    /// $$y = \\frac{y^2 + c}{2y + b}$$\n    /// ```\n    pub(crate) fn get_y(\n        i: usize,\n        j: usize,\n        x: T::Number,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n    ) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n\n        let two = Self::get_number(2);\n\n        let n = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        // Same coin\n        if !(i != j) {\n            return None;\n        }\n        // j above n\n        if !(j \u003c xp.len()) {\n            return None;\n        }\n        if !(i \u003c xp.len()) {\n            return None;\n        }\n\n        let d = Self::get_d(xp, ann)?;\n\n        let mut c = d;\n        let mut s = zero;\n\n        // Calculate s and c\n        // p is implicitly calculated as part of c\n        // note that loop makes n - 1 iterations\n        for k in 0..xp.len() {\n            let x_k;\n            if k == i {\n                x_k = x;\n            } else if k != j {\n                x_k = xp[k];\n            } else {\n                continue;\n            }\n            // s = s + x_k\n            s = s.checked_add(\u0026x_k)?;\n            // c = c * d / (x_k * n)\n            c = c.checked_mul(\u0026d)?.checked_div(\u0026x_k.checked_mul(\u0026n)?)?;\n        }\n        // c = c * d / (ann * n)\n        // At this step we have d^n in the numerator of c\n        // and n^(n-1) in its denominator.\n        // So we multiplying it by remaining d/n\n        c = c.checked_mul(\u0026d)?.checked_div(\u0026ann.checked_mul(\u0026n)?)?;\n\n        // b = s + d / ann\n        // We subtract d later\n        let b = s.checked_add(\u0026d.checked_div(\u0026ann)?)?;\n        let mut y = d;\n\n        for _ in 0..255 {\n            let y_prev = y;\n            // y = (y^2 + c) / (2 * y + b - d)\n            // Subtract d to calculate b finally\n            y = y\n                .checked_mul(\u0026y)?\n                .checked_add(\u0026c)?\n                .checked_div(\u0026two.checked_mul(\u0026y)?.checked_add(\u0026b)?.checked_sub(\u0026d)?)?;\n\n            // Equality with the specified precision\n            if y \u003e y_prev {\n                if y.checked_sub(\u0026y_prev)? \u003c= prec {\n                    return Some(y);\n                }\n            } else {\n                if y_prev.checked_sub(\u0026y)? \u003c= prec {\n                    return Some(y);\n                }\n            }\n        }\n\n        None\n    }\n\n    /// Calculate `x[i]` if one reduces `d` from being calculated for `xp` to `d`.\n    /// Done by solving quadratic equation iteratively.\n    ///\n    /// ```latex\n    /// \\[x_1^2 + x_1 \\cdot \\left(sum' - \\frac{A \\cdot n^n - 1) \\cdot D}{A \\cdot n^n}\\right) = \\frac{D^{n + 1}}{n^{2n} \\cdot prod' \\cdot A}\\]\n    /// \\[x_1^2 + b \\cdot x_1 = c\\]\n    /// \\[x_1 = \\frac{x_1^2 + c}{2x_1 + b}\\]\n    /// ```\n    pub(crate) fn get_y_d(\n        i: usize,\n        d: T::Number,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n    ) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n        let two = Self::get_number(2);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        if i \u003e= xp.len() {\n            return None;\n        }\n\n        let mut c = d;\n        let mut s = zero;\n\n        for k in 0..xp.len() {\n            if k == i {\n                continue;\n            }\n\n            let x = xp[k];\n\n            s = s.checked_add(\u0026x)?;\n            // c = c * d / (x * n_coins)\n            c = c.checked_mul(\u0026d)?.checked_div(\u0026x.checked_mul(\u0026n_coins)?)?;\n        }\n        // c = c * d / (ann * n_coins)\n        c = c\n            .checked_mul(\u0026d)?\n            .checked_div(\u0026ann.checked_mul(\u0026n_coins)?)?;\n        // b = s + d / ann\n        let b = s.checked_add(\u0026d.checked_div(\u0026ann)?)?;\n        let mut y = d;\n\n        for _ in 0..255 {\n            let y_prev = y;\n            // y = (y*y + c) / (2 * y + b - d)\n            y = y\n                .checked_mul(\u0026y)?\n                .checked_add(\u0026c)?\n                .checked_div(\u0026two.checked_mul(\u0026y)?.checked_add(\u0026b)?.checked_sub(\u0026d)?)?;\n\n            // Equality with the specified precision\n            if y \u003e y_prev {\n                if y.checked_sub(\u0026y_prev)? \u003c= prec {\n                    return Some(y);\n                }\n            } else {\n                if y_prev.checked_sub(\u0026y)? \u003c= prec {\n                    return Some(y);\n                }\n            }\n        }\n\n        None\n    }\n\n    /// First, need to calculate:\n    /// - current `d`,\n    /// - solve equation against `y_i` for `d` - token_amount.\n    pub(crate) fn calc_withdraw_one_coin(\n        token_amount: T::Number,\n        i: usize,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n        total_supply: T::Number,\n        pool_fee: T::Number,\n    ) -\u003e Option\u003c(T::Number, T::Number)\u003e {\n        let prec = T::Precision::get();\n        let one = Self::get_number(1);\n        let four = Self::get_number(4);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        let d0 = Self::get_d(xp, ann)?;\n        // d1 = d0 - token_amount * d0 / total_supply\n        let d1 = d0.checked_sub(\u0026token_amount.checked_mul(\u0026d0)?.checked_div(\u0026total_supply)?)?;\n        let new_y = Self::get_y_d(i, d1, xp, ann)?;\n        let mut xp_reduced = xp.to_vec();\n\n        // Deposit x + withdraw y would charge about same\n        // fees as a swap. Otherwise, one could exchange w/o paying fees.\n        // And this formula leads to exactly that equality\n        // fee = pool_fee * n_coins / (4 * (n_coins - 1))\n        let fee = pool_fee\n            .checked_mul(\u0026n_coins)?\n            .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)?;\n\n        for j in 0..xp.len() {\n            let dx_expected = if j == i {\n                // dx_expected = xp[j] * d1 / d0 - new_y\n                xp[j]\n                    .checked_mul(\u0026d1)?\n                    .checked_div(\u0026d0)?\n                    .checked_sub(\u0026new_y)?\n            } else {\n                // dx_expected = xp[j] - xp[j] * d1 / d0\n                xp[j].checked_sub(\u0026xp[j].checked_mul(\u0026d1)?.checked_div(\u0026d0)?)?\n            };\n            // xp_reduced[j] = xp_reduced[j] - fee * dx_expected\n            xp_reduced[j] = xp_reduced[j].checked_sub(\u0026fee.checked_mul(\u0026dx_expected)?)?;\n        }\n\n        let dy = xp_reduced[i].checked_sub(\u0026Self::get_y_d(i, d1, \u0026xp_reduced, ann)?)?;\n        // Withdraw less to account for rounding errors\n        let dy = dy.checked_sub(\u0026prec)?;\n        // Without fees\n        let dy_0 = xp[i].checked_sub(\u0026new_y)?;\n\n        Some((dy, dy_0))\n    }\n}\n\n/// Module that contain traits which must be implemented somewhere in the runtime\n/// in order to equilibrium_curve_amm pallet can work properly.\npub mod traits {\n    use frame_support::dispatch::{DispatchError, DispatchResult};\n\n    /// Pallet equilibrium_curve_amm should interact with custom Assets.\n    /// In order to do this it relies on `Asset` trait implementation.\n    pub trait Assets\u003cAssetId, Balance, AccountId\u003e {\n        /// Creates new asset\n        fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e;\n        /// Mint tokens for the specified asset\n        fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult;\n        /// Burn tokens for the specified asset\n        fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult;\n        /// Transfer tokens for the specified asset\n        fn transfer(\n            asset: AssetId,\n            source: \u0026AccountId,\n            dest: \u0026AccountId,\n            amount: Balance,\n        ) -\u003e DispatchResult;\n        /// Checks the balance for the specified asset\n        fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance;\n        /// Returns total issuance of the specified asset\n        fn total_issuance(asset: AssetId) -\u003e Balance;\n    }\n\n    /// Generic convertion trait. Unlike `sp_runtime::traits::Convert` it supports cases\n    /// where some values of type `A` can not be represented in type `B`.\n    pub trait CheckedConvert\u003cA, B\u003e {\n        /// Make a conversion\n        fn convert(a: A) -\u003e Option\u003cB\u003e;\n    }\n}\n\n/// Type that represents index type of token in the pool passed from the outside as an extrinsic\n/// argument.\npub type PoolTokenIndex = u32;\n\n/// Type that represents pool id\npub type PoolId = u32;\n\n/// Storage record type for a pool\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct PoolInfo\u003cAssetId, Number, Balance\u003e {\n    /// LP multiasset\n    pool_asset: AssetId,\n    /// List of multiassets supported by the pool\n    assets: Vec\u003cAssetId\u003e,\n    /// Initial amplification coefficient (leverage)\n    amplification: Number,\n    /// Amount of the fee pool charges for the exchange\n    fee: Permill,\n    /// Amount of the admin fee pool charges for the exchange\n    admin_fee: Permill,\n    /// Current balances excluding admin_fee\n    balances: Vec\u003cBalance\u003e,\n}\n","traces":[{"line":175,"address":[4449917,4428365,4458558,4424948,4451366,4418672,4427100,4438852,4459510,4459553,4424969,4459773,4431494,4447986,4460847,4442745,4437889,4451766,4457940,4445269,4440922,4435875,4425311,4427434,4428063,4444719,4427778,4432132,4445854,4441200,4436487,4445953,4443244,4444837,4446012,4455009,4442307,4442213,4458864,4429152,4446662,4425047,4425265,4425288,4425380,4428883,4454614,4443096,4456284,4460107,4455500,4458887,4431548,4454769,4444778,4460671,4430822,4453920,4443572,4428577,4434089,4446486,4456699,4430558,4455916,4425334,4430292,4434301,4460070,4435141,4453091,4441187,4433693,4426781,4443207,4444657,4445898,4427335,4426598,4444245,4446071,4447288,4424920,4435090,4455102,4433481,4441752,4429652,4429398,4427688,4447968,4459816,4443609,4441932,4457405,4460144,4452694,4424934,4460389,4452357,4431830,4438235,4452910,4436797,4425357,4459416,4453519,4427724,4453682,4443776,4443170,4418592,4452572,4441846,4424927,4460634,4456191,4445504,4455559,4452031,4424962,4445225,4428275,4439162,4430771,4460728,4457784,4442702,4454710,4427046,4446442,4435046,4447170,4437778,4460589,4457713,4451585,4432344,4436141,4443051,4443133,4424941,4442436,4456589,4458257,4433783,4428937,4455445,4455618,4458606,4439427,4419523,4446721,4455968,4450248,4420735,4454658,4425632,4433995,4418608,4441975,4440343,4426641,4438583,4460181,4426608,4447071,4435352,4447115,4441803,4437598,4428671,4439440,4449125,4444204,4421262,4418693,4439649,4441463,4442819,4443453,4443535,4448691,4453943,4458713,4437584,4425239,4448309,4445386,4453356,4457186,4442782,4457168,4421765,4429977,4431037,4460773,4443799,4442393,4456641,4431458,4439995,4439538,4428016,4442264,4418630,4446541,4435612,4433172,4449497,4445445,4459722,4424768,4433226,4455875,4425213,4432042,4435400,4435926,4432867,4433136,4444602,4430241,4460025,4452194,4457994,4425649,4452592,4441514,4456232,4434567,4420050,4441889,4460344,4458690,4442350,4433437,4444558,4459467,4453897,4422281,4418605,4429742,4430504,4418811,4437680,4460810,4447229,4458407,4430028,4455050,4446603,4434801,4429688,4431783,4432438,4445324,4443498,4424955,4455401,4435663,4436693,4441223,4427010,4431204,4434352,4442651,4456545,4460426,4426592,4451264,4440612,4436282,4432653],"length":1,"stats":{"Line":44},"fn_name":"module_constants_metadata\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":234,"address":[4425872,4425940,4425876,4425936],"length":1,"stats":{"Line":15},"fn_name":"pool_count\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":239,"address":[4426036,4425904,4425920,4426032],"length":1,"stats":{"Line":15},"fn_name":"pools\u003cequilibrium_curve_amm::mock::Test,u32\u003e"},{"line":320,"address":[4373274,4371696],"length":1,"stats":{"Line":1},"fn_name":"create_pool\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":327,"address":[4371987,4373334,4371738],"length":1,"stats":{"Line":5},"fn_name":null},{"line":330,"address":[4372118,4372037,4371963],"length":1,"stats":{"Line":7},"fn_name":null},{"line":331,"address":[4372093,4372168],"length":1,"stats":{"Line":6},"fn_name":null},{"line":332,"address":[4372329,4372372,4372311],"length":1,"stats":{"Line":5},"fn_name":null},{"line":333,"address":[4372259],"length":1,"stats":{"Line":8},"fn_name":null},{"line":334,"address":[4372321],"length":1,"stats":{"Line":0},"fn_name":null},{"line":338,"address":[4372352,4372427],"length":1,"stats":{"Line":13},"fn_name":null},{"line":340,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":342,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":343,"address":[4372435],"length":1,"stats":{"Line":8},"fn_name":null},{"line":345,"address":[4372702,4373488,4372625,4373332],"length":1,"stats":{"Line":7},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":346,"address":[4372677],"length":1,"stats":{"Line":8},"fn_name":null},{"line":349,"address":[4372915,4372764,4374496,4373064,4372959],"length":1,"stats":{"Line":18},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":350,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":351,"address":[4374514],"length":1,"stats":{"Line":5},"fn_name":null},{"line":353,"address":[4374338,4373520,4374683,4374798,4374523],"length":1,"stats":{"Line":13},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":356,"address":[4373643,4373538],"length":1,"stats":{"Line":8},"fn_name":null},{"line":358,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":359,"address":[4373636,4373690,4373892,4373504],"length":1,"stats":{"Line":13},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":361,"address":[4373995],"length":1,"stats":{"Line":5},"fn_name":null},{"line":362,"address":[4373963,4373875],"length":1,"stats":{"Line":13},"fn_name":null},{"line":363,"address":[4373975],"length":1,"stats":{"Line":8},"fn_name":null},{"line":366,"address":[4374120,4374358],"length":1,"stats":{"Line":5},"fn_name":null},{"line":367,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":368,"address":[4374023],"length":1,"stats":{"Line":12},"fn_name":null},{"line":369,"address":[4374067,4374059],"length":1,"stats":{"Line":10},"fn_name":null},{"line":370,"address":[4374063,4374074],"length":1,"stats":{"Line":24},"fn_name":null},{"line":371,"address":[4374076],"length":1,"stats":{"Line":5},"fn_name":null},{"line":372,"address":[4374083],"length":1,"stats":{"Line":12},"fn_name":null},{"line":375,"address":[4374418],"length":1,"stats":{"Line":12},"fn_name":null},{"line":378,"address":[4374925,4374966,4374832,4375003,4374660],"length":1,"stats":{"Line":15},"fn_name":null},{"line":379,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":380,"address":[4374968,4374816,4374906],"length":1,"stats":{"Line":24},"fn_name":null},{"line":382,"address":[4374955],"length":1,"stats":{"Line":12},"fn_name":null},{"line":385,"address":[4373080,4372948],"length":1,"stats":{"Line":17},"fn_name":null},{"line":387,"address":[4373133],"length":1,"stats":{"Line":5},"fn_name":null},{"line":394,"address":[4376248,4375040],"length":1,"stats":{"Line":5},"fn_name":"add_liquidity\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":400,"address":[4375256,4375059,4376324],"length":1,"stats":{"Line":1},"fn_name":null},{"line":402,"address":[4375302,4375240],"length":1,"stats":{"Line":6},"fn_name":null},{"line":404,"address":[4375484,4375323,4376105,4376003,4378416,4387344],"length":1,"stats":{"Line":40},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":405,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":406,"address":[4378449,4378791],"length":1,"stats":{"Line":5},"fn_name":null},{"line":408,"address":[4378757,4378863],"length":1,"stats":{"Line":13},"fn_name":null},{"line":410,"address":[4378943,4378961,4379039],"length":1,"stats":{"Line":5},"fn_name":null},{"line":411,"address":[4378871],"length":1,"stats":{"Line":8},"fn_name":null},{"line":412,"address":[4378953],"length":1,"stats":{"Line":0},"fn_name":null},{"line":415,"address":[4378984,4379095,4379287],"length":1,"stats":{"Line":28},"fn_name":null},{"line":417,"address":[4379241,4379367],"length":1,"stats":{"Line":25},"fn_name":null},{"line":419,"address":[4379640,4379382],"length":1,"stats":{"Line":20},"fn_name":null},{"line":421,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":422,"address":[4379712,4379614],"length":1,"stats":{"Line":10},"fn_name":null},{"line":423,"address":[4379783],"length":1,"stats":{"Line":20},"fn_name":null},{"line":424,"address":[4379798],"length":1,"stats":{"Line":5},"fn_name":null},{"line":425,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":426,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":427,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":428,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":429,"address":[4379985,4380886,4380206],"length":1,"stats":{"Line":21},"fn_name":null},{"line":430,"address":[4380248,4380333,4380422],"length":1,"stats":{"Line":7},"fn_name":null},{"line":431,"address":[4380346,4380295,4380424],"length":1,"stats":{"Line":24},"fn_name":null},{"line":433,"address":[4380556,4380705,4380480,4380843,4380871,4380615],"length":1,"stats":{"Line":43},"fn_name":null},{"line":434,"address":[4380518],"length":1,"stats":{"Line":5},"fn_name":null},{"line":435,"address":[4380793,4380607,4380686],"length":1,"stats":{"Line":6},"fn_name":null},{"line":438,"address":[4381134,4380923,4380180],"length":1,"stats":{"Line":2},"fn_name":null},{"line":439,"address":[4381205,4381100,4381286],"length":1,"stats":{"Line":28},"fn_name":null},{"line":441,"address":[4381252,4381342],"length":1,"stats":{"Line":28},"fn_name":null},{"line":442,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":445,"address":[4387472,4381358,4384556],"length":1,"stats":{"Line":14},"fn_name":null},{"line":450,"address":[4381546,4381636,4381409,4381718,4376448,4381770],"length":1,"stats":{"Line":21},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":451,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":452,"address":[4376463,4376634],"length":1,"stats":{"Line":4},"fn_name":null},{"line":453,"address":[4376611],"length":1,"stats":{"Line":4},"fn_name":null},{"line":454,"address":[4376672],"length":1,"stats":{"Line":4},"fn_name":null},{"line":456,"address":[4376920,4376698,4376928,4377244,4376830],"length":1,"stats":{"Line":20},"fn_name":null},{"line":457,"address":[4376813,4376922],"length":1,"stats":{"Line":6},"fn_name":null},{"line":458,"address":[4376878,4377150,4376968,4377286],"length":1,"stats":{"Line":20},"fn_name":null},{"line":460,"address":[4381617,4381720,4381538],"length":1,"stats":{"Line":16},"fn_name":null},{"line":461,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":462,"address":[4381790,4381684],"length":1,"stats":{"Line":16},"fn_name":null},{"line":463,"address":[4382035,4384042,4381814],"length":1,"stats":{"Line":16},"fn_name":null},{"line":465,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":466,"address":[4377360,4382356,4382408,4382180,4377379,4382270,4382077],"length":1,"stats":{"Line":40},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":467,"address":[4382172,4382251,4382358],"length":1,"stats":{"Line":16},"fn_name":null},{"line":469,"address":[4382318,4382428],"length":1,"stats":{"Line":16},"fn_name":null},{"line":472,"address":[4382648,4382895,4382796,4382947,4382451,4382706],"length":1,"stats":{"Line":27},"fn_name":null},{"line":473,"address":[4382498,4382608],"length":1,"stats":{"Line":6},"fn_name":null},{"line":475,"address":[4382549,4382658],"length":1,"stats":{"Line":10},"fn_name":null},{"line":477,"address":[4382897,4382698,4382777],"length":1,"stats":{"Line":13},"fn_name":null},{"line":479,"address":[4382959,4383223,4382844],"length":1,"stats":{"Line":24},"fn_name":null},{"line":481,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":482,"address":[4383560,4383439,4377648,4377667,4383508,4383246,4383349],"length":1,"stats":{"Line":40},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":483,"address":[4383341,4383420,4383510],"length":1,"stats":{"Line":16},"fn_name":null},{"line":484,"address":[4383572,4383487],"length":1,"stats":{"Line":16},"fn_name":null},{"line":486,"address":[4384027,4383712,4383771,4383861,4383999,4383636],"length":1,"stats":{"Line":40},"fn_name":null},{"line":487,"address":[4383674],"length":1,"stats":{"Line":8},"fn_name":null},{"line":488,"address":[4383842,4383949,4383763],"length":1,"stats":{"Line":16},"fn_name":null},{"line":490,"address":[4382009,4384079,4384346],"length":1,"stats":{"Line":16},"fn_name":null},{"line":493,"address":[4384267,4384558,4384508,4377936,4384610,4384418],"length":1,"stats":{"Line":32},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":494,"address":[4378232,4377951,4378280,4378195,4378319,4378108],"length":1,"stats":{"Line":40},"fn_name":null},{"line":495,"address":[4377954,4378313,4378218,4378147],"length":1,"stats":{"Line":16},"fn_name":null},{"line":496,"address":[4378276],"length":1,"stats":{"Line":8},"fn_name":null},{"line":498,"address":[4384410,4384489,4384560],"length":1,"stats":{"Line":16},"fn_name":null},{"line":500,"address":[4384622,4387359,4381472],"length":1,"stats":{"Line":6},"fn_name":null},{"line":501,"address":[4387440],"length":1,"stats":{"Line":3},"fn_name":null},{"line":504,"address":[4384762,4384778,4384852],"length":1,"stats":{"Line":8},"fn_name":null},{"line":505,"address":[4384659],"length":1,"stats":{"Line":4},"fn_name":null},{"line":506,"address":[4384770],"length":1,"stats":{"Line":2},"fn_name":null},{"line":509,"address":[4385196,4384916,4384801,4385009,4385144],"length":1,"stats":{"Line":12},"fn_name":null},{"line":510,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":511,"address":[4384987,4385146,4384908],"length":1,"stats":{"Line":8},"fn_name":null},{"line":514,"address":[4385057,4385216,4385398,4385648],"length":1,"stats":{"Line":34},"fn_name":null},{"line":515,"address":[4385653,4385609,4385625],"length":1,"stats":{"Line":8},"fn_name":null},{"line":516,"address":[4385432],"length":1,"stats":{"Line":5},"fn_name":null},{"line":517,"address":[4385617],"length":1,"stats":{"Line":1},"fn_name":null},{"line":520,"address":[4385324,4385717,4385895,4386394],"length":1,"stats":{"Line":37},"fn_name":null},{"line":521,"address":[4386045,4386392,4385929],"length":1,"stats":{"Line":33},"fn_name":null},{"line":522,"address":[4386220,4386275,4386380],"length":1,"stats":{"Line":24},"fn_name":null},{"line":523,"address":[4386055,4386006],"length":1,"stats":{"Line":30},"fn_name":null},{"line":524,"address":[4386066],"length":1,"stats":{"Line":24},"fn_name":null},{"line":525,"address":[4386080],"length":1,"stats":{"Line":6},"fn_name":null},{"line":526,"address":[4386154],"length":1,"stats":{"Line":6},"fn_name":null},{"line":531,"address":[4386646,4386425,4386541],"length":1,"stats":{"Line":7},"fn_name":null},{"line":532,"address":[4385825],"length":1,"stats":{"Line":25},"fn_name":null},{"line":533,"address":[4385844],"length":1,"stats":{"Line":7},"fn_name":null},{"line":534,"address":[4385848],"length":1,"stats":{"Line":25},"fn_name":null},{"line":537,"address":[4386478,4386674],"length":1,"stats":{"Line":32},"fn_name":null},{"line":538,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":539,"address":[4378368,4378387],"length":1,"stats":{"Line":32},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":540,"address":[4386704],"length":1,"stats":{"Line":25},"fn_name":null},{"line":542,"address":[4386886],"length":1,"stats":{"Line":7},"fn_name":null},{"line":543,"address":[4386720],"length":1,"stats":{"Line":7},"fn_name":null},{"line":544,"address":[4386744],"length":1,"stats":{"Line":25},"fn_name":null},{"line":545,"address":[4386750],"length":1,"stats":{"Line":7},"fn_name":null},{"line":546,"address":[4386781],"length":1,"stats":{"Line":25},"fn_name":null},{"line":547,"address":[4386821],"length":1,"stats":{"Line":7},"fn_name":null},{"line":548,"address":[4386869],"length":1,"stats":{"Line":25},"fn_name":null},{"line":552,"address":[4375882],"length":1,"stats":{"Line":25},"fn_name":null},{"line":553,"address":[4375794],"length":1,"stats":{"Line":7},"fn_name":null},{"line":554,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":555,"address":[4375802],"length":1,"stats":{"Line":25},"fn_name":null},{"line":556,"address":[4375842],"length":1,"stats":{"Line":7},"fn_name":null},{"line":557,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":558,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":561,"address":[4376122],"length":1,"stats":{"Line":7},"fn_name":null},{"line":570,"address":[4388653,4387824],"length":1,"stats":{"Line":0},"fn_name":"exchange\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":578,"address":[4388010,4387860],"length":1,"stats":{"Line":0},"fn_name":null},{"line":580,"address":[4388052,4387994],"length":1,"stats":{"Line":0},"fn_name":null},{"line":583,"address":[4393550,4388554,4389280,4388240,4388073,4388452],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":584,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":585,"address":[4389306,4389612],"length":1,"stats":{"Line":0},"fn_name":null},{"line":587,"address":[4389535],"length":1,"stats":{"Line":0},"fn_name":null},{"line":588,"address":[4389550],"length":1,"stats":{"Line":0},"fn_name":null},{"line":590,"address":[4389566],"length":1,"stats":{"Line":0},"fn_name":null},{"line":591,"address":[4389678],"length":1,"stats":{"Line":0},"fn_name":null},{"line":593,"address":[4389714],"length":1,"stats":{"Line":0},"fn_name":null},{"line":596,"address":[4390042,4389757],"length":1,"stats":{"Line":0},"fn_name":null},{"line":598,"address":[4390000,4390114],"length":1,"stats":{"Line":0},"fn_name":null},{"line":599,"address":[4390130,4390381],"length":1,"stats":{"Line":0},"fn_name":null},{"line":600,"address":[4390445,4390806,4390318],"length":1,"stats":{"Line":0},"fn_name":null},{"line":604,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":605,"address":[4388736,4390870,4390707,4391050,4388755],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":607,"address":[4391122,4391024],"length":1,"stats":{"Line":0},"fn_name":null},{"line":608,"address":[4391146,4391377],"length":1,"stats":{"Line":0},"fn_name":null},{"line":609,"address":[4391343,4391448,4391521],"length":1,"stats":{"Line":0},"fn_name":null},{"line":611,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":612,"address":[4391495,4391585],"length":1,"stats":{"Line":0},"fn_name":null},{"line":613,"address":[4391609,4391844],"length":1,"stats":{"Line":0},"fn_name":null},{"line":615,"address":[4392089,4392182],"length":1,"stats":{"Line":0},"fn_name":null},{"line":616,"address":[4392110,4391806,4391908],"length":1,"stats":{"Line":0},"fn_name":null},{"line":620,"address":[4392561,4392471],"length":1,"stats":{"Line":0},"fn_name":null},{"line":621,"address":[4392489,4392541,4392246,4392349,4389008,4392439,4389027],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":622,"address":[4392491,4392341,4392420],"length":1,"stats":{"Line":0},"fn_name":null},{"line":625,"address":[4392608],"length":1,"stats":{"Line":0},"fn_name":null},{"line":627,"address":[4392996,4392891,4392836],"length":1,"stats":{"Line":0},"fn_name":null},{"line":628,"address":[4392657],"length":1,"stats":{"Line":0},"fn_name":null},{"line":629,"address":[4392707],"length":1,"stats":{"Line":0},"fn_name":null},{"line":630,"address":[4392721],"length":1,"stats":{"Line":0},"fn_name":null},{"line":631,"address":[4392803],"length":1,"stats":{"Line":0},"fn_name":null},{"line":634,"address":[4393230,4393175,4393335],"length":1,"stats":{"Line":0},"fn_name":null},{"line":635,"address":[4393016],"length":1,"stats":{"Line":0},"fn_name":null},{"line":636,"address":[4393063],"length":1,"stats":{"Line":0},"fn_name":null},{"line":637,"address":[4393145],"length":1,"stats":{"Line":0},"fn_name":null},{"line":638,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":641,"address":[4393355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":644,"address":[4388358],"length":1,"stats":{"Line":0},"fn_name":null},{"line":646,"address":[4388571],"length":1,"stats":{"Line":0},"fn_name":null},{"line":654,"address":[4393616,4394988],"length":1,"stats":{"Line":2},"fn_name":"remove_liquidity\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":660,"address":[4395064,4393839,4393635],"length":1,"stats":{"Line":2},"fn_name":null},{"line":662,"address":[4393886,4393822],"length":1,"stats":{"Line":6},"fn_name":null},{"line":664,"address":[4393907],"length":1,"stats":{"Line":4},"fn_name":null},{"line":666,"address":[4393953],"length":1,"stats":{"Line":6},"fn_name":null},{"line":668,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":671,"address":[4394812,4394215,4395456,4394058,4394710,4399907],"length":1,"stats":{"Line":22},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":672,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":673,"address":[4395764,4395474],"length":1,"stats":{"Line":8},"fn_name":null},{"line":675,"address":[4395719],"length":1,"stats":{"Line":8},"fn_name":null},{"line":677,"address":[4395893,4395875,4395942],"length":1,"stats":{"Line":8},"fn_name":null},{"line":678,"address":[4395830],"length":1,"stats":{"Line":8},"fn_name":null},{"line":679,"address":[4395885],"length":1,"stats":{"Line":0},"fn_name":null},{"line":682,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":683,"address":[4396006,4395924],"length":1,"stats":{"Line":16},"fn_name":null},{"line":685,"address":[4396035],"length":1,"stats":{"Line":8},"fn_name":null},{"line":687,"address":[4396066,4396287,4397370],"length":1,"stats":{"Line":14},"fn_name":null},{"line":688,"address":[4396329],"length":1,"stats":{"Line":8},"fn_name":null},{"line":690,"address":[4396443,4396624,4395216,4396714,4396766,4396534],"length":1,"stats":{"Line":32},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":691,"address":[4395235,4395358,4395228,4395316,4395397],"length":1,"stats":{"Line":32},"fn_name":null},{"line":692,"address":[4395391,4395302,4395231],"length":1,"stats":{"Line":16},"fn_name":null},{"line":693,"address":[4395354],"length":1,"stats":{"Line":8},"fn_name":null},{"line":695,"address":[4396716,4396526,4396605],"length":1,"stats":{"Line":16},"fn_name":null},{"line":696,"address":[4396819,4396909,4396835],"length":1,"stats":{"Line":10},"fn_name":null},{"line":697,"address":[4396778,4396680],"length":1,"stats":{"Line":16},"fn_name":null},{"line":698,"address":[4396827],"length":1,"stats":{"Line":1},"fn_name":null},{"line":702,"address":[4397188,4397095],"length":1,"stats":{"Line":12},"fn_name":null},{"line":703,"address":[4397168,4396973,4397116,4397063,4396858],"length":1,"stats":{"Line":21},"fn_name":null},{"line":704,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":705,"address":[4396965,4397044,4397118],"length":1,"stats":{"Line":15},"fn_name":null},{"line":708,"address":[4397244],"length":1,"stats":{"Line":6},"fn_name":null},{"line":711,"address":[4397391,4396261],"length":1,"stats":{"Line":10},"fn_name":null},{"line":712,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":713,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":714,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":715,"address":[4397523],"length":1,"stats":{"Line":5},"fn_name":null},{"line":717,"address":[4397543,4397781,4397833,4397684,4397594],"length":1,"stats":{"Line":11},"fn_name":null},{"line":718,"address":[4397539],"length":1,"stats":{"Line":5},"fn_name":null},{"line":719,"address":[4397586,4397665,4397783],"length":1,"stats":{"Line":2},"fn_name":null},{"line":721,"address":[4397740,4397845],"length":1,"stats":{"Line":6},"fn_name":null},{"line":723,"address":[4397896,4398050],"length":1,"stats":{"Line":5},"fn_name":null},{"line":726,"address":[4398719,4398357,4398175,4397979],"length":1,"stats":{"Line":15},"fn_name":null},{"line":727,"address":[4398666,4398724,4398696,4399892],"length":1,"stats":{"Line":5},"fn_name":null},{"line":728,"address":[4398645,4398399],"length":1,"stats":{"Line":10},"fn_name":null},{"line":729,"address":[4398591],"length":1,"stats":{"Line":5},"fn_name":null},{"line":730,"address":[4398688],"length":1,"stats":{"Line":0},"fn_name":null},{"line":734,"address":[4398911,4398283,4398788,4399409],"length":1,"stats":{"Line":15},"fn_name":null},{"line":735,"address":[4399407,4399060,4398945],"length":1,"stats":{"Line":10},"fn_name":null},{"line":736,"address":[4399235,4399290,4399395],"length":1,"stats":{"Line":5},"fn_name":null},{"line":737,"address":[4399029,4399070],"length":1,"stats":{"Line":10},"fn_name":null},{"line":738,"address":[4399078],"length":1,"stats":{"Line":5},"fn_name":null},{"line":739,"address":[4399160],"length":1,"stats":{"Line":5},"fn_name":null},{"line":740,"address":[4399164],"length":1,"stats":{"Line":5},"fn_name":null},{"line":745,"address":[4399545],"length":1,"stats":{"Line":5},"fn_name":null},{"line":746,"address":[4398892],"length":1,"stats":{"Line":5},"fn_name":null},{"line":747,"address":[4399422],"length":1,"stats":{"Line":5},"fn_name":null},{"line":748,"address":[4399428],"length":1,"stats":{"Line":5},"fn_name":null},{"line":749,"address":[4399468],"length":1,"stats":{"Line":5},"fn_name":null},{"line":750,"address":[4399528],"length":1,"stats":{"Line":5},"fn_name":null},{"line":754,"address":[4394597],"length":1,"stats":{"Line":5},"fn_name":null},{"line":755,"address":[4394509],"length":1,"stats":{"Line":5},"fn_name":null},{"line":756,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":757,"address":[4394517],"length":1,"stats":{"Line":5},"fn_name":null},{"line":758,"address":[4394557],"length":1,"stats":{"Line":5},"fn_name":null},{"line":759,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":762,"address":[4394842],"length":1,"stats":{"Line":4},"fn_name":null},{"line":769,"address":[4400096,4401304],"length":1,"stats":{"Line":1},"fn_name":"remove_liquidity_imbalance\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":775,"address":[4400115,4401380,4400312],"length":1,"stats":{"Line":1},"fn_name":null},{"line":777,"address":[4400358,4400296],"length":1,"stats":{"Line":2},"fn_name":null},{"line":779,"address":[4400700],"length":1,"stats":{"Line":3},"fn_name":null},{"line":780,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":781,"address":[4404145,4404479],"length":1,"stats":{"Line":1},"fn_name":null},{"line":783,"address":[4404551,4404445],"length":1,"stats":{"Line":2},"fn_name":null},{"line":785,"address":[4404649,4404727,4404631],"length":1,"stats":{"Line":2},"fn_name":null},{"line":786,"address":[4404559],"length":1,"stats":{"Line":2},"fn_name":null},{"line":787,"address":[4404641],"length":1,"stats":{"Line":0},"fn_name":null},{"line":790,"address":[4404975,4404672,4404783],"length":1,"stats":{"Line":7},"fn_name":null},{"line":792,"address":[4405055,4404929],"length":1,"stats":{"Line":7},"fn_name":null},{"line":794,"address":[4405070,4405325],"length":1,"stats":{"Line":1},"fn_name":null},{"line":796,"address":[4405318],"length":1,"stats":{"Line":6},"fn_name":null},{"line":797,"address":[4405389],"length":1,"stats":{"Line":1},"fn_name":null},{"line":798,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":799,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":800,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":801,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":802,"address":[4406240,4405576,4405797],"length":1,"stats":{"Line":7},"fn_name":null},{"line":803,"address":[4406197,4405969,4406059,4405910,4406225,4405831],"length":1,"stats":{"Line":10},"fn_name":null},{"line":804,"address":[4405872],"length":1,"stats":{"Line":6},"fn_name":null},{"line":805,"address":[4405961,4406147,4406040],"length":1,"stats":{"Line":12},"fn_name":null},{"line":808,"address":[4405771,4406277,4406525],"length":1,"stats":{"Line":7},"fn_name":null},{"line":814,"address":[4406821,4406597,4401504,4406462,4406687,4406769],"length":1,"stats":{"Line":12},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":815,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":816,"address":[4401519,4401711],"length":1,"stats":{"Line":3},"fn_name":null},{"line":817,"address":[4401688],"length":1,"stats":{"Line":4},"fn_name":null},{"line":818,"address":[4402161,4402017,4401753,4401968,4401870,4402210,4402353,4402256,4402063,4402345],"length":1,"stats":{"Line":25},"fn_name":null},{"line":819,"address":[4401853,4401962],"length":1,"stats":{"Line":5},"fn_name":null},{"line":820,"address":[4402046,4402155],"length":1,"stats":{"Line":3},"fn_name":null},{"line":821,"address":[4402347,4402239],"length":1,"stats":{"Line":8},"fn_name":null},{"line":823,"address":[4402488,4402387,4402312,4402578,4402586,4402922],"length":1,"stats":{"Line":18},"fn_name":null},{"line":824,"address":[4402471,4402580],"length":1,"stats":{"Line":9},"fn_name":null},{"line":825,"address":[4402635,4402828,4402973,4402536],"length":1,"stats":{"Line":21},"fn_name":null},{"line":827,"address":[4406771,4406589,4406668],"length":1,"stats":{"Line":18},"fn_name":null},{"line":828,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":829,"address":[4406841,4406735],"length":1,"stats":{"Line":12},"fn_name":null},{"line":830,"address":[4406873],"length":1,"stats":{"Line":9},"fn_name":null},{"line":831,"address":[4406934,4407155,4409282],"length":1,"stats":{"Line":6},"fn_name":null},{"line":832,"address":[4407189],"length":1,"stats":{"Line":9},"fn_name":null},{"line":834,"address":[4407441,4407266],"length":1,"stats":{"Line":4},"fn_name":null},{"line":836,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":837,"address":[4407595,4407729,4407505,4407346,4403056,4407677,4403075],"length":1,"stats":{"Line":39},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":838,"address":[4407679,4407576,4407497],"length":1,"stats":{"Line":6},"fn_name":null},{"line":841,"address":[4407962,4408052,4407904,4408151,4407643,4407748,4408203],"length":1,"stats":{"Line":28},"fn_name":null},{"line":842,"address":[4407864,4407754],"length":1,"stats":{"Line":4},"fn_name":null},{"line":844,"address":[4407805,4407914],"length":1,"stats":{"Line":10},"fn_name":null},{"line":846,"address":[4408153,4407954,4408033],"length":1,"stats":{"Line":6},"fn_name":null},{"line":848,"address":[4408215,4408100,4408479],"length":1,"stats":{"Line":15},"fn_name":null},{"line":851,"address":[4408727,4408812],"length":1,"stats":{"Line":12},"fn_name":null},{"line":852,"address":[4408605,4408695,4408502,4408748,4408800,4403344,4403363],"length":1,"stats":{"Line":39},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":853,"address":[4408676,4408750,4408597],"length":1,"stats":{"Line":6},"fn_name":null},{"line":856,"address":[4409239,4409267,4409011,4408952,4408876,4409101],"length":1,"stats":{"Line":21},"fn_name":null},{"line":857,"address":[4408914],"length":1,"stats":{"Line":9},"fn_name":null},{"line":858,"address":[4409003,4409082,4409189],"length":1,"stats":{"Line":18},"fn_name":null},{"line":860,"address":[4409319,4407129,4409522],"length":1,"stats":{"Line":12},"fn_name":null},{"line":862,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":863,"address":[4409594,4409496],"length":1,"stats":{"Line":12},"fn_name":null},{"line":865,"address":[4409657,4403632,4409834,4409744,4409968,4409916],"length":1,"stats":{"Line":18},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":866,"address":[4404015,4403891,4403647,4403804,4403928,4403976],"length":1,"stats":{"Line":27},"fn_name":null},{"line":867,"address":[4403843,4403650,4403914,4404009],"length":1,"stats":{"Line":12},"fn_name":null},{"line":868,"address":[4403972],"length":1,"stats":{"Line":9},"fn_name":null},{"line":870,"address":[4409815,4409918,4409736],"length":1,"stats":{"Line":8},"fn_name":null},{"line":871,"address":[4410049,4409987,4409890],"length":1,"stats":{"Line":8},"fn_name":null},{"line":873,"address":[4410196,4410137,4410286,4410372,4410424],"length":1,"stats":{"Line":12},"fn_name":null},{"line":874,"address":[4410026,4410113],"length":1,"stats":{"Line":7},"fn_name":null},{"line":875,"address":[4410267,4410188,4410374],"length":1,"stats":{"Line":6},"fn_name":null},{"line":877,"address":[4410599,4410509,4410525],"length":1,"stats":{"Line":9},"fn_name":null},{"line":878,"address":[4410342,4410444],"length":1,"stats":{"Line":7},"fn_name":null},{"line":879,"address":[4410517],"length":1,"stats":{"Line":3},"fn_name":null},{"line":882,"address":[4410945,4410663,4410756,4410893,4410548],"length":1,"stats":{"Line":12},"fn_name":null},{"line":883,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":884,"address":[4410655,4410734,4410895],"length":1,"stats":{"Line":6},"fn_name":null},{"line":886,"address":[4410989,4411113,4411218],"length":1,"stats":{"Line":4},"fn_name":null},{"line":887,"address":[4410804],"length":1,"stats":{"Line":3},"fn_name":null},{"line":888,"address":[4410823],"length":1,"stats":{"Line":4},"fn_name":null},{"line":889,"address":[4410827],"length":1,"stats":{"Line":3},"fn_name":null},{"line":893,"address":[4411042,4411420,4411770,4411238],"length":1,"stats":{"Line":10},"fn_name":null},{"line":894,"address":[4413135,4411747,4411775,4411723],"length":1,"stats":{"Line":4},"fn_name":null},{"line":895,"address":[4411708,4411454],"length":1,"stats":{"Line":6},"fn_name":null},{"line":896,"address":[4411654],"length":1,"stats":{"Line":4},"fn_name":null},{"line":897,"address":[4411739],"length":1,"stats":{"Line":0},"fn_name":null},{"line":901,"address":[4412500,4412001,4411839,4411346],"length":1,"stats":{"Line":10},"fn_name":null},{"line":902,"address":[4412151,4412498,4412035],"length":1,"stats":{"Line":11},"fn_name":null},{"line":903,"address":[4412381,4412486,4412326],"length":1,"stats":{"Line":4},"fn_name":null},{"line":904,"address":[4412161,4412112],"length":1,"stats":{"Line":6},"fn_name":null},{"line":905,"address":[4412169],"length":1,"stats":{"Line":3},"fn_name":null},{"line":906,"address":[4412251],"length":1,"stats":{"Line":2},"fn_name":null},{"line":907,"address":[4412255],"length":1,"stats":{"Line":3},"fn_name":null},{"line":912,"address":[4412521,4411935],"length":1,"stats":{"Line":7},"fn_name":null},{"line":913,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":914,"address":[4404064,4404083],"length":1,"stats":{"Line":8},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":915,"address":[4412551],"length":1,"stats":{"Line":3},"fn_name":null},{"line":917,"address":[4412732],"length":1,"stats":{"Line":4},"fn_name":null},{"line":918,"address":[4412567],"length":1,"stats":{"Line":5},"fn_name":null},{"line":919,"address":[4412591],"length":1,"stats":{"Line":3},"fn_name":null},{"line":920,"address":[4412597],"length":1,"stats":{"Line":4},"fn_name":null},{"line":921,"address":[4412628],"length":1,"stats":{"Line":3},"fn_name":null},{"line":922,"address":[4412668],"length":1,"stats":{"Line":4},"fn_name":null},{"line":923,"address":[4412716],"length":1,"stats":{"Line":3},"fn_name":null},{"line":927,"address":[4400938],"length":1,"stats":{"Line":3},"fn_name":null},{"line":928,"address":[4400850],"length":1,"stats":{"Line":4},"fn_name":null},{"line":929,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":930,"address":[4400858],"length":1,"stats":{"Line":3},"fn_name":null},{"line":931,"address":[4400898],"length":1,"stats":{"Line":4},"fn_name":null},{"line":932,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":933,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":936,"address":[4401178],"length":1,"stats":{"Line":4},"fn_name":null},{"line":944,"address":[4414332,4413456],"length":1,"stats":{"Line":1},"fn_name":"remove_liquidity_one_coin\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":951,"address":[4413658,4413488],"length":1,"stats":{"Line":1},"fn_name":null},{"line":953,"address":[4413624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":955,"address":[4413636,4413701],"length":1,"stats":{"Line":2},"fn_name":null},{"line":957,"address":[4414233,4414896,4413722,4414131,4413876,4418501],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":958,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":959,"address":[4414922,4415188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":961,"address":[4415143],"length":1,"stats":{"Line":1},"fn_name":null},{"line":963,"address":[4415299,4415317,4415395],"length":1,"stats":{"Line":1},"fn_name":null},{"line":964,"address":[4415254],"length":1,"stats":{"Line":1},"fn_name":null},{"line":965,"address":[4415309],"length":1,"stats":{"Line":0},"fn_name":null},{"line":968,"address":[4415348,4415637,4415451],"length":1,"stats":{"Line":2},"fn_name":null},{"line":970,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":971,"address":[4415703,4415603],"length":1,"stats":{"Line":2},"fn_name":null},{"line":972,"address":[4415732],"length":1,"stats":{"Line":1},"fn_name":null},{"line":974,"address":[4415786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":975,"address":[4416256,4416308,4416122,4416046,4415925],"length":1,"stats":{"Line":3},"fn_name":null},{"line":976,"address":[4415837,4415844],"length":1,"stats":{"Line":2},"fn_name":null},{"line":977,"address":[4415851,4415840],"length":1,"stats":{"Line":2},"fn_name":null},{"line":978,"address":[4415886],"length":1,"stats":{"Line":1},"fn_name":null},{"line":979,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":980,"address":[4415909],"length":1,"stats":{"Line":1},"fn_name":null},{"line":981,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":983,"address":[4416100,4416258,4416038],"length":1,"stats":{"Line":2},"fn_name":null},{"line":985,"address":[4416393,4416409,4416466],"length":1,"stats":{"Line":1},"fn_name":null},{"line":986,"address":[4416226,4416328],"length":1,"stats":{"Line":2},"fn_name":null},{"line":987,"address":[4416401],"length":1,"stats":{"Line":0},"fn_name":null},{"line":990,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":991,"address":[4416530,4416440],"length":1,"stats":{"Line":2},"fn_name":null},{"line":994,"address":[4416807,4416900],"length":1,"stats":{"Line":2},"fn_name":null},{"line":995,"address":[4414416,4416775,4416828,4416685,4416880,4416562],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":996,"address":[4414438,4414788],"length":1,"stats":{"Line":2},"fn_name":null},{"line":997,"address":[4414824,4414712,4414474],"length":1,"stats":{"Line":2},"fn_name":null},{"line":999,"address":[4416677,4416756,4416830],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1002,"address":[4417045,4417135,4417230,4416974,4417282],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1003,"address":[4416971],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1004,"address":[4417037,4417116,4417232],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1006,"address":[4417183,4417302],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1008,"address":[4418486,4417545,4417569,4417637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1009,"address":[4417318],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1010,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1011,"address":[4417561],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1014,"address":[4417600,4417709,4417788],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1016,"address":[4418088,4418033,4418193],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1017,"address":[4417910,4417747],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1018,"address":[4417918],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1019,"address":[4418000],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1020,"address":[4418004],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1023,"address":[4418308],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1024,"address":[4418213],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1025,"address":[4418241],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1026,"address":[4418237,4418247],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1027,"address":[4418250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1028,"address":[4418278],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1032,"address":[4414066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1033,"address":[4414058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1034,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1035,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1036,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1037,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1040,"address":[4414250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1047,"address":[4348976],"length":1,"stats":{"Line":8},"fn_name":"get_number\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1048,"address":[4348985],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1051,"address":[4349024],"length":1,"stats":{"Line":5},"fn_name":"convert_number_to_balance\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1052,"address":[4349038],"length":1,"stats":{"Line":8},"fn_name":null},{"line":1055,"address":[4349056],"length":1,"stats":{"Line":5},"fn_name":"convert_balance_to_number\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1056,"address":[4349065],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1059,"address":[4349104],"length":1,"stats":{"Line":3},"fn_name":"convert_vec_number_to_balance\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1060,"address":[4349111],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1062,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1066,"address":[4349216],"length":1,"stats":{"Line":5},"fn_name":"convert_vec_balance_to_number\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1067,"address":[4349223],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1069,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1075,"address":[4349328],"length":1,"stats":{"Line":5},"fn_name":"get_ann\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1076,"address":[4349588,4349364],"length":1,"stats":{"Line":8},"fn_name":null},{"line":1077,"address":[4349508],"length":1,"stats":{"Line":8},"fn_name":null},{"line":1078,"address":[4349529,4349737,4349907,4349626],"length":1,"stats":{"Line":29},"fn_name":null},{"line":1079,"address":[4349763,4349912],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1081,"address":[4349697],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1096,"address":[4349968],"length":1,"stats":{"Line":5},"fn_name":"get_d\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1097,"address":[4350023],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1098,"address":[4350046],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1099,"address":[4350072],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1101,"address":[4350348,4350109],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1103,"address":[4350277],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1105,"address":[4350734,4350406,4350325,4350538],"length":1,"stats":{"Line":30},"fn_name":null},{"line":1106,"address":[4350572,4350739],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1108,"address":[4350505,4350788],"length":1,"stats":{"Line":25},"fn_name":null},{"line":1109,"address":[4350794],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1112,"address":[4350843],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1114,"address":[4354615,4350875,4351025],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1115,"address":[4351048],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1116,"address":[4351949,4351096,4351318],"length":1,"stats":{"Line":24},"fn_name":null},{"line":1118,"address":[4351578,4351479,4351962,4351901,4351855,4351738,4351586,4351954,4351352],"length":1,"stats":{"Line":49},"fn_name":null},{"line":1119,"address":[4351462,4351580],"length":1,"stats":{"Line":19},"fn_name":null},{"line":1120,"address":[4351884,4351956,4351644,4351789,4351527],"length":1,"stats":{"Line":29},"fn_name":null},{"line":1122,"address":[4351232],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1124,"address":[4352653,4353877,4352798,4352165,4352595,4353778,4352066,4352442,4354007,4353923,4353999,4351264,4352488,4352699,4352806,4352020,4352173,4352325],"length":1,"stats":{"Line":122},"fn_name":null},{"line":1125,"address":[4352049,4352167],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1126,"address":[4352471,4352231,4352376,4352114,4352589],"length":1,"stats":{"Line":31},"fn_name":null},{"line":1127,"address":[4352682,4352800],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1128,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1129,"address":[4353228,4352864,4353730,4353820,4353828,4353075,4353585,4353220,4352747,4353121,4353684],"length":1,"stats":{"Line":29},"fn_name":null},{"line":1130,"address":[4353104,4353222],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1131,"address":[4353491,4353713,4353286,4353169,4353627,4353822],"length":1,"stats":{"Line":20},"fn_name":null},{"line":1134,"address":[4353971,4354613,4354376,4354045],"length":1,"stats":{"Line":22},"fn_name":null},{"line":1135,"address":[4354321,4354051,4354153],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1136,"address":[4354327],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1139,"address":[4354396,4354561,4354093],"length":1,"stats":{"Line":33},"fn_name":null},{"line":1140,"address":[4354567],"length":1,"stats":{"Line":23},"fn_name":null},{"line":1145,"address":[4351008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1199,"address":[4354688],"length":1,"stats":{"Line":1},"fn_name":"get_y\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1206,"address":[4354823],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1207,"address":[4354846],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1209,"address":[4354894],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1211,"address":[4355131,4354931],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1214,"address":[4355115],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1215,"address":[4355173],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1218,"address":[4355206],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1219,"address":[4355251],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1221,"address":[4355284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1222,"address":[4355329],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1225,"address":[4355346,4355623],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1227,"address":[4355528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1228,"address":[4355568],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1233,"address":[4355608,4356858,4355665,4355867],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1234,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1235,"address":[4355909,4355954],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1236,"address":[4355930],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1237,"address":[4355972],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1238,"address":[4360047,4360081,4355997],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1240,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1243,"address":[4356058,4356276],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1245,"address":[4356342,4356764,4356553,4356863,4356225],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1251,"address":[4355813,4357356,4357145,4356934,4357501],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1255,"address":[4357450,4357778,4357567,4357965],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1256,"address":[4357875],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1258,"address":[4357907,4359972,4358014,4358101],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1259,"address":[4358124],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1262,"address":[4359280,4359364,4359356,4358484,4359135,4359234,4358156,4358380,4358438,4358591,4358583,4358273],"length":1,"stats":{"Line":7},"fn_name":null},{"line":1263,"address":[4358374,4358256],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1264,"address":[4358585,4358467],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1265,"address":[4359263,4359041,4358848,4358649,4359358,4359177,4358532],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1268,"address":[4359328,4359402,4359970,4359733],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1269,"address":[4359408,4359510,4359678],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1270,"address":[4359684],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1273,"address":[4359753,4359918,4359450],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1274,"address":[4359924],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1279,"address":[4358084],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1290,"address":[4360096],"length":1,"stats":{"Line":1},"fn_name":"get_y_d\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1296,"address":[4360191],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1297,"address":[4360214],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1298,"address":[4360262],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1300,"address":[4360299,4360498],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1302,"address":[4360483,4360556],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1303,"address":[4360561],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1306,"address":[4360578],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1307,"address":[4360618],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1309,"address":[4360873,4360658,4361810],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1310,"address":[4360915],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1311,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":1314,"address":[4364992,4365026,4360949],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1316,"address":[4361228,4361010],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1318,"address":[4361294,4361505,4361716,4361177,4361815],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1321,"address":[4361927,4362186,4362026,4362303,4360819,4362448,4362456,4362349,4361881,4362034],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1322,"address":[4361910,4362028],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1323,"address":[4361975,4362092,4362332,4362237,4362450],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1325,"address":[4362397,4362725,4362912,4362514],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1326,"address":[4362822],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1328,"address":[4364919,4363048,4362854,4362961],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1329,"address":[4363071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1331,"address":[4364181,4363385,4364082,4363431,4363327,4363530,4363538,4364227,4363103,4363220,4364303,4364311],"length":1,"stats":{"Line":7},"fn_name":null},{"line":1332,"address":[4363321,4363203],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1333,"address":[4363414,4363532],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1334,"address":[4363479,4364210,4363795,4363988,4364305,4364124,4363596],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1337,"address":[4364917,4364275,4364680,4364349],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1338,"address":[4364355,4364625,4364457],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1339,"address":[4364631],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1342,"address":[4364865,4364700,4364397],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1343,"address":[4364871],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1348,"address":[4363031],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1354,"address":[4365040,4371519],"length":1,"stats":{"Line":1},"fn_name":"calc_withdraw_one_coin\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":1362,"address":[4365233],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1363,"address":[4365259],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1364,"address":[4365285],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1366,"address":[4365553,4365322],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1368,"address":[4365522,4365748,4365603],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1370,"address":[4365993,4366188,4366378,4365798,4365697],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1371,"address":[4366285,4366428,4366553],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1372,"address":[4366522],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1378,"address":[4366849,4366579,4367506,4366870,4367585,4367410,4366750,4367302,4367606],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1379,"address":[4366851,4366733],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1380,"address":[4366798,4366906,4367587,4367353,4367489,4367158],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1382,"address":[4370200,4367570,4367846,4367618],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1383,"address":[4367888,4369554,4368710],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1385,"address":[4367917,4368158,4371551,4368530,4368278,4368410,4368314,4368662,4368715,4367977,4368736,4368566],"length":1,"stats":{"Line":7},"fn_name":null},{"line":1386,"address":[4368141,4368259],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1387,"address":[4368393,4368511],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1388,"address":[4368645,4368717],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1391,"address":[4368756,4371587,4369410,4369158,4367949,4369556],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1394,"address":[4370185,4369589,4369954],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1397,"address":[4370637,4367805,4370205,4370823],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1399,"address":[4370871,4371041,4370781],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1401,"address":[4371689,4371013,4371398,4371082,4371655],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1403,"address":[4371283],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":447,"coverable":571},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","mock.rs"],"content":"use crate as curve_amm;\nuse crate::traits::CheckedConvert;\nuse frame_support::{\n    dispatch::{DispatchError, DispatchResult},\n    parameter_types,\n    traits::{Currency, OnUnbalanced},\n};\nuse frame_system as system;\nuse sp_core::H256;\nuse sp_runtime::traits::Convert;\nuse sp_runtime::Permill;\nuse sp_runtime::{\n    testing::Header,\n    traits::{BlakeTwo256, IdentityLookup},\n    ModuleId,\n};\nuse sp_runtime::{FixedI64, FixedPointNumber, FixedU128};\nuse sp_std::convert::{TryFrom, TryInto};\n\ntype UncheckedExtrinsic = frame_system::mocking::MockUncheckedExtrinsic\u003cTest\u003e;\ntype Block = frame_system::mocking::MockBlock\u003cTest\u003e;\n\n// Configure a mock runtime to test the pallet.\nframe_support::construct_runtime!(\n    pub enum Test where\n        Block = Block,\n        NodeBlock = Block,\n        UncheckedExtrinsic = UncheckedExtrinsic,\n    {\n        System: frame_system::{Module, Call, Config, Storage, Event\u003cT\u003e},\n        Balances: pallet_balances::{Module, Call, Storage, Event\u003cT\u003e},\n        CurveAmm: curve_amm::{Module, Call, Storage, Event\u003cT\u003e},\n    }\n);\n\nparameter_types! {\n    pub const BlockHashCount: u64 = 250;\n    pub const SS58Prefix: u8 = 42;\n}\n\npub type AccountId = u64;\n\nimpl system::Config for Test {\n    type BaseCallFilter = ();\n    type BlockWeights = ();\n    type BlockLength = ();\n    type DbWeight = ();\n    type Origin = Origin;\n    type Call = Call;\n    type Index = u64;\n    type BlockNumber = u64;\n    type Hash = H256;\n    type Hashing = BlakeTwo256;\n    type AccountId = AccountId;\n    type Lookup = IdentityLookup\u003cSelf::AccountId\u003e;\n    type Header = Header;\n    type Event = Event;\n    type BlockHashCount = BlockHashCount;\n    type Version = ();\n    type PalletInfo = PalletInfo;\n    type AccountData = pallet_balances::AccountData\u003cBalance\u003e;\n    type OnNewAccount = ();\n    type OnKilledAccount = ();\n    type SystemWeightInfo = ();\n    type SS58Prefix = SS58Prefix;\n}\n\nparameter_types! {\n    pub const ExistentialDeposit: u64 = 1;\n}\n\nimpl pallet_balances::Config for Test {\n    type MaxLocks = ();\n    type Balance = Balance;\n    type DustRemoval = ();\n    type Event = Event;\n    type ExistentialDeposit = ExistentialDeposit;\n    type AccountStore = System;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const CreationFee: Balance = 999;\n    pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n    pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000_000);\n}\n\npub type Balance = u64;\ntype Number = FixedU128;\n\npub type AssetId = i64;\n\npub struct FixedU128Convert;\n\nimpl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Permill) -\u003e FixedU128 {\n        a.into()\n    }\n}\n\nimpl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Balance) -\u003e FixedU128 {\n        let accuracy = FixedU128::accuracy() / FixedI64::accuracy() as u128;\n        FixedU128::from_inner(a as u128 * accuracy)\n    }\n}\n\nimpl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: u8) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n        Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n    }\n}\n\nimpl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n    fn convert(a: FixedU128) -\u003e Balance {\n        let accuracy = FixedU128::accuracy() / FixedI64::accuracy() as u128;\n        // NOTE: unwrap is for testing purposes only. Do not use it in production.\n        (a.into_inner() / accuracy).try_into().unwrap()\n    }\n}\n\nuse std::cell::RefCell;\nuse std::collections::HashMap;\n\npub struct Asset {\n    total: Balance,\n    balances: HashMap\u003cAccountId, Balance\u003e,\n}\n\nthread_local! {\n    static ASSETS: RefCell\u003cVec\u003cAsset\u003e\u003e = RefCell::new(Vec::new());\n}\n\npub struct TestAssets;\nimpl curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for TestAssets {\n    fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n        ASSETS.with(|d| -\u003e Result\u003cAssetId, DispatchError\u003e {\n            let mut d = d.borrow_mut();\n            let id =\n                AssetId::try_from(d.len()).map_err(|_| DispatchError::Other(\u0026\"Too large id\"))?;\n            d.push(Asset {\n                total: 0,\n                balances: HashMap::new(),\n            });\n\n            Ok(id)\n        })\n    }\n\n    fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        ASSETS.with(|d| -\u003e DispatchResult {\n            let i =\n                usize::try_from(asset).map_err(|_| DispatchError::Other(\u0026\"Index out of range\"))?;\n            let mut d = d.borrow_mut();\n            let a = d\n                .get_mut(i)\n                .ok_or(DispatchError::Other(\u0026\"Index out of range\"))?;\n\n            if let Some(x) = a.balances.get_mut(dest) {\n                *x = x\n                    .checked_add(amount)\n                    .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n            } else {\n                a.balances.insert(*dest, amount);\n            }\n\n            a.total = a\n                .total\n                .checked_add(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            Ok(())\n        })\n    }\n\n    fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        ASSETS.with(|d| -\u003e DispatchResult {\n            let i =\n                usize::try_from(asset).map_err(|_| DispatchError::Other(\u0026\"Index out of range\"))?;\n            let mut d = d.borrow_mut();\n            let a = d\n                .get_mut(i)\n                .ok_or(DispatchError::Other(\u0026\"Index out of range\"))?;\n\n            let x = a\n                .balances\n                .get_mut(dest)\n                .ok_or(DispatchError::Other(\u0026\"Not found\"))?;\n\n            *x = x\n                .checked_sub(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            a.total = a\n                .total\n                .checked_sub(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            Ok(())\n        })\n    }\n\n    fn transfer(\n        asset: AssetId,\n        source: \u0026AccountId,\n        dest: \u0026AccountId,\n        amount: Balance,\n    ) -\u003e DispatchResult {\n        Self::burn(asset, source, amount)?;\n        Self::mint(asset, dest, amount)?;\n        Ok(())\n    }\n\n    fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n        ASSETS\n            .with(|d| -\u003e Option\u003cBalance\u003e {\n                let i = usize::try_from(asset).ok()?;\n                let d = d.borrow();\n                let a = d.get(i)?;\n                a.balances.get(who).map(|x| *x)\n            })\n            .unwrap_or(0)\n    }\n\n    fn total_issuance(asset: AssetId) -\u003e Balance {\n        ASSETS\n            .with(|d| -\u003e Option\u003cBalance\u003e {\n                let i = usize::try_from(asset).ok()?;\n                let d = d.borrow();\n                d.get(i).map(|a| a.total)\n            })\n            .unwrap_or(0)\n    }\n}\n\npub struct EmptyUnbalanceHandler;\n\ntype Imbalance = \u003cpallet_balances::Pallet\u003cTest\u003e as Currency\u003cAccountId\u003e\u003e::NegativeImbalance;\n\nimpl OnUnbalanced\u003cImbalance\u003e for EmptyUnbalanceHandler {}\n\nimpl curve_amm::Config for Test {\n    type Event = Event;\n    type AssetId = i64;\n    type Balance = Balance;\n    type Currency = Balances;\n    type CreationFee = CreationFee;\n    type Assets = TestAssets;\n    type OnUnbalanced = EmptyUnbalanceHandler;\n    type ModuleId = CurveAmmModuleId;\n\n    type Number = Number;\n    type Precision = Precision;\n    type Convert = FixedU128Convert;\n}\n\n// Build genesis storage according to the mock runtime.\npub fn new_test_ext() -\u003e sp_io::TestExternalities {\n    system::GenesisConfig::default()\n        .build_storage::\u003cTest\u003e()\n        .unwrap()\n        .into()\n}\n","traces":[{"line":24,"address":[4657184,4657188],"length":1,"stats":{"Line":145},"fn_name":"runtime_integrity_tests"},{"line":30,"address":[4854697,4854080,4852251,4854320,4854553,4852309,4852567],"length":1,"stats":{"Line":0},"fn_name":null},{"line":31,"address":[4854134,4854374,4852829,4852771,4853120],"length":1,"stats":{"Line":0},"fn_name":null},{"line":32,"address":[4853606,4853375,4854428,4854188,4853318],"length":1,"stats":{"Line":3},"fn_name":null},{"line":84,"address":[4855396],"length":1,"stats":{"Line":25},"fn_name":null},{"line":85,"address":[4855460],"length":1,"stats":{"Line":5},"fn_name":null},{"line":96,"address":[4981616],"length":1,"stats":{"Line":1},"fn_name":"convert"},{"line":97,"address":[4981624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[4981664],"length":1,"stats":{"Line":5},"fn_name":"convert"},{"line":103,"address":[4981678,4981905],"length":1,"stats":{"Line":20},"fn_name":null},{"line":104,"address":[4981935,4981795,4981965],"length":1,"stats":{"Line":5},"fn_name":null},{"line":109,"address":[4981968],"length":1,"stats":{"Line":8},"fn_name":"convert"},{"line":110,"address":[4981977],"length":1,"stats":{"Line":5},"fn_name":null},{"line":115,"address":[4982016],"length":1,"stats":{"Line":5},"fn_name":"convert"},{"line":116,"address":[4982028,4982228],"length":1,"stats":{"Line":13},"fn_name":null},{"line":121,"address":[4982288],"length":1,"stats":{"Line":5},"fn_name":"convert"},{"line":122,"address":[4982318,4982602],"length":1,"stats":{"Line":8},"fn_name":null},{"line":124,"address":[4982632,4982442,4982662],"length":1,"stats":{"Line":5},"fn_name":null},{"line":137,"address":[4993959],"length":1,"stats":{"Line":4},"fn_name":null},{"line":142,"address":[4982672],"length":1,"stats":{"Line":4},"fn_name":"create_asset"},{"line":143,"address":[4846175,4845696],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":144,"address":[4845714],"length":1,"stats":{"Line":4},"fn_name":null},{"line":145,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":146,"address":[4845667,4845664,4845904,4845757],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":147,"address":[4845892,4846037],"length":1,"stats":{"Line":8},"fn_name":null},{"line":148,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[4846030],"length":1,"stats":{"Line":1},"fn_name":null},{"line":152,"address":[4846127],"length":1,"stats":{"Line":1},"fn_name":null},{"line":156,"address":[4982720],"length":1,"stats":{"Line":5},"fn_name":"mint"},{"line":157,"address":[4847714,4846240],"length":1,"stats":{"Line":10},"fn_name":"{{closure}}"},{"line":158,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":159,"address":[4846442,4846211,4846208,4846258],"length":1,"stats":{"Line":5},"fn_name":"{{closure}}"},{"line":160,"address":[4846396],"length":1,"stats":{"Line":6},"fn_name":null},{"line":161,"address":[4846762,4846828,4846595,4846715,4846933],"length":1,"stats":{"Line":15},"fn_name":null},{"line":162,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[4846745,4846656,4846830],"length":1,"stats":{"Line":12},"fn_name":null},{"line":165,"address":[4846954,4846786,4847046,4847237],"length":1,"stats":{"Line":18},"fn_name":null},{"line":166,"address":[4847166,4847085,4847213,4847344,4847062,4847239],"length":1,"stats":{"Line":16},"fn_name":null},{"line":167,"address":[4847073],"length":1,"stats":{"Line":3},"fn_name":null},{"line":168,"address":[4847241,4847196,4847102],"length":1,"stats":{"Line":6},"fn_name":null},{"line":170,"address":[4846991],"length":1,"stats":{"Line":7},"fn_name":null},{"line":173,"address":[4847660,4847361,4847458,4847379,4847555,4847505],"length":1,"stats":{"Line":20},"fn_name":null},{"line":174,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":175,"address":[4847372],"length":1,"stats":{"Line":7},"fn_name":null},{"line":176,"address":[4847395,4847488,4847557],"length":1,"stats":{"Line":14},"fn_name":null},{"line":178,"address":[4847537],"length":1,"stats":{"Line":7},"fn_name":null},{"line":182,"address":[4982816],"length":1,"stats":{"Line":6},"fn_name":"burn"},{"line":183,"address":[4847792,4849398],"length":1,"stats":{"Line":30},"fn_name":"{{closure}}"},{"line":184,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":185,"address":[4847994,4847760,4847810,4847763],"length":1,"stats":{"Line":24},"fn_name":"{{closure}}"},{"line":186,"address":[4847948],"length":1,"stats":{"Line":6},"fn_name":null},{"line":187,"address":[4848485,4848267,4848147,4848314,4848380],"length":1,"stats":{"Line":72},"fn_name":null},{"line":188,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":189,"address":[4848208,4848382,4848297],"length":1,"stats":{"Line":12},"fn_name":null},{"line":191,"address":[4848603,4848772,4848360,4848667,4848556,4848338],"length":1,"stats":{"Line":24},"fn_name":null},{"line":192,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":193,"address":[4848353],"length":1,"stats":{"Line":24},"fn_name":null},{"line":194,"address":[4848497,4848669,4848586],"length":1,"stats":{"Line":48},"fn_name":null},{"line":196,"address":[4848627,4848959,4848848,4848650,4848895,4849064],"length":1,"stats":{"Line":96},"fn_name":null},{"line":197,"address":[4848638],"length":1,"stats":{"Line":6},"fn_name":null},{"line":198,"address":[4848784,4848878,4848961],"length":1,"stats":{"Line":12},"fn_name":null},{"line":200,"address":[4848942,4849187,4849140,4849342,4848924,4849237],"length":1,"stats":{"Line":24},"fn_name":null},{"line":201,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":202,"address":[4848935],"length":1,"stats":{"Line":24},"fn_name":null},{"line":203,"address":[4849239,4849076,4849170],"length":1,"stats":{"Line":48},"fn_name":null},{"line":205,"address":[4849219],"length":1,"stats":{"Line":25},"fn_name":null},{"line":209,"address":[4982912],"length":1,"stats":{"Line":6},"fn_name":"transfer"},{"line":215,"address":[4983059,4982954],"length":1,"stats":{"Line":24},"fn_name":null},{"line":216,"address":[4983225,4983168,4983029],"length":1,"stats":{"Line":32},"fn_name":null},{"line":217,"address":[4983217],"length":1,"stats":{"Line":7},"fn_name":null},{"line":220,"address":[4983376],"length":1,"stats":{"Line":23},"fn_name":"balance"},{"line":221,"address":[4983417],"length":1,"stats":{"Line":23},"fn_name":null},{"line":222,"address":[4849456,4850053],"length":1,"stats":{"Line":11},"fn_name":"{{closure}}"},{"line":223,"address":[4849487,4849666],"length":1,"stats":{"Line":24},"fn_name":null},{"line":224,"address":[4849623],"length":1,"stats":{"Line":6},"fn_name":null},{"line":225,"address":[4849708,4849878],"length":1,"stats":{"Line":24},"fn_name":null},{"line":226,"address":[4849445,4849440,4849954,4849848],"length":1,"stats":{"Line":60},"fn_name":"{{closure}}"},{"line":231,"address":[4983488],"length":1,"stats":{"Line":20},"fn_name":"total_issuance"},{"line":232,"address":[4983514],"length":1,"stats":{"Line":20},"fn_name":null},{"line":233,"address":[4850476,4850112],"length":1,"stats":{"Line":10},"fn_name":"{{closure}}"},{"line":234,"address":[4850135,4850294],"length":1,"stats":{"Line":20},"fn_name":null},{"line":235,"address":[4850254],"length":1,"stats":{"Line":5},"fn_name":null},{"line":236,"address":[4850327,4850096,4850101],"length":1,"stats":{"Line":45},"fn_name":"{{closure}}"},{"line":264,"address":[4983723,4983584],"length":1,"stats":{"Line":30},"fn_name":"new_test_ext"},{"line":265,"address":[4983594],"length":1,"stats":{"Line":31},"fn_name":null}],"covered":74,"coverable":85},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","tests.rs"],"content":"use crate::{mock::*, Error, PoolInfo};\nuse core::convert::From;\nuse frame_support::assert_err_ignore_postinfo;\nuse frame_support::{assert_ok, traits::Currency};\nuse sp_runtime::traits::Saturating;\nuse sp_runtime::Permill;\nuse sp_runtime::{FixedPointNumber, FixedU128};\nuse sp_std::cmp::Ordering;\n\nfn last_event() -\u003e Event {\n    frame_system::pallet::Pallet::\u003cTest\u003e::events()\n        .pop()\n        .expect(\"Event expected\")\n        .event\n}\n\n#[test]\nfn create_pool_successful() {\n    new_test_ext().execute_with(|| {\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n    });\n}\n\n#[test]\nfn create_pool_assets_must_be_nonempty() {\n    new_test_ext().execute_with(|| {\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n\n        assert_err_ignore_postinfo!(\n            CurveAmm::create_pool(\n                Origin::signed(1),\n                vec![],\n                FixedU128::from(1u128),\n                Permill::one(),\n                Permill::one(),\n            ),\n            Error::\u003cTest\u003e::NotEnoughAssets\n        );\n    });\n}\n\n#[test]\nfn create_pool_balance_must_be_more_than_fee() {\n    new_test_ext().execute_with(|| {\n        assert_err_ignore_postinfo!(\n            CurveAmm::create_pool(\n                Origin::signed(1),\n                vec![0, 1],\n                FixedU128::from(1u128),\n                Permill::one(),\n                Permill::one(),\n            ),\n            Error::\u003cTest\u003e::InsufficientFunds\n        );\n    });\n}\n\n#[test]\nfn create_pool_correct_pool_count() {\n    new_test_ext().execute_with(|| {\n        assert_eq!(CurveAmm::pool_count(), 0);\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        assert_eq!(CurveAmm::pool_count(), 1);\n    });\n}\n\n#[test]\nfn create_pool_pool_saved_to_storage() {\n    new_test_ext().execute_with(|| {\n        assert_eq!(CurveAmm::pool_count(), 0);\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        assert_eq!(\n            CurveAmm::pools(0),\n            Some(PoolInfo {\n                pool_asset: 0,\n                assets: vec![0, 1],\n                amplification: FixedU128::from(1u128),\n                fee: Permill::one(),\n                admin_fee: Permill::one(),\n                balances: vec![0u64, 0u64,]\n            })\n        );\n    });\n}\n\n#[test]\nfn create_pool_fee_withdrawn() {\n    new_test_ext().execute_with(|| {\n        let initial_balance = 100000000;\n        let _ = Balances::deposit_creating(\u00261, initial_balance);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        let balance_after_fee = Balances::free_balance(\u00261);\n        assert_eq!(initial_balance - balance_after_fee, 999);\n    });\n}\n\n#[test]\nfn create_pool_on_unbalanced_called() {\n    new_test_ext().execute_with(|| {\n        let initial_balance = 100000000;\n        let _ = Balances::deposit_creating(\u00261, initial_balance);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        let balance_after_fee = Balances::free_balance(\u00261);\n        assert_eq!(initial_balance - balance_after_fee, 999);\n    });\n}\n\n#[test]\nfn get_d_successful() {\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_d(\u0026xp, ann);\n\n    // expected d is 1.9781953712751776\n    // expected precision is 1e-13\n    let delta = result\n        .map(|x| {\n            x.saturating_sub(FixedU128::saturating_from_rational(\n                19781953712751776u128,\n                10_000_000_000_000_000u128,\n            ))\n            .saturating_abs()\n        })\n        .map(|x| {\n            x.cmp(\u0026FixedU128::saturating_from_rational(\n                1u128,\n                10_000_000_000_000u128,\n            ))\n        });\n    assert_eq!(delta, Some(Ordering::Less));\n}\n\n#[test]\nfn get_d_empty() {\n    let xp = vec![];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_d(\u0026xp, ann);\n\n    assert_eq!(result, Some(FixedU128::zero()));\n}\n\n#[test]\nfn get_y_successful() {\n    let i = 0;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    // expected y is 0.8703405416689252\n    // expected precision is 1e-13\n    let delta = result\n        .map(|x| {\n            x.saturating_sub(FixedU128::saturating_from_rational(\n                8703405416689252u128,\n                10_000_000_000_000_000u128,\n            ))\n            .saturating_abs()\n        })\n        .map(|x| {\n            x.cmp(\u0026FixedU128::saturating_from_rational(\n                1,\n                10_000_000_000_000u128,\n            ))\n        });\n    assert_eq!(delta, Some(Ordering::Less));\n}\n\n#[test]\nfn get_y_same_coin() {\n    let i = 1;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\n#[test]\nfn get_y_i_greater_than_n() {\n    let i = 33;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\n#[test]\nfn get_y_j_greater_than_n() {\n    let i = 1;\n    let j = 33;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\nmod curve {\n    use crate::{mock::*, PoolId};\n\n    pub const ALICE_ID: AccountId = 1;\n    pub const BOB_ID: AccountId = 2;\n    pub const CHARLIE_ID: AccountId = 3;\n\n    pub const TEST_POOL_ID: PoolId = 0;\n\n    pub const BALANCE_ONE: Balance = 1_000_000_000;\n\n    mod test_add_liquidity {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::{AccountIdConversion, Saturating};\n        use sp_runtime::{FixedI64, Permill};\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct AddLiquidityTestContext {\n            bob: AccountId,\n            charlie: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_add_liquidity_test() -\u003e AddLiquidityTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let charlie = CHARLIE_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            // mint_bob\n            let _ = Balances::deposit_creating(\u0026bob, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026bob, amount));\n            }\n\n            AddLiquidityTestContext {\n                bob,\n                charlie,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        #[test]\n        fn test_add_liquidity() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    swap,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_add_liquidity_test();\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    initial_amounts.clone(),\n                    0\n                ));\n\n                for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                    assert_eq!(TestAssets::balance(coin, \u0026bob), 0);\n                    assert_eq!(TestAssets::balance(coin, \u0026swap), 2 * amount);\n                }\n\n                assert_eq!(\n                    TestAssets::balance(pool_token, \u0026bob),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount\n                );\n                assert_eq!(\n                    TestAssets::total_issuance(pool_token),\n                    2 * (n_coins as Balance) * BALANCE_ONE * base_amount\n                );\n            });\n        }\n\n        #[test]\n        fn test_add_with_slippage() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let mut amounts = coins.iter().map(|_| FixedI64::one()).collect::\u003cVec\u003c_\u003e\u003e();\n                amounts[0] = amounts[0].saturating_mul(FixedI64::saturating_from_rational(99, 100));\n                amounts[1] =\n                    amounts[1].saturating_mul(FixedI64::saturating_from_rational(101, 100));\n                let amounts = amounts\n                    .iter()\n                    .map(|x| x.into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    amounts,\n                    0\n                ));\n\n                let b = TestAssets::balance(pool_token, \u0026bob) / n_coins as u64;\n\n                assert!(\n                    (FixedI64::saturating_from_rational(999, 1000).into_inner() as Balance) \u003c b\n                        \u0026\u0026 (b \u003c FixedI64::one().into_inner() as Balance)\n                );\n            });\n        }\n\n        macro_rules! add_one_coin_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityTestContext {\n                                bob,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_add_liquidity_test();\n\n                            let idx = $value;\n\n                            let mut amounts = coins.iter().map(|_| 0 as Balance).collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = initial_amounts[idx];\n\n                            assert_ok!(CurveAmm::add_liquidity(\n                                Origin::signed(bob),\n                                pool,\n                                amounts.clone(),\n                                0\n                            ));\n\n                            for (i, \u0026coin) in coins.iter().enumerate() {\n                                assert_eq!(\n                                    TestAssets::balance(coin, \u0026bob),\n                                    initial_amounts[i] - amounts[i]\n                                );\n                                assert_eq!(\n                                    TestAssets::balance(coin, \u0026swap),\n                                    initial_amounts[i] + amounts[i]\n                                );\n                            }\n\n                            let b = TestAssets::balance(pool_token, \u0026bob) / base_amount;\n\n                            assert!(\n                                (FixedI64::saturating_from_rational(999, 1000).into_inner() as Balance) \u003c b\n                                    \u0026\u0026 (b \u003c FixedI64::one().into_inner() as Balance)\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        add_one_coin_tests! {\n            test_add_one_coin_0: 0,\n            test_add_one_coin_1: 1,\n        }\n\n        #[test]\n        fn test_insufficient_balance() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    charlie,\n                    pool,\n                    coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let amounts = coins\n                    .iter()\n                    .map(|_| FixedI64::one().into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(Origin::signed(charlie), pool, amounts, 0),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_min_amount_too_high() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let amounts = coins\n                    .iter()\n                    .map(|_| FixedI64::one().into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                let min_amount = (FixedI64::one().into_inner() as Balance) * n_coins as Balance + 1;\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(Origin::signed(bob), pool, amounts, min_amount),\n                    Error::\u003cTest\u003e::RequiredAmountNotReached\n                );\n            });\n        }\n\n        #[test]\n        fn test_min_amount_with_slippage() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let mut amounts = coins.iter().map(|_| FixedI64::one()).collect::\u003cVec\u003c_\u003e\u003e();\n                amounts[0] = amounts[0].saturating_mul(FixedI64::saturating_from_rational(99, 100));\n                amounts[1] =\n                    amounts[1].saturating_mul(FixedI64::saturating_from_rational(101, 100));\n                let amounts = amounts\n                    .iter()\n                    .map(|x| x.into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(\n                        Origin::signed(bob),\n                        pool,\n                        amounts,\n                        FixedI64::saturating_from_integer(n_coins as i64).into_inner() as Balance\n                    ),\n                    Error::\u003cTest\u003e::RequiredAmountNotReached\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    pool_token,\n                    initial_amounts,\n                    ..\n                } = init_add_liquidity_test();\n\n                System::set_block_number(2);\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    initial_amounts.clone(),\n                    0\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::AddLiquidity(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_amounts, initial_amounts);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token))\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_add_liquidity_initial {\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::{FixedI64, Permill};\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct AddLiquidityInitialTestContext {\n            alice: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_add_liquidity_initial_test() -\u003e AddLiquidityInitialTestContext {\n            let alice = ALICE_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            AddLiquidityInitialTestContext {\n                alice,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! initial_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityInitialTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                initial_amounts,\n                                ..\n                            } = init_add_liquidity_initial_test();\n\n                            let min_amount: Balance = $value;\n\n                            let amounts = coins\n                                .iter()\n                                .map(|_| FixedI64::one().into_inner() as Balance)\n                                .collect::\u003cVec\u003c_\u003e\u003e();\n\n                            assert_ok!(\n                                CurveAmm::add_liquidity(Origin::signed(alice), pool, amounts.clone(), min_amount)\n                            );\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), initial - amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), amount);\n                            }\n\n                            assert_eq!(\n                                TestAssets::balance(pool_token, \u0026alice),\n                                (n_coins as Balance) * BALANCE_ONE\n                            );\n                            assert_eq!(\n                                TestAssets::total_issuance(pool_token),\n                                (n_coins as Balance) * BALANCE_ONE\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        initial_tests! {\n            test_initial_0: 0,\n            test_initial_2: 2 * BALANCE_ONE,\n        }\n\n        macro_rules! initial_liquidity_missing_coin_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityInitialTestContext {\n                                alice,\n                                pool,\n                                coins,\n                                ..\n                            } = init_add_liquidity_initial_test();\n\n                            let idx = $value;\n\n                            let mut amounts = coins\n                                .iter()\n                                .map(|_| FixedI64::one().into_inner() as Balance)\n                                .collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = 0;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::add_liquidity(Origin::signed(alice), pool, amounts, 0),\n                                Error::\u003cTest\u003e::WrongAssetAmount\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        initial_liquidity_missing_coin_tests! {\n            test_initial_liquidity_missing_coin_0: 0,\n            test_initial_liquidity_missing_coin_1: 1,\n        }\n    }\n\n    mod test_remove_liquidity {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_test() -\u003e RemoveLiquidityTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! remove_liquidity_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_test();\n\n                            let min_amount = $value;\n\n                            assert_ok!(CurveAmm::remove_liquidity(\n                                Origin::signed(alice),\n                                pool,\n                                (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                initial_amounts.iter().map(|i| i * min_amount).collect()\n                            ));\n\n                            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), 0);\n                            }\n\n                            assert_eq!(\n                                TestAssets::balance(pool_token, \u0026alice),\n                                0\n                            );\n                            assert_eq!(\n                                TestAssets::total_issuance(pool_token),\n                                0\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_liquidity_tests! {\n            test_remove_liquidity_0: 0,\n            test_remove_liquidity_1: 1,\n        }\n\n        #[test]\n        fn test_remove_partial() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    swap,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_remove_liquidity_test();\n\n                let withdraw_amount = initial_amounts.iter().sum::\u003cBalance\u003e() / 2;\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(alice),\n                    pool,\n                    withdraw_amount,\n                    vec![0; n_coins]\n                ));\n\n                for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                    let pool_balance = TestAssets::balance(coin, \u0026swap);\n                    let alice_balance = TestAssets::balance(coin, \u0026alice);\n                    assert_eq!(alice_balance + pool_balance, amount);\n                }\n\n                assert_eq!(\n                    TestAssets::balance(pool_token, \u0026alice),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount - withdraw_amount\n                );\n                assert_eq!(\n                    TestAssets::total_issuance(pool_token),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount - withdraw_amount\n                );\n            });\n        }\n\n        macro_rules! below_min_amount_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityTestContext {\n                                alice,\n                                pool,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_test();\n\n                            let idx = $value;\n\n                            let mut min_amount = initial_amounts.clone();\n                            min_amount[idx] = min_amount[idx] + 1;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::remove_liquidity(\n                                    Origin::signed(alice),\n                                    pool,\n                                    (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                    min_amount,\n                                ),\n                                Error::\u003cTest\u003e::RequiredAmountNotReached\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        below_min_amount_tests! {\n            test_below_min_amount_0: 0,\n            test_below_min_amount_1: 1,\n        }\n\n        #[test]\n        fn test_amount_exceeds_balance() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    pool,\n                    n_coins,\n                    base_amount,\n                    ..\n                } = init_remove_liquidity_test();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity(\n                        Origin::signed(alice),\n                        pool,\n                        (n_coins as Balance) * BALANCE_ONE * base_amount + 1,\n                        vec![0; n_coins],\n                    ),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_test();\n\n                let _ = TestAssets::transfer(pool_token, \u0026alice, \u0026bob, BALANCE_ONE);\n\n                System::set_block_number(2);\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    BALANCE_ONE,\n                    vec![0; n_coins],\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::RemoveLiquidity(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token));\n\n                    for (\u0026coin, \u0026amount) in coins.iter().zip(token_amounts.iter()) {\n                        assert_eq!(TestAssets::balance(coin, \u0026bob), amount);\n                    }\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_remove_liquidity_imbalance {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityImbalanceTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_imbalance_test() -\u003e RemoveLiquidityImbalanceTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityImbalanceTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! remove_balanced_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let divisor = $value;\n\n                            let amounts = initial_amounts.iter().map(|i| i / divisor).collect::\u003cVec\u003c_\u003e\u003e();\n                            let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount / divisor;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                Origin::signed(alice),\n                                pool,\n                                amounts.clone(),\n                                max_burn + 1,\n                            ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            assert!(\n                                i128::abs(TestAssets::balance(pool_token, \u0026alice) as i128 - ((n_coins as Balance) * BALANCE_ONE * base_amount - max_burn) as i128) \u003c= 1\n                            );\n                            assert!(\n                                i128::abs(TestAssets::total_issuance(pool_token) as i128 - ((n_coins as Balance) * BALANCE_ONE * base_amount - max_burn) as i128) \u003c= 1\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_balanced_tests! {\n            test_remove_balanced_2: 2,\n            test_remove_balanced_5: 5,\n            test_remove_balanced_10: 10,\n        }\n\n        macro_rules! remove_some_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let idx = $value;\n\n                            let mut amounts = initial_amounts.iter().map(|i| i / 2).collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = 0;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                            Origin::signed(alice),\n                                            pool,\n                                            amounts.clone(),\n                                            (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                        ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            let actual_balance = TestAssets::balance(pool_token, \u0026alice);\n                            let actual_total_supply = TestAssets::total_issuance(pool_token);\n                            let ideal_balance = BALANCE_ONE * base_amount * (n_coins as Balance) - BALANCE_ONE * base_amount / 2 * ((n_coins as Balance) - 1);\n\n                            assert_eq!(actual_balance, actual_total_supply);\n                            assert!(ideal_balance * 99 / 100 \u003c actual_balance);\n                            assert!(actual_balance \u003c ideal_balance);\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_some_tests! {\n            test_remove_some_0: 0,\n            test_remove_some_1: 1,\n        }\n\n        macro_rules! remove_one_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let idx = $value;\n\n                            let mut amounts = vec![0; n_coins];\n                            amounts[idx] = initial_amounts[idx] / 2;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                            Origin::signed(alice),\n                                            pool,\n                                            amounts.clone(),\n                                            (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                        ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            let actual_balance = TestAssets::balance(pool_token, \u0026alice);\n                            let actual_total_supply = TestAssets::total_issuance(pool_token);\n                            let ideal_balance = BALANCE_ONE * base_amount * (n_coins as Balance) - BALANCE_ONE * base_amount / 2;\n\n                            assert_eq!(actual_balance, actual_total_supply);\n                            assert!(ideal_balance * 99 / 100 \u003c actual_balance);\n                            assert!(actual_balance \u003c ideal_balance);\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_one_tests! {\n            test_remove_one_0: 0,\n            test_remove_one_1: 1,\n        }\n\n        macro_rules! exceed_max_burn_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                pool,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let divisor = $value;\n\n                            let amounts = initial_amounts.iter().map(|i| i / divisor).collect::\u003cVec\u003c_\u003e\u003e();\n                            let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount / divisor;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::remove_liquidity_imbalance(\n                                    Origin::signed(alice),\n                                    pool,\n                                    amounts.clone(),\n                                    max_burn - 1,\n                                ),\n                                Error::\u003cTest\u003e::RequiredAmountNotReached\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        exceed_max_burn_tests! {\n            test_exceed_max_burn_1: 1,\n            test_exceed_max_burn_2: 2,\n            test_exceed_max_burn_10: 10,\n        }\n\n        #[test]\n        fn test_cannot_remove_zero() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    pool,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity_imbalance(\n                        Origin::signed(alice),\n                        pool,\n                        vec![0; n_coins],\n                        0,\n                    ),\n                    Error::\u003cTest\u003e::WrongAssetAmount\n                );\n            });\n        }\n\n        #[test]\n        fn test_no_total_supply() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    pool,\n                    pool_token,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(alice),\n                    pool,\n                    TestAssets::total_issuance(pool_token),\n                    vec![0; n_coins],\n                ));\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity_imbalance(\n                        Origin::signed(alice),\n                        pool,\n                        vec![0; n_coins],\n                        0,\n                    ),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                let _ = TestAssets::transfer(\n                    pool_token,\n                    \u0026alice,\n                    \u0026bob,\n                    TestAssets::balance(pool_token, \u0026alice),\n                );\n\n                System::set_block_number(2);\n\n                let amounts = initial_amounts.iter().map(|i| i / 5).collect::\u003cVec\u003c_\u003e\u003e();\n                let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount;\n\n                assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                    Origin::signed(bob),\n                    pool,\n                    amounts,\n                    max_burn,\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::RemoveLiquidityImbalance(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token));\n\n                    for (\u0026coin, \u0026amount) in coins.iter().zip(token_amounts.iter()) {\n                        assert_eq!(TestAssets::balance(coin, \u0026bob), amount);\n                    }\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_remove_liquidity_one_coin {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId, PoolTokenIndex};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityOneCoinTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_one_coin_test() -\u003e RemoveLiquidityOneCoinTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityOneCoinTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! amount_received_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityOneCoinTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_one_coin_test();\n\n                            let idx: usize = $value;\n\n                            let rate_mod = (100_001, 100_000);\n\n                            assert_ok!(CurveAmm::remove_liquidity_one_coin(\n                                            Origin::signed(alice),\n                                            pool,\n                                            BALANCE_ONE, idx as PoolTokenIndex, 0,\n                                        ));\n\n                            let balance = TestAssets::balance(coins[idx], \u0026alice);\n\n                            assert!(BALANCE_ONE * rate_mod.1 / rate_mod.0 \u003c= balance);\n                            assert!(balance \u003c= BALANCE_ONE);\n                        });\n                    }\n                )*\n            }\n        }\n\n        amount_received_tests! {\n            test_amount_received_0: 0,\n            test_amount_received_1: 1,\n        }\n    }\n}\n","traces":[{"line":10,"address":[4246992,4247184],"length":1,"stats":{"Line":1},"fn_name":"last_event"},{"line":11,"address":[4247002],"length":1,"stats":{"Line":1},"fn_name":null},{"line":18,"address":[4247289,4247232],"length":1,"stats":{"Line":3},"fn_name":"create_pool_successful"},{"line":19,"address":[4247239],"length":1,"stats":{"Line":2},"fn_name":null},{"line":20,"address":[4657246],"length":1,"stats":{"Line":1},"fn_name":null},{"line":21,"address":[4657437,4657524],"length":1,"stats":{"Line":2},"fn_name":null},{"line":22,"address":[4657290],"length":1,"stats":{"Line":1},"fn_name":null},{"line":23,"address":[4657326],"length":1,"stats":{"Line":1},"fn_name":null},{"line":24,"address":[4657377],"length":1,"stats":{"Line":1},"fn_name":null},{"line":25,"address":[4657407],"length":1,"stats":{"Line":1},"fn_name":null},{"line":26,"address":[4657422],"length":1,"stats":{"Line":1},"fn_name":null},{"line":32,"address":[4247385,4247328],"length":1,"stats":{"Line":3},"fn_name":"create_pool_assets_must_be_nonempty"},{"line":33,"address":[4247335],"length":1,"stats":{"Line":2},"fn_name":null},{"line":34,"address":[4657934],"length":1,"stats":{"Line":1},"fn_name":null},{"line":36,"address":[4658181,4658231,4658527],"length":1,"stats":{"Line":2},"fn_name":null},{"line":37,"address":[4658091],"length":1,"stats":{"Line":1},"fn_name":null},{"line":38,"address":[4657978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[4658004],"length":1,"stats":{"Line":1},"fn_name":null},{"line":40,"address":[4658023],"length":1,"stats":{"Line":1},"fn_name":null},{"line":41,"address":[4658061],"length":1,"stats":{"Line":1},"fn_name":null},{"line":42,"address":[4658076],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[4658223],"length":1,"stats":{"Line":1},"fn_name":null},{"line":50,"address":[4247424,4247481],"length":1,"stats":{"Line":3},"fn_name":"create_pool_balance_must_be_more_than_fee"},{"line":51,"address":[4247431],"length":1,"stats":{"Line":2},"fn_name":null},{"line":52,"address":[4659171,4659464,4659124,4658871],"length":1,"stats":{"Line":3},"fn_name":null},{"line":53,"address":[4659034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[4658887],"length":1,"stats":{"Line":1},"fn_name":null},{"line":55,"address":[4658923],"length":1,"stats":{"Line":1},"fn_name":null},{"line":56,"address":[4658974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":57,"address":[4659004],"length":1,"stats":{"Line":1},"fn_name":null},{"line":58,"address":[4659019],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[4659163],"length":1,"stats":{"Line":1},"fn_name":null},{"line":66,"address":[4247577,4247520],"length":1,"stats":{"Line":3},"fn_name":"create_pool_correct_pool_count"},{"line":67,"address":[4247527],"length":1,"stats":{"Line":2},"fn_name":null},{"line":68,"address":[4659767,4660083],"length":1,"stats":{"Line":1},"fn_name":null},{"line":69,"address":[4660042,4660240],"length":1,"stats":{"Line":2},"fn_name":null},{"line":70,"address":[4660400,4660490],"length":1,"stats":{"Line":2},"fn_name":null},{"line":71,"address":[4660253],"length":1,"stats":{"Line":1},"fn_name":null},{"line":72,"address":[4660289],"length":1,"stats":{"Line":1},"fn_name":null},{"line":73,"address":[4660340],"length":1,"stats":{"Line":1},"fn_name":null},{"line":74,"address":[4660370],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[4660385],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[4660697,4660945],"length":1,"stats":{"Line":1},"fn_name":null},{"line":82,"address":[4247673,4247616],"length":1,"stats":{"Line":3},"fn_name":"create_pool_pool_saved_to_storage"},{"line":83,"address":[4247623],"length":1,"stats":{"Line":2},"fn_name":null},{"line":84,"address":[4661555,4661239],"length":1,"stats":{"Line":1},"fn_name":null},{"line":85,"address":[4661712,4661514],"length":1,"stats":{"Line":2},"fn_name":null},{"line":86,"address":[4661986,4661884],"length":1,"stats":{"Line":2},"fn_name":null},{"line":87,"address":[4661725],"length":1,"stats":{"Line":1},"fn_name":null},{"line":88,"address":[4661761],"length":1,"stats":{"Line":1},"fn_name":null},{"line":89,"address":[4661812],"length":1,"stats":{"Line":1},"fn_name":null},{"line":90,"address":[4661848],"length":1,"stats":{"Line":1},"fn_name":null},{"line":91,"address":[4661866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":93,"address":[4662610,4663050,4663079],"length":1,"stats":{"Line":1},"fn_name":null},{"line":94,"address":[4662219],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[4662398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":97,"address":[4662242],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[4662285],"length":1,"stats":{"Line":1},"fn_name":null},{"line":99,"address":[4662315],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[4662330],"length":1,"stats":{"Line":1},"fn_name":null},{"line":101,"address":[4662355],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[4247712,4247769],"length":1,"stats":{"Line":3},"fn_name":"create_pool_fee_withdrawn"},{"line":109,"address":[4247719],"length":1,"stats":{"Line":2},"fn_name":null},{"line":110,"address":[4663310],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[4663338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":112,"address":[4663525,4663621],"length":1,"stats":{"Line":2},"fn_name":null},{"line":113,"address":[4663372],"length":1,"stats":{"Line":1},"fn_name":null},{"line":114,"address":[4663408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[4663459],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[4663495],"length":1,"stats":{"Line":1},"fn_name":null},{"line":117,"address":[4663510],"length":1,"stats":{"Line":1},"fn_name":null},{"line":119,"address":[4663835],"length":1,"stats":{"Line":1},"fn_name":null},{"line":120,"address":[4663856,4664137,4664380,4664410],"length":1,"stats":{"Line":1},"fn_name":null},{"line":125,"address":[4247808,4247865],"length":1,"stats":{"Line":3},"fn_name":"create_pool_on_unbalanced_called"},{"line":126,"address":[4247815],"length":1,"stats":{"Line":2},"fn_name":null},{"line":127,"address":[4664462],"length":1,"stats":{"Line":1},"fn_name":null},{"line":128,"address":[4664490],"length":1,"stats":{"Line":1},"fn_name":null},{"line":129,"address":[4664773,4664677],"length":1,"stats":{"Line":2},"fn_name":null},{"line":130,"address":[4664524],"length":1,"stats":{"Line":1},"fn_name":null},{"line":131,"address":[4664560],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[4664611],"length":1,"stats":{"Line":1},"fn_name":null},{"line":133,"address":[4664647],"length":1,"stats":{"Line":1},"fn_name":null},{"line":134,"address":[4664662],"length":1,"stats":{"Line":1},"fn_name":null},{"line":136,"address":[4664987],"length":1,"stats":{"Line":1},"fn_name":null},{"line":137,"address":[4665532,4665289,4665008,4665562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":142,"address":[4248980,4247904],"length":1,"stats":{"Line":3},"fn_name":"get_d_successful"},{"line":143,"address":[4248000,4247921,4248995],"length":1,"stats":{"Line":2},"fn_name":null},{"line":144,"address":[4247944],"length":1,"stats":{"Line":1},"fn_name":null},{"line":145,"address":[4247977],"length":1,"stats":{"Line":1},"fn_name":null},{"line":147,"address":[4248094],"length":1,"stats":{"Line":1},"fn_name":null},{"line":148,"address":[4248157],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[4248321],"length":1,"stats":{"Line":1},"fn_name":null},{"line":154,"address":[4248455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":155,"address":[4665600],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":156,"address":[4665643],"length":1,"stats":{"Line":1},"fn_name":null},{"line":162,"address":[4665760],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":163,"address":[4665793],"length":1,"stats":{"Line":1},"fn_name":null},{"line":168,"address":[4248803,4248528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":172,"address":[4249056,4249931],"length":1,"stats":{"Line":3},"fn_name":"get_d_empty"},{"line":173,"address":[4249063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":174,"address":[4249086],"length":1,"stats":{"Line":1},"fn_name":null},{"line":175,"address":[4249149],"length":1,"stats":{"Line":1},"fn_name":null},{"line":177,"address":[4249313],"length":1,"stats":{"Line":1},"fn_name":null},{"line":179,"address":[4249429,4249754],"length":1,"stats":{"Line":1},"fn_name":null},{"line":183,"address":[4251170,4249968],"length":1,"stats":{"Line":3},"fn_name":"get_y_successful"},{"line":184,"address":[4249975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":185,"address":[4249987],"length":1,"stats":{"Line":1},"fn_name":null},{"line":186,"address":[4250009],"length":1,"stats":{"Line":1},"fn_name":null},{"line":187,"address":[4250062,4250141,4251185],"length":1,"stats":{"Line":2},"fn_name":null},{"line":188,"address":[4250085],"length":1,"stats":{"Line":1},"fn_name":null},{"line":189,"address":[4250118],"length":1,"stats":{"Line":1},"fn_name":null},{"line":191,"address":[4250235],"length":1,"stats":{"Line":1},"fn_name":null},{"line":192,"address":[4250298],"length":1,"stats":{"Line":1},"fn_name":null},{"line":194,"address":[4250462],"length":1,"stats":{"Line":1},"fn_name":null},{"line":198,"address":[4250631],"length":1,"stats":{"Line":1},"fn_name":null},{"line":199,"address":[4665904],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":200,"address":[4665947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":206,"address":[4666064],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":207,"address":[4666097],"length":1,"stats":{"Line":1},"fn_name":null},{"line":212,"address":[4250716,4250991],"length":1,"stats":{"Line":1},"fn_name":null},{"line":216,"address":[4251248,4252347],"length":1,"stats":{"Line":3},"fn_name":"get_y_same_coin"},{"line":217,"address":[4251255],"length":1,"stats":{"Line":1},"fn_name":null},{"line":218,"address":[4251267],"length":1,"stats":{"Line":1},"fn_name":null},{"line":219,"address":[4251289],"length":1,"stats":{"Line":1},"fn_name":null},{"line":220,"address":[4251421,4251342,4252362],"length":1,"stats":{"Line":2},"fn_name":null},{"line":221,"address":[4251365],"length":1,"stats":{"Line":1},"fn_name":null},{"line":222,"address":[4251398],"length":1,"stats":{"Line":1},"fn_name":null},{"line":224,"address":[4251515],"length":1,"stats":{"Line":1},"fn_name":null},{"line":225,"address":[4251578],"length":1,"stats":{"Line":1},"fn_name":null},{"line":227,"address":[4251742],"length":1,"stats":{"Line":1},"fn_name":null},{"line":229,"address":[4252168,4251903],"length":1,"stats":{"Line":1},"fn_name":null},{"line":233,"address":[4253514,4252416],"length":1,"stats":{"Line":3},"fn_name":"get_y_i_greater_than_n"},{"line":234,"address":[4252423],"length":1,"stats":{"Line":1},"fn_name":null},{"line":235,"address":[4252435],"length":1,"stats":{"Line":1},"fn_name":null},{"line":236,"address":[4252457],"length":1,"stats":{"Line":1},"fn_name":null},{"line":237,"address":[4252589,4252510,4253529],"length":1,"stats":{"Line":2},"fn_name":null},{"line":238,"address":[4252533],"length":1,"stats":{"Line":1},"fn_name":null},{"line":239,"address":[4252566],"length":1,"stats":{"Line":1},"fn_name":null},{"line":241,"address":[4252683],"length":1,"stats":{"Line":1},"fn_name":null},{"line":242,"address":[4252746],"length":1,"stats":{"Line":1},"fn_name":null},{"line":244,"address":[4252910],"length":1,"stats":{"Line":1},"fn_name":null},{"line":246,"address":[4253070,4253335],"length":1,"stats":{"Line":1},"fn_name":null},{"line":250,"address":[4254682,4253584],"length":1,"stats":{"Line":3},"fn_name":"get_y_j_greater_than_n"},{"line":251,"address":[4253591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":252,"address":[4253603],"length":1,"stats":{"Line":1},"fn_name":null},{"line":253,"address":[4253625],"length":1,"stats":{"Line":1},"fn_name":null},{"line":254,"address":[4253678,4253757,4254697],"length":1,"stats":{"Line":2},"fn_name":null},{"line":255,"address":[4253701],"length":1,"stats":{"Line":1},"fn_name":null},{"line":256,"address":[4253734],"length":1,"stats":{"Line":1},"fn_name":null},{"line":258,"address":[4253851],"length":1,"stats":{"Line":1},"fn_name":null},{"line":259,"address":[4253914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":261,"address":[4254078],"length":1,"stats":{"Line":1},"fn_name":null},{"line":263,"address":[4254238,4254503],"length":1,"stats":{"Line":1},"fn_name":null},{"line":300,"address":[5063827,5059920],"length":1,"stats":{"Line":1},"fn_name":"init_add_liquidity_test"},{"line":301,"address":[5059930],"length":1,"stats":{"Line":1},"fn_name":null},{"line":302,"address":[5059966],"length":1,"stats":{"Line":1},"fn_name":null},{"line":303,"address":[5059978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":304,"address":[5060006],"length":1,"stats":{"Line":2},"fn_name":null},{"line":306,"address":[5060064],"length":1,"stats":{"Line":2},"fn_name":null},{"line":308,"address":[5060075],"length":1,"stats":{"Line":2},"fn_name":null},{"line":310,"address":[5060087],"length":1,"stats":{"Line":2},"fn_name":null},{"line":313,"address":[5060099],"length":1,"stats":{"Line":3},"fn_name":null},{"line":314,"address":[5060143],"length":1,"stats":{"Line":3},"fn_name":null},{"line":316,"address":[5060194,5060542],"length":1,"stats":{"Line":3},"fn_name":null},{"line":317,"address":[5060431,5060714,5060919],"length":1,"stats":{"Line":3},"fn_name":null},{"line":319,"address":[5060837],"length":1,"stats":{"Line":4},"fn_name":null},{"line":320,"address":[5061076],"length":1,"stats":{"Line":4},"fn_name":null},{"line":322,"address":[5061127,5061209],"length":1,"stats":{"Line":9},"fn_name":null},{"line":324,"address":[4569774,4569760],"length":1,"stats":{"Line":14},"fn_name":"{{closure}}"},{"line":328,"address":[5061284],"length":1,"stats":{"Line":5},"fn_name":null},{"line":330,"address":[5061732,5061338,5062060],"length":1,"stats":{"Line":12},"fn_name":null},{"line":331,"address":[5061820],"length":1,"stats":{"Line":6},"fn_name":null},{"line":335,"address":[5062312,5062210],"length":1,"stats":{"Line":16},"fn_name":null},{"line":336,"address":[5061706,5062065],"length":1,"stats":{"Line":13},"fn_name":null},{"line":337,"address":[5062083],"length":1,"stats":{"Line":7},"fn_name":null},{"line":338,"address":[5062142],"length":1,"stats":{"Line":7},"fn_name":null},{"line":339,"address":[5062174],"length":1,"stats":{"Line":7},"fn_name":null},{"line":340,"address":[5062192],"length":1,"stats":{"Line":8},"fn_name":null},{"line":343,"address":[5062521],"length":1,"stats":{"Line":8},"fn_name":null},{"line":346,"address":[5062587,5062641],"length":1,"stats":{"Line":16},"fn_name":null},{"line":347,"address":[5062533],"length":1,"stats":{"Line":8},"fn_name":null},{"line":349,"address":[5062580],"length":1,"stats":{"Line":8},"fn_name":null},{"line":354,"address":[5062863],"length":1,"stats":{"Line":8},"fn_name":null},{"line":356,"address":[5063484,5062917,5063794],"length":1,"stats":{"Line":16},"fn_name":null},{"line":357,"address":[5063572],"length":1,"stats":{"Line":8},"fn_name":null},{"line":374,"address":[4569864,4569856],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":375,"address":[4573264,4569888],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":377,"address":[4569916],"length":1,"stats":{"Line":1},"fn_name":null},{"line":378,"address":[4569932],"length":1,"stats":{"Line":1},"fn_name":null},{"line":379,"address":[4569948],"length":1,"stats":{"Line":1},"fn_name":null},{"line":380,"address":[4569962],"length":1,"stats":{"Line":1},"fn_name":null},{"line":381,"address":[4569978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":382,"address":[4570010],"length":1,"stats":{"Line":1},"fn_name":null},{"line":383,"address":[4570026],"length":1,"stats":{"Line":1},"fn_name":null},{"line":384,"address":[4570042],"length":1,"stats":{"Line":1},"fn_name":null},{"line":386,"address":[4569895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":388,"address":[4570240,4570181],"length":1,"stats":{"Line":2},"fn_name":null},{"line":389,"address":[4570074],"length":1,"stats":{"Line":1},"fn_name":null},{"line":391,"address":[4570174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":395,"address":[4571832,4570859,4570457],"length":1,"stats":{"Line":2},"fn_name":null},{"line":396,"address":[4570939,4571304],"length":1,"stats":{"Line":1},"fn_name":null},{"line":397,"address":[4571270,4571853,4571504,4573342],"length":1,"stats":{"Line":2},"fn_name":null},{"line":400,"address":[4572464,4572156],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[4570841,4572053],"length":1,"stats":{"Line":2},"fn_name":null},{"line":402,"address":[4572069,4573372],"length":1,"stats":{"Line":1},"fn_name":null},{"line":404,"address":[4573052,4572781],"length":1,"stats":{"Line":1},"fn_name":null},{"line":405,"address":[4572430,4572658],"length":1,"stats":{"Line":2},"fn_name":null},{"line":406,"address":[4572674,4573432],"length":1,"stats":{"Line":1},"fn_name":null},{"line":412,"address":[4573560,4573552],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":413,"address":[4573680,4575081],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":415,"address":[4573708],"length":1,"stats":{"Line":1},"fn_name":null},{"line":416,"address":[4573724],"length":1,"stats":{"Line":1},"fn_name":null},{"line":417,"address":[4573738],"length":1,"stats":{"Line":1},"fn_name":null},{"line":418,"address":[4573754],"length":1,"stats":{"Line":1},"fn_name":null},{"line":419,"address":[4573786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":421,"address":[4573687,4573802],"length":1,"stats":{"Line":2},"fn_name":null},{"line":423,"address":[4573584,4573855,4575104,4573598],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":424,"address":[4573992],"length":1,"stats":{"Line":1},"fn_name":null},{"line":425,"address":[4574276],"length":1,"stats":{"Line":1},"fn_name":null},{"line":426,"address":[4574160],"length":1,"stats":{"Line":1},"fn_name":null},{"line":427,"address":[4574338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":429,"address":[4573632,4573646],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":430,"address":[4574434],"length":1,"stats":{"Line":1},"fn_name":null},{"line":432,"address":[4574541],"length":1,"stats":{"Line":1},"fn_name":null},{"line":433,"address":[4574442],"length":1,"stats":{"Line":1},"fn_name":null},{"line":435,"address":[4574465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":439,"address":[4574755,4575214,4575244],"length":1,"stats":{"Line":1},"fn_name":null},{"line":441,"address":[4574885,4574976],"length":1,"stats":{"Line":1},"fn_name":null},{"line":442,"address":[4574900,4574972,4574837],"length":1,"stats":{"Line":3},"fn_name":null},{"line":443,"address":[4574869,4574938],"length":1,"stats":{"Line":2},"fn_name":null},{"line":452,"address":[4578304,4575256,4578312,4575248],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":453,"address":[4578352,4578088,4581148,4575296],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":455,"address":[4575324,4578380],"length":1,"stats":{"Line":2},"fn_name":null},{"line":456,"address":[4575340,4578396],"length":1,"stats":{"Line":2},"fn_name":null},{"line":457,"address":[4578412,4575356],"length":1,"stats":{"Line":2},"fn_name":null},{"line":458,"address":[4578426,4575370],"length":1,"stats":{"Line":2},"fn_name":null},{"line":459,"address":[4575386,4578442],"length":1,"stats":{"Line":2},"fn_name":null},{"line":460,"address":[4575418,4578474],"length":1,"stats":{"Line":2},"fn_name":null},{"line":461,"address":[4575434,4578490],"length":1,"stats":{"Line":2},"fn_name":null},{"line":463,"address":[4578359,4575303],"length":1,"stats":{"Line":2},"fn_name":null},{"line":467,"address":[4575292,4575509,4575293,4578348,4575280,4578336,4578349,4578565],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":468,"address":[4578701,4575645],"length":1,"stats":{"Line":2},"fn_name":null},{"line":470,"address":[4575803,4575862,4578922,4578863],"length":1,"stats":{"Line":4},"fn_name":null},{"line":471,"address":[4578809,4575749],"length":1,"stats":{"Line":2},"fn_name":null},{"line":473,"address":[4578856,4575796],"length":1,"stats":{"Line":2},"fn_name":null},{"line":477,"address":[4577561,4580621,4579139,4576371,4576079,4579431],"length":1,"stats":{"Line":4},"fn_name":null},{"line":478,"address":[4580024,4579708,4576648,4576964],"length":1,"stats":{"Line":2},"fn_name":null},{"line":479,"address":[4579508,4576448],"length":1,"stats":{"Line":2},"fn_name":null},{"line":480,"address":[4579558,4576498,4578183,4581243],"length":1,"stats":{"Line":2},"fn_name":null},{"line":482,"address":[4577576,4577322,4580382,4580636],"length":1,"stats":{"Line":2},"fn_name":null},{"line":483,"address":[4577164,4580224,4576930,4579990],"length":1,"stats":{"Line":4},"fn_name":null},{"line":484,"address":[4580232,4578213,4581273,4577172],"length":1,"stats":{"Line":2},"fn_name":null},{"line":488,"address":[4581303,4578243,4580809,4577749,4576353,4579413],"length":1,"stats":{"Line":4},"fn_name":null},{"line":490,"address":[4580922,4577953,4581013,4577862],"length":1,"stats":{"Line":2},"fn_name":null},{"line":491,"address":[4577877,4577949,4580874,4580937,4577814,4581009],"length":1,"stats":{"Line":6},"fn_name":null},{"line":492,"address":[4577846,4577915,4580975,4580906],"length":1,"stats":{"Line":4},"fn_name":null},{"line":501,"address":[4575466],"length":1,"stats":{"Line":1},"fn_name":null},{"line":502,"address":[4578522],"length":1,"stats":{"Line":1},"fn_name":null},{"line":506,"address":[4581360,4581368],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":507,"address":[4581504,4582436],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":509,"address":[4581532],"length":1,"stats":{"Line":1},"fn_name":null},{"line":510,"address":[4581548],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[4581562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":513,"address":[4581511,4581594],"length":1,"stats":{"Line":2},"fn_name":null},{"line":515,"address":[4581639,4582459],"length":1,"stats":{"Line":2},"fn_name":null},{"line":517,"address":[4581392,4581406],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":518,"address":[4581752],"length":1,"stats":{"Line":1},"fn_name":null},{"line":520,"address":[4581882,4581920,4582253],"length":1,"stats":{"Line":2},"fn_name":null},{"line":521,"address":[4581776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":522,"address":[4581912],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[4582560,4582568],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":529,"address":[4583789,4582704],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":531,"address":[4582732],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[4582748],"length":1,"stats":{"Line":1},"fn_name":null},{"line":533,"address":[4582762],"length":1,"stats":{"Line":1},"fn_name":null},{"line":534,"address":[4582794],"length":1,"stats":{"Line":1},"fn_name":null},{"line":536,"address":[4582711,4582810],"length":1,"stats":{"Line":2},"fn_name":null},{"line":538,"address":[4583812,4582863],"length":1,"stats":{"Line":2},"fn_name":null},{"line":540,"address":[4582606,4582592],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":541,"address":[4582994],"length":1,"stats":{"Line":1},"fn_name":null},{"line":543,"address":[4583900,4583002],"length":1,"stats":{"Line":1},"fn_name":null},{"line":545,"address":[4583275,4583237,4583608],"length":1,"stats":{"Line":2},"fn_name":null},{"line":546,"address":[4583131],"length":1,"stats":{"Line":1},"fn_name":null},{"line":547,"address":[4583267],"length":1,"stats":{"Line":1},"fn_name":null},{"line":553,"address":[4583968,4583976],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":554,"address":[4584144,4585732],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":556,"address":[4584188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":557,"address":[4584204],"length":1,"stats":{"Line":1},"fn_name":null},{"line":558,"address":[4584218],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[4584250],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[4584151,4584266],"length":1,"stats":{"Line":2},"fn_name":null},{"line":563,"address":[4585755,4584000,4584014,4584319],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":564,"address":[4584456],"length":1,"stats":{"Line":1},"fn_name":null},{"line":565,"address":[4584740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":566,"address":[4584624],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[4584802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":569,"address":[4584062,4584048],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":570,"address":[4584916],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[4585509,4585139,4585177],"length":1,"stats":{"Line":2},"fn_name":null},{"line":573,"address":[4585048],"length":1,"stats":{"Line":1},"fn_name":null},{"line":574,"address":[4584940],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[4584955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":577,"address":[4585003],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[4585169],"length":1,"stats":{"Line":1},"fn_name":null},{"line":585,"address":[4585952,4585960],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":586,"address":[4585984,4588115],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":588,"address":[4586020],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[4586036],"length":1,"stats":{"Line":1},"fn_name":null},{"line":590,"address":[4586050],"length":1,"stats":{"Line":1},"fn_name":null},{"line":591,"address":[4586066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[4586098,4585991],"length":1,"stats":{"Line":2},"fn_name":null},{"line":595,"address":[4588135],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[4586248,4586189],"length":1,"stats":{"Line":2},"fn_name":null},{"line":598,"address":[4586135],"length":1,"stats":{"Line":1},"fn_name":null},{"line":600,"address":[4586182],"length":1,"stats":{"Line":1},"fn_name":null},{"line":604,"address":[4586472,4586524],"length":1,"stats":{"Line":2},"fn_name":null},{"line":605,"address":[4586539],"length":1,"stats":{"Line":1},"fn_name":null},{"line":607,"address":[4586555],"length":1,"stats":{"Line":1},"fn_name":null},{"line":610,"address":[4586611],"length":1,"stats":{"Line":1},"fn_name":null},{"line":611,"address":[4586465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":613,"address":[4586627,4587012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":614,"address":[4587420,4587211,4586901],"length":1,"stats":{"Line":2},"fn_name":null},{"line":615,"address":[4587386,4587592,4587871],"length":1,"stats":{"Line":2},"fn_name":null},{"line":617,"address":[4586491],"length":1,"stats":{"Line":0},"fn_name":null},{"line":643,"address":[5470416,5473177],"length":1,"stats":{"Line":1},"fn_name":"init_add_liquidity_initial_test"},{"line":644,"address":[5470426],"length":1,"stats":{"Line":1},"fn_name":null},{"line":645,"address":[5470470],"length":1,"stats":{"Line":1},"fn_name":null},{"line":647,"address":[5470528],"length":1,"stats":{"Line":1},"fn_name":null},{"line":649,"address":[5470539],"length":1,"stats":{"Line":2},"fn_name":null},{"line":651,"address":[5470551],"length":1,"stats":{"Line":2},"fn_name":null},{"line":654,"address":[5470563],"length":1,"stats":{"Line":2},"fn_name":null},{"line":655,"address":[5470607],"length":1,"stats":{"Line":2},"fn_name":null},{"line":657,"address":[5470658,5471006],"length":1,"stats":{"Line":3},"fn_name":null},{"line":658,"address":[5470895,5471178,5471383],"length":1,"stats":{"Line":3},"fn_name":null},{"line":660,"address":[5471301],"length":1,"stats":{"Line":3},"fn_name":null},{"line":661,"address":[5471540],"length":1,"stats":{"Line":3},"fn_name":null},{"line":663,"address":[5471673,5471591],"length":1,"stats":{"Line":8},"fn_name":null},{"line":665,"address":[4558464,4558478],"length":1,"stats":{"Line":12},"fn_name":"{{closure}}"},{"line":669,"address":[5471748],"length":1,"stats":{"Line":4},"fn_name":null},{"line":671,"address":[5472476,5471802,5472166],"length":1,"stats":{"Line":8},"fn_name":null},{"line":672,"address":[5472254],"length":1,"stats":{"Line":4},"fn_name":null},{"line":676,"address":[5472614,5472704],"length":1,"stats":{"Line":8},"fn_name":null},{"line":677,"address":[5472140,5472481],"length":1,"stats":{"Line":8},"fn_name":null},{"line":678,"address":[5472499],"length":1,"stats":{"Line":4},"fn_name":null},{"line":679,"address":[5472558],"length":1,"stats":{"Line":4},"fn_name":null},{"line":680,"address":[5472584],"length":1,"stats":{"Line":4},"fn_name":null},{"line":681,"address":[5472599],"length":1,"stats":{"Line":4},"fn_name":null},{"line":684,"address":[5472895],"length":1,"stats":{"Line":4},"fn_name":null},{"line":701,"address":[4562416,4558568,4558560,4562424],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":702,"address":[4562512,4558656,4562209,4566066],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":704,"address":[4562540,4558684],"length":1,"stats":{"Line":2},"fn_name":null},{"line":705,"address":[4558700,4562556],"length":1,"stats":{"Line":2},"fn_name":null},{"line":706,"address":[4558716,4562572],"length":1,"stats":{"Line":2},"fn_name":null},{"line":707,"address":[4558730,4562586],"length":1,"stats":{"Line":2},"fn_name":null},{"line":708,"address":[4558746,4562602],"length":1,"stats":{"Line":2},"fn_name":null},{"line":709,"address":[4562634,4558778],"length":1,"stats":{"Line":2},"fn_name":null},{"line":710,"address":[4562650,4558794],"length":1,"stats":{"Line":2},"fn_name":null},{"line":712,"address":[4558663,4562519],"length":1,"stats":{"Line":2},"fn_name":null},{"line":716,"address":[4562725,4558869],"length":1,"stats":{"Line":2},"fn_name":null},{"line":718,"address":[4562448,4558592,4562462,4558606],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":721,"address":[4562975,4559118],"length":1,"stats":{"Line":2},"fn_name":null},{"line":722,"address":[4562224,4562861,4559005,4566081],"length":1,"stats":{"Line":2},"fn_name":null},{"line":725,"address":[4559335,4560867,4563669,4564724,4559812,4563192],"length":1,"stats":{"Line":4},"fn_name":null},{"line":726,"address":[4563832,4564250,4566161,4560393,4562304,4559975],"length":1,"stats":{"Line":2},"fn_name":null},{"line":727,"address":[4564745,4560359,4564450,4564216,4560888,4560593],"length":1,"stats":{"Line":4},"fn_name":null},{"line":730,"address":[4565315,4561150,4565007,4561458],"length":1,"stats":{"Line":2},"fn_name":null},{"line":731,"address":[4559794,4561088,4563651,4564945],"length":1,"stats":{"Line":4},"fn_name":null},{"line":732,"address":[4561104,4562334,4564961,4566191],"length":1,"stats":{"Line":2},"fn_name":null},{"line":734,"address":[4561690,4565818,4561961,4565547],"length":1,"stats":{"Line":2},"fn_name":null},{"line":735,"address":[4561634,4565491,4565281,4561424],"length":1,"stats":{"Line":4},"fn_name":null},{"line":736,"address":[4562364,4566221,4565507,4561650],"length":1,"stats":{"Line":2},"fn_name":null},{"line":745,"address":[4558826],"length":1,"stats":{"Line":1},"fn_name":null},{"line":746,"address":[4562682],"length":1,"stats":{"Line":1},"fn_name":null},{"line":753,"address":[4567528,4566280,4566272,4567520],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":754,"address":[4567664,4567393,4568641,4566416],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":756,"address":[4567692,4566444],"length":1,"stats":{"Line":2},"fn_name":null},{"line":757,"address":[4566460,4567708],"length":1,"stats":{"Line":2},"fn_name":null},{"line":758,"address":[4566474,4567722],"length":1,"stats":{"Line":2},"fn_name":null},{"line":760,"address":[4567754,4566506,4566423,4567671],"length":1,"stats":{"Line":4},"fn_name":null},{"line":764,"address":[4567799,4567428,4566551,4568676],"length":1,"stats":{"Line":4},"fn_name":null},{"line":766,"address":[4566304,4566318,4567566,4567552],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":767,"address":[4567912,4566664],"length":1,"stats":{"Line":2},"fn_name":null},{"line":768,"address":[4567920,4566672],"length":1,"stats":{"Line":2},"fn_name":null},{"line":770,"address":[4566879,4566841,4568460,4568089,4568127,4567212],"length":1,"stats":{"Line":4},"fn_name":null},{"line":771,"address":[4566735,4567983],"length":1,"stats":{"Line":2},"fn_name":null},{"line":772,"address":[4568119,4566871],"length":1,"stats":{"Line":2},"fn_name":null},{"line":781,"address":[4567408],"length":1,"stats":{"Line":1},"fn_name":null},{"line":782,"address":[4568656],"length":1,"stats":{"Line":1},"fn_name":null},{"line":809,"address":[5211016,5207904],"length":1,"stats":{"Line":1},"fn_name":"init_remove_liquidity_test"},{"line":810,"address":[5207914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":811,"address":[5207950],"length":1,"stats":{"Line":1},"fn_name":null},{"line":812,"address":[5207978],"length":1,"stats":{"Line":1},"fn_name":null},{"line":814,"address":[5208036],"length":1,"stats":{"Line":2},"fn_name":null},{"line":816,"address":[5208047],"length":1,"stats":{"Line":2},"fn_name":null},{"line":818,"address":[5208059],"length":1,"stats":{"Line":2},"fn_name":null},{"line":821,"address":[5208071],"length":1,"stats":{"Line":2},"fn_name":null},{"line":822,"address":[5208115],"length":1,"stats":{"Line":3},"fn_name":null},{"line":824,"address":[5208514,5208166],"length":1,"stats":{"Line":3},"fn_name":null},{"line":825,"address":[5208686,5208891,5208403],"length":1,"stats":{"Line":3},"fn_name":null},{"line":827,"address":[5208809],"length":1,"stats":{"Line":3},"fn_name":null},{"line":828,"address":[5209048],"length":1,"stats":{"Line":4},"fn_name":null},{"line":830,"address":[5209099,5209181],"length":1,"stats":{"Line":8},"fn_name":null},{"line":832,"address":[4825662,4825648],"length":1,"stats":{"Line":14},"fn_name":"{{closure}}"},{"line":836,"address":[5209256],"length":1,"stats":{"Line":5},"fn_name":null},{"line":838,"address":[5209310,5209686,5209996],"length":1,"stats":{"Line":12},"fn_name":null},{"line":839,"address":[5209774],"length":1,"stats":{"Line":6},"fn_name":null},{"line":843,"address":[5210224,5210134],"length":1,"stats":{"Line":14},"fn_name":null},{"line":844,"address":[5209660,5210001],"length":1,"stats":{"Line":14},"fn_name":null},{"line":845,"address":[5210019],"length":1,"stats":{"Line":7},"fn_name":null},{"line":846,"address":[5210078],"length":1,"stats":{"Line":7},"fn_name":null},{"line":847,"address":[5210104],"length":1,"stats":{"Line":7},"fn_name":null},{"line":848,"address":[5210119],"length":1,"stats":{"Line":7},"fn_name":null},{"line":851,"address":[5210415],"length":1,"stats":{"Line":7},"fn_name":null},{"line":854,"address":[5210481,5210535],"length":1,"stats":{"Line":14},"fn_name":null},{"line":855,"address":[5210427],"length":1,"stats":{"Line":7},"fn_name":null},{"line":857,"address":[5210474],"length":1,"stats":{"Line":7},"fn_name":null},{"line":878,"address":[4829296,4825752,4825744,4829304],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":879,"address":[4825824,4829132,4832684,4829376],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":881,"address":[4829404,4825852],"length":1,"stats":{"Line":2},"fn_name":null},{"line":882,"address":[4829420,4825868],"length":1,"stats":{"Line":2},"fn_name":null},{"line":883,"address":[4825884,4829436],"length":1,"stats":{"Line":2},"fn_name":null},{"line":884,"address":[4825898,4829450],"length":1,"stats":{"Line":2},"fn_name":null},{"line":885,"address":[4825914,4829466],"length":1,"stats":{"Line":2},"fn_name":null},{"line":886,"address":[4829498,4825946],"length":1,"stats":{"Line":2},"fn_name":null},{"line":887,"address":[4825962,4829514],"length":1,"stats":{"Line":2},"fn_name":null},{"line":888,"address":[4825978,4829530],"length":1,"stats":{"Line":2},"fn_name":null},{"line":890,"address":[4825831,4829383],"length":1,"stats":{"Line":2},"fn_name":null},{"line":894,"address":[4826403,4826341,4829893,4829955],"length":1,"stats":{"Line":4},"fn_name":null},{"line":895,"address":[4829574,4826022],"length":1,"stats":{"Line":2},"fn_name":null},{"line":897,"address":[4832743,4829191,4826114,4829666],"length":1,"stats":{"Line":2},"fn_name":null},{"line":898,"address":[4829328,4829737,4825790,4829342,4825776,4826185],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":901,"address":[4830574,4831485,4826620,4827022,4827933,4830172],"length":1,"stats":{"Line":4},"fn_name":null},{"line":902,"address":[4827102,4827460,4830654,4831012],"length":1,"stats":{"Line":2},"fn_name":null},{"line":903,"address":[4827667,4827426,4831219,4830978,4831506,4827954],"length":1,"stats":{"Line":4},"fn_name":null},{"line":906,"address":[4828466,4828169,4831721,4832018],"length":1,"stats":{"Line":2},"fn_name":null},{"line":907,"address":[4830556,4827004,4828161,4831713],"length":1,"stats":{"Line":4},"fn_name":null},{"line":910,"address":[4832206,4828654,4832469,4828917],"length":1,"stats":{"Line":2},"fn_name":null},{"line":911,"address":[4828435,4832198,4831987,4828646],"length":1,"stats":{"Line":4},"fn_name":null},{"line":921,"address":[4826010],"length":1,"stats":{"Line":1},"fn_name":null},{"line":922,"address":[4829562],"length":1,"stats":{"Line":1},"fn_name":null},{"line":926,"address":[4832848,4832856],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":927,"address":[4832880,4835950],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":929,"address":[4832908],"length":1,"stats":{"Line":1},"fn_name":null},{"line":930,"address":[4832924],"length":1,"stats":{"Line":1},"fn_name":null},{"line":931,"address":[4832940],"length":1,"stats":{"Line":1},"fn_name":null},{"line":932,"address":[4832954],"length":1,"stats":{"Line":1},"fn_name":null},{"line":933,"address":[4832970],"length":1,"stats":{"Line":1},"fn_name":null},{"line":934,"address":[4833002],"length":1,"stats":{"Line":1},"fn_name":null},{"line":935,"address":[4833018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":936,"address":[4833034],"length":1,"stats":{"Line":1},"fn_name":null},{"line":938,"address":[4832887],"length":1,"stats":{"Line":1},"fn_name":null},{"line":940,"address":[4833066],"length":1,"stats":{"Line":1},"fn_name":null},{"line":942,"address":[4833315,4833377],"length":1,"stats":{"Line":2},"fn_name":null},{"line":943,"address":[4833245],"length":1,"stats":{"Line":1},"fn_name":null},{"line":946,"address":[4833284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":949,"address":[4834478,4833594,4833996],"length":1,"stats":{"Line":2},"fn_name":null},{"line":950,"address":[4834076],"length":1,"stats":{"Line":1},"fn_name":null},{"line":951,"address":[4834134],"length":1,"stats":{"Line":1},"fn_name":null},{"line":952,"address":[4834499,4836028,4834173],"length":1,"stats":{"Line":1},"fn_name":null},{"line":955,"address":[4835149,4834841],"length":1,"stats":{"Line":1},"fn_name":null},{"line":956,"address":[4833978,4834699],"length":1,"stats":{"Line":2},"fn_name":null},{"line":957,"address":[4836058,4834715],"length":1,"stats":{"Line":1},"fn_name":null},{"line":959,"address":[4835467,4835738],"length":1,"stats":{"Line":1},"fn_name":null},{"line":960,"address":[4835115,4835343],"length":1,"stats":{"Line":2},"fn_name":null},{"line":961,"address":[4836148,4835359],"length":1,"stats":{"Line":1},"fn_name":null},{"line":970,"address":[4837696,4836272,4837704,4836280],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":971,"address":[4836352,4837776,4838851,4837427],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":973,"address":[4836388,4837812],"length":1,"stats":{"Line":2},"fn_name":null},{"line":974,"address":[4836404,4837828],"length":1,"stats":{"Line":2},"fn_name":null},{"line":975,"address":[4837842,4836418],"length":1,"stats":{"Line":2},"fn_name":null},{"line":976,"address":[4837858,4836434],"length":1,"stats":{"Line":2},"fn_name":null},{"line":977,"address":[4837874,4836450],"length":1,"stats":{"Line":2},"fn_name":null},{"line":979,"address":[4837906,4836482,4837783,4836359],"length":1,"stats":{"Line":4},"fn_name":null},{"line":983,"address":[4837470,4837960,4836536,4838894],"length":1,"stats":{"Line":4},"fn_name":null},{"line":984,"address":[4837572,4836544,4838996,4837968],"length":1,"stats":{"Line":2},"fn_name":null},{"line":986,"address":[4838299,4836913,4836875,4837246,4838337,4838670],"length":1,"stats":{"Line":4},"fn_name":null},{"line":987,"address":[4838224,4836800],"length":1,"stats":{"Line":2},"fn_name":null},{"line":988,"address":[4838099,4836675],"length":1,"stats":{"Line":2},"fn_name":null},{"line":990,"address":[4839028,4838122,4837604,4836698],"length":1,"stats":{"Line":2},"fn_name":null},{"line":991,"address":[4836760,4838184],"length":1,"stats":{"Line":2},"fn_name":null},{"line":993,"address":[4836905,4838329],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1002,"address":[4837442],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1003,"address":[4838866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1007,"address":[4839120,4839128],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1008,"address":[4839200,4840016],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":1010,"address":[4839225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1011,"address":[4839238],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1012,"address":[4839252],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1013,"address":[4839268],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1015,"address":[4839284,4839207],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1017,"address":[4839515,4839565,4839873],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1018,"address":[4839459],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1019,"address":[4839313],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1021,"address":[4840058,4839344],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1022,"address":[4839431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1024,"address":[4839557],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1030,"address":[4840176,4840184],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1031,"address":[4842894,4840208],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":1033,"address":[4840244],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1034,"address":[4840260],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1035,"address":[4840276],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1036,"address":[4840290],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1037,"address":[4840306],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1038,"address":[4840338],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1040,"address":[4840215,4840354],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1042,"address":[4842947],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1044,"address":[4840404],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1046,"address":[4840532,4840473],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1047,"address":[4840411],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1050,"address":[4840442],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1053,"address":[4840808,4840756],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1054,"address":[4840823],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1056,"address":[4840839],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1058,"address":[4840895],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1059,"address":[4840749],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1061,"address":[4840911,4841219],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1062,"address":[4841419,4841743,4841185],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1064,"address":[4842631,4841701,4842284,4841935],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1065,"address":[4842364,4842646],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1068,"address":[4840775],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1097,"address":[5171912,5168800],"length":1,"stats":{"Line":4},"fn_name":"init_remove_liquidity_imbalance_test"},{"line":1098,"address":[5168810],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1099,"address":[5168846],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1100,"address":[5168874],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1102,"address":[5168932],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1104,"address":[5168943],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1106,"address":[5168955],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1109,"address":[5168967],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1110,"address":[5169011],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1112,"address":[5169410,5169062],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1113,"address":[5169299,5169787,5169582],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1115,"address":[5169705],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1116,"address":[5169944],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1118,"address":[5170077,5169995],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1120,"address":[4502704,4502718],"length":1,"stats":{"Line":9},"fn_name":"{{closure}}"},{"line":1124,"address":[5170152],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1126,"address":[5170206,5170582,5170892],"length":1,"stats":{"Line":10},"fn_name":null},{"line":1127,"address":[5170670],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1131,"address":[5171030,5171120],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1132,"address":[5170556,5170897],"length":1,"stats":{"Line":10},"fn_name":null},{"line":1133,"address":[5170915],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1134,"address":[5170974],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1135,"address":[5171000],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1136,"address":[5171015],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1139,"address":[5171311],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1142,"address":[5171377,5171431],"length":1,"stats":{"Line":8},"fn_name":null},{"line":1143,"address":[5171323],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1145,"address":[5171370],"length":1,"stats":{"Line":5},"fn_name":null},{"line":1166,"address":[4511064,4502800,4502808,4506936,4506928,4511056],"length":1,"stats":{"Line":9},"fn_name":"{{closure}}"},{"line":1167,"address":[4507008,4502880,4514584,4511136,4506328,4510456],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":1169,"address":[4502916,4511172,4507044],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1170,"address":[4502932,4507060,4511188],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1171,"address":[4511204,4502948,4507076],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1172,"address":[4507090,4511218,4502962],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1173,"address":[4507106,4511234,4502978],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1174,"address":[4503010,4507138,4511266],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1175,"address":[4503026,4511282,4507154],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1176,"address":[4503042,4511298,4507170],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1178,"address":[4502887,4511143,4507015],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1182,"address":[4506960,4511088,4503086,4511102,4511342,4507214,4502832,4506974,4502846],"length":1,"stats":{"Line":9},"fn_name":"{{closure}}"},{"line":1183,"address":[4510543,4511557,4514671,4503301,4506415,4507429],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1185,"address":[4503620,4511798,4511876,4503542,4507748,4507670],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1186,"address":[4503438,4511694,4507566],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1188,"address":[4503493,4511749,4507621],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1189,"address":[4510675,4511772,4506547,4503516,4514803,4507644],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1192,"address":[4503837,4507965,4509497,4512093,4512570,4505369,4513625,4504314,4508442],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1193,"address":[4504477,4512733,4504843,4508971,4513099,4508605],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1194,"address":[4509518,4509171,4510728,4506600,4513065,4513299,4513646,4505043,4504809,4508937,4514856,4505390],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1197,"address":[4505869,4514125,4509997],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1198,"address":[4514889,4508424,4504296,4512552,4509738,4505610,4513866,4510761,4506633],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1200,"address":[4514439,4510311,4506183],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1201,"address":[4514176,4505920,4506765,4510893,4515021,4510048],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1210,"address":[4503074],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1211,"address":[4507202],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1212,"address":[4511330],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1219,"address":[4519384,4519376,4515192,4515184],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":1220,"address":[4518890,4523083,4519456,4515264],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":1222,"address":[4515300,4519492],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1223,"address":[4515316,4519508],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1224,"address":[4515332,4519524],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1225,"address":[4519538,4515346],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1226,"address":[4515362,4519554],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1227,"address":[4515394,4519586],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1228,"address":[4515410,4519602],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1229,"address":[4515426,4519618],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1231,"address":[4515271,4519463],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1235,"address":[4515470,4515230,4515216,4519422,4519662,4519408],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":1236,"address":[4515669,4519861],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1238,"address":[4520130,4520052,4515859,4515937],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1239,"address":[4515718,4519911],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1241,"address":[4515765,4519958],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1242,"address":[4515788,4519014,4523207,4519981],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1245,"address":[4516154,4521879,4520347,4520824,4516631,4517686],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1246,"address":[4521353,4517160,4520987,4516794],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1247,"address":[4521553,4521319,4521900,4517360,4519096,4517707,4523289,4517126],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1250,"address":[4520806,4522100,4516613,4517907],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1251,"address":[4522116,4517923],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1252,"address":[4519126,4522155,4517962,4523319],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1254,"address":[4518490,4518204,4522683,4522397],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1255,"address":[4522853,4522641,4518660,4518448,4519321,4523514],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1256,"address":[4518734,4522927],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1264,"address":[4515458],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1265,"address":[4519650],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1272,"address":[4523568,4527488,4523576,4527496],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":1273,"address":[4523600,4527066,4527520,4530990],"length":1,"stats":{"Line":4},"fn_name":"{{closure}}"},{"line":1275,"address":[4523636,4527556],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1276,"address":[4527572,4523652],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1277,"address":[4523668,4527588],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1278,"address":[4527602,4523682],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1279,"address":[4523698,4527618],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1280,"address":[4523730,4527650],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1281,"address":[4527666,4523746],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1282,"address":[4523762,4527682],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1284,"address":[4523607,4527527],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1288,"address":[4523806,4527726],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1289,"address":[4527805,4523885],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1291,"address":[4524211,4524133,4528057,4528135],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1292,"address":[4523992,4527916],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1294,"address":[4527963,4524039],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1295,"address":[4527986,4524062,4527190,4531114],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1298,"address":[4524905,4529884,4524428,4528829,4525960,4528352],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1299,"address":[4528992,4529358,4525434,4525068],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1300,"address":[4525400,4529558,4531196,4529324,4529905,4525634,4527272,4525981],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1303,"address":[4526181,4528811,4530105,4524887],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1304,"address":[4530121,4526197],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1305,"address":[4526236,4527302,4531226,4530160],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1307,"address":[4526380,4530304,4530590,4526666],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1308,"address":[4530548,4531355,4526836,4530760,4527431,4526624],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1309,"address":[4530834,4526910],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1317,"address":[4523794],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1318,"address":[4527714],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1325,"address":[4534808,4531408,4534800,4531416,4533104,4533112],"length":1,"stats":{"Line":9},"fn_name":"{{closure}}"},{"line":1326,"address":[4536153,4532761,4534928,4534457,4533232,4531536],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}"},{"line":1328,"address":[4531572,4533268,4534964],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1329,"address":[4534980,4531588,4533284],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1330,"address":[4531602,4533298,4534994],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1331,"address":[4531618,4533314,4535010],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1332,"address":[4535026,4531634,4533330],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1334,"address":[4533239,4531666,4531543,4533362,4534935,4535058],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1338,"address":[4531728,4536180,4534484,4533150,4533424,4533136,4531440,4534832,4534846,4531454,4535120,4532788],"length":1,"stats":{"Line":12},"fn_name":"{{closure}}"},{"line":1339,"address":[4532907,4531881,4535273,4534603,4533577,4536299],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1341,"address":[4533920,4535616,4532224,4535578,4532186,4533882,4532552,4534248,4535944],"length":1,"stats":{"Line":6},"fn_name":null},{"line":1342,"address":[4535487,4533791,4532095],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1343,"address":[4535413,4533717,4532021],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1345,"address":[4533748,4535444,4532052],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1346,"address":[4532072,4535464,4534735,4533039,4536431,4533768],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1348,"address":[4532216,4533912,4535608],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1357,"address":[4532776],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1358,"address":[4534472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1359,"address":[4536168],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1363,"address":[4536496,4536504],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1364,"address":[4536576,4537281],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":1366,"address":[4536601],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1367,"address":[4536614],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1368,"address":[4536628],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1370,"address":[4536583,4536644],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1372,"address":[4536778,4536828,4537136],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1373,"address":[4536722],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1374,"address":[4536668],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1376,"address":[4536694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1379,"address":[4536820],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1385,"address":[4537344,4537352],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1386,"address":[4537424,4538519],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":1388,"address":[4537460],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1389,"address":[4537476],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1390,"address":[4537490],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1391,"address":[4537506],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1393,"address":[4537431,4537522],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1395,"address":[4537693,4537634],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1396,"address":[4537560],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1398,"address":[4537594],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1399,"address":[4537606],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1402,"address":[4538374,4538066,4538016],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1403,"address":[4537957],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1404,"address":[4537900],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1406,"address":[4537929],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1409,"address":[4538058],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1415,"address":[4538632,4538624],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1416,"address":[4541800,4538704],"length":1,"stats":{"Line":2},"fn_name":"{{closure}}"},{"line":1418,"address":[4538740],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1419,"address":[4538756],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1420,"address":[4538772],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1421,"address":[4538786],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1422,"address":[4538802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1423,"address":[4538834],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1424,"address":[4538850],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1425,"address":[4538866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1427,"address":[4538711],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1429,"address":[4539014],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1433,"address":[4538914],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1436,"address":[4539026],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1438,"address":[4538656,4539033,4538670],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":1439,"address":[4539197,4542094],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1441,"address":[4539386],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1442,"address":[4539284],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1444,"address":[4539307],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1448,"address":[4539669,4539617],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1449,"address":[4539684],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1451,"address":[4539700],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1454,"address":[4539756],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1455,"address":[4539610],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1457,"address":[4540080,4539772],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1458,"address":[4540046,4540280,4540604],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1460,"address":[4541139,4541486,4540562,4540796],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1461,"address":[4541501,4541219],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1464,"address":[4539636],"length":1,"stats":{"Line":0},"fn_name":null},{"line":1493,"address":[5116632,5113520],"length":1,"stats":{"Line":1},"fn_name":"init_remove_liquidity_one_coin_test"},{"line":1494,"address":[5113530],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1495,"address":[5113566],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1496,"address":[5113594],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1498,"address":[5113652],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1500,"address":[5113663],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1502,"address":[5113675],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1505,"address":[5113687],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1506,"address":[5113731],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1508,"address":[5114130,5113782],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1509,"address":[5114302,5114507,5114019],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1511,"address":[5114425],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1512,"address":[5114664],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1514,"address":[5114715,5114797],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1516,"address":[5114789],"length":1,"stats":{"Line":3},"fn_name":null},{"line":1520,"address":[5114872],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1522,"address":[5115612,5115302,5114926],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1523,"address":[5115390],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1527,"address":[5115750,5115840],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1528,"address":[5115617,5115276],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1529,"address":[5115635],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1530,"address":[5115694],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1531,"address":[5115720],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1532,"address":[5115735],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1535,"address":[5116031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1538,"address":[5116097,5116151],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1539,"address":[5116043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1541,"address":[5116090],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1562,"address":[5116889,5116928,5116985,5116832],"length":1,"stats":{"Line":6},"fn_name":"test_amount_received_0"},{"line":1563,"address":[5116935,5116839],"length":1,"stats":{"Line":4},"fn_name":null},{"line":1565,"address":[5451652,5452580],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1566,"address":[5451665,5452593],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1567,"address":[5451681,5452609],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1568,"address":[5451695,5452623],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1569,"address":[5451711,5452639],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1570,"address":[5452665,5451737],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1571,"address":[5452681,5451753],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1572,"address":[5452697,5451769],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1574,"address":[5452567,5451639],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1578,"address":[5452738,5451810],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1580,"address":[5451888,5452822],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1581,"address":[5451834,5452762],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1586,"address":[5453020,5452089],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1588,"address":[5453370,5452155,5452438,5453087],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1589,"address":[5452298,5453230],"length":1,"stats":{"Line":2},"fn_name":null},{"line":1597,"address":[5451798],"length":1,"stats":{"Line":1},"fn_name":null},{"line":1598,"address":[5452726],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":750,"coverable":753},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","runtime","build.rs"],"content":"use substrate_wasm_builder::WasmBuilder;\n\nfn main() {\n    WasmBuilder::new()\n        .with_current_project()\n        .export_heap_base()\n        .import_memory()\n        .build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","runtime","src","lib.rs"],"content":"#![cfg_attr(not(feature = \"std\"), no_std)]\n// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.\n#![recursion_limit = \"256\"]\n\n// Make the WASM binary available.\n#[cfg(feature = \"std\")]\ninclude!(concat!(env!(\"OUT_DIR\"), \"/wasm_binary.rs\"));\n\nuse pallet_grandpa::fg_primitives;\nuse pallet_grandpa::{AuthorityId as GrandpaId, AuthorityList as GrandpaAuthorityList};\nuse sp_api::impl_runtime_apis;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{crypto::KeyTypeId, OpaqueMetadata};\nuse sp_runtime::traits::Convert;\nuse sp_runtime::traits::{\n    AccountIdLookup, BlakeTwo256, Block as BlockT, IdentifyAccount, NumberFor, Verify,\n};\nuse sp_runtime::{\n    create_runtime_str, generic, impl_opaque_keys,\n    transaction_validity::{TransactionSource, TransactionValidity},\n    ApplyExtrinsicResult, ModuleId, MultiSignature,\n};\nuse sp_runtime::{FixedPointNumber, FixedU128};\nuse sp_std::convert::TryFrom;\nuse sp_std::prelude::*;\n#[cfg(feature = \"std\")]\nuse sp_version::NativeVersion;\nuse sp_version::RuntimeVersion;\n\nuse frame_system::RawOrigin;\nuse pallet_assets::Call as AssetsCall;\nuse sp_runtime::traits::AccountIdConversion;\nuse sp_runtime::traits::Dispatchable;\nuse sp_runtime::MultiAddress;\n\n// A few exports that help ease life for downstream crates.\npub use frame_support::{\n    construct_runtime,\n    dispatch::{DispatchError, DispatchResult},\n    parameter_types,\n    traits::{Currency, EnsureOrigin, KeyOwnerProofSystem, OnUnbalanced, Randomness},\n    weights::{\n        constants::{BlockExecutionWeight, ExtrinsicBaseWeight, RocksDbWeight, WEIGHT_PER_SECOND},\n        IdentityFee, Weight,\n    },\n    StorageValue,\n};\npub use pallet_balances::Call as BalancesCall;\npub use pallet_timestamp::Call as TimestampCall;\nuse pallet_transaction_payment::CurrencyAdapter;\n#[cfg(any(feature = \"std\", test))]\npub use sp_runtime::BuildStorage;\npub use sp_runtime::{Perbill, Permill};\n\n/// Import the equilibrium_curve_amm pallet.\npub use equilibrium_curve_amm;\n\n/// An index to a block.\npub type BlockNumber = u32;\n\n/// Alias to 512-bit hash when used in the context of a transaction signature on the chain.\npub type Signature = MultiSignature;\n\n/// Some way of identifying an account on the chain. We intentionally make it equivalent\n/// to the public key of our transaction signing scheme.\npub type AccountId = \u003c\u003cSignature as Verify\u003e::Signer as IdentifyAccount\u003e::AccountId;\n\n/// The type for looking up accounts. We don't expect more than 4 billion of them, but you\n/// never know...\npub type AccountIndex = u32;\n\n/// Balance of an account.\npub type Balance = u128;\n\n/// Index of a transaction in the chain.\npub type Index = u32;\n\n/// A hash of some data used by the chain.\npub type Hash = sp_core::H256;\n\n/// Digest item type.\npub type DigestItem = generic::DigestItem\u003cHash\u003e;\n\n/// Opaque types. These are used by the CLI to instantiate machinery that don't need to know\n/// the specifics of the runtime. They can then be made to be agnostic over specific formats\n/// of data like extrinsics, allowing for them to continue syncing the network through upgrades\n/// to even the core data structures.\npub mod opaque {\n    use super::*;\n\n    pub use sp_runtime::OpaqueExtrinsic as UncheckedExtrinsic;\n\n    /// Opaque block header type.\n    pub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// Opaque block type.\n    pub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n    /// Opaque block identifier type.\n    pub type BlockId = generic::BlockId\u003cBlock\u003e;\n\n    impl_opaque_keys! {\n        pub struct SessionKeys {\n            pub aura: Aura,\n            pub grandpa: Grandpa,\n        }\n    }\n}\n\npub const VERSION: RuntimeVersion = RuntimeVersion {\n    spec_name: create_runtime_str!(\"node\"),\n    impl_name: create_runtime_str!(\"node\"),\n    authoring_version: 1,\n    spec_version: 1,\n    impl_version: 1,\n    apis: RUNTIME_API_VERSIONS,\n    transaction_version: 1,\n};\n\n/// This determines the average expected block time that we are targetting.\n/// Blocks will be produced at a minimum duration defined by `SLOT_DURATION`.\n/// `SLOT_DURATION` is picked up by `pallet_timestamp` which is in turn picked\n/// up by `pallet_aura` to implement `fn slot_duration()`.\n///\n/// Change this to adjust the block time.\npub const MILLISECS_PER_BLOCK: u64 = 6000;\n\npub const SLOT_DURATION: u64 = MILLISECS_PER_BLOCK;\n\n// Time is measured by number of blocks.\npub const MINUTES: BlockNumber = 60_000 / (MILLISECS_PER_BLOCK as BlockNumber);\npub const HOURS: BlockNumber = MINUTES * 60;\npub const DAYS: BlockNumber = HOURS * 24;\n\n/// The version information used to identify this runtime when compiled natively.\n#[cfg(feature = \"std\")]\npub fn native_version() -\u003e NativeVersion {\n    NativeVersion {\n        runtime_version: VERSION,\n        can_author_with: Default::default(),\n    }\n}\n\nconst NORMAL_DISPATCH_RATIO: Perbill = Perbill::from_percent(75);\n\nparameter_types! {\n    pub const Version: RuntimeVersion = VERSION;\n    pub const BlockHashCount: BlockNumber = 2400;\n    /// We allow for 2 seconds of compute with a 6 second average block time.\n    pub BlockWeights: frame_system::limits::BlockWeights = frame_system::limits::BlockWeights\n        ::with_sensible_defaults(2 * WEIGHT_PER_SECOND, NORMAL_DISPATCH_RATIO);\n    pub BlockLength: frame_system::limits::BlockLength = frame_system::limits::BlockLength\n        ::max_with_normal_ratio(5 * 1024 * 1024, NORMAL_DISPATCH_RATIO);\n    pub const SS58Prefix: u8 = 42;\n}\n\n// Configure FRAME pallets to include in runtime.\n\nimpl frame_system::Config for Runtime {\n    /// The basic call filter to use in dispatchable.\n    type BaseCallFilter = ();\n    /// Block \u0026 extrinsics weights: base values and limits.\n    type BlockWeights = BlockWeights;\n    /// The maximum length of a block (in bytes).\n    type BlockLength = BlockLength;\n    /// The identifier used to distinguish between accounts.\n    type AccountId = AccountId;\n    /// The aggregated dispatch type that is available for extrinsics.\n    type Call = Call;\n    /// The lookup mechanism to get account ID from whatever is passed in dispatchers.\n    type Lookup = AccountIdLookup\u003cAccountId, ()\u003e;\n    /// The index type for storing how many extrinsics an account has signed.\n    type Index = Index;\n    /// The index type for blocks.\n    type BlockNumber = BlockNumber;\n    /// The type for hashing blocks and tries.\n    type Hash = Hash;\n    /// The hashing algorithm used.\n    type Hashing = BlakeTwo256;\n    /// The header type.\n    type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// The ubiquitous event type.\n    type Event = Event;\n    /// The ubiquitous origin type.\n    type Origin = Origin;\n    /// Maximum number of block number to block hash mappings to keep (oldest pruned first).\n    type BlockHashCount = BlockHashCount;\n    /// The weight of database operations that the runtime can invoke.\n    type DbWeight = RocksDbWeight;\n    /// Version of the runtime.\n    type Version = Version;\n    /// Converts a module to the index of the module in `construct_runtime!`.\n    ///\n    /// This type is being generated by `construct_runtime!`.\n    type PalletInfo = PalletInfo;\n    /// What to do if a new account is created.\n    type OnNewAccount = ();\n    /// What to do if an account is fully reaped from the system.\n    type OnKilledAccount = ();\n    /// The data to be stored in an account.\n    type AccountData = pallet_balances::AccountData\u003cBalance\u003e;\n    /// Weight information for the extrinsics of this pallet.\n    type SystemWeightInfo = ();\n    /// This is used as an identifier of the chain. 42 is the generic substrate prefix.\n    type SS58Prefix = SS58Prefix;\n}\n\nimpl pallet_aura::Config for Runtime {\n    type AuthorityId = AuraId;\n}\n\nimpl pallet_grandpa::Config for Runtime {\n    type Event = Event;\n    type Call = Call;\n\n    type KeyOwnerProofSystem = ();\n\n    type KeyOwnerProof =\n        \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(KeyTypeId, GrandpaId)\u003e\u003e::Proof;\n\n    type KeyOwnerIdentification = \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(\n        KeyTypeId,\n        GrandpaId,\n    )\u003e\u003e::IdentificationTuple;\n\n    type HandleEquivocation = ();\n\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const MinimumPeriod: u64 = SLOT_DURATION / 2;\n}\n\nimpl pallet_timestamp::Config for Runtime {\n    /// A timestamp: milliseconds since the unix epoch.\n    type Moment = u64;\n    type OnTimestampSet = Aura;\n    type MinimumPeriod = MinimumPeriod;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const ExistentialDeposit: u128 = 500;\n    pub const MaxLocks: u32 = 50;\n}\n\nimpl pallet_balances::Config for Runtime {\n    type MaxLocks = MaxLocks;\n    /// The type for recording an account's balance.\n    type Balance = Balance;\n    /// The ubiquitous event type.\n    type Event = Event;\n    type DustRemoval = ();\n    type ExistentialDeposit = ExistentialDeposit;\n    type AccountStore = System;\n    type WeightInfo = pallet_balances::weights::SubstrateWeight\u003cRuntime\u003e;\n}\n\nparameter_types! {\n    pub const TransactionByteFee: Balance = 1;\n}\n\nimpl pallet_transaction_payment::Config for Runtime {\n    type OnChargeTransaction = CurrencyAdapter\u003cBalances, ()\u003e;\n    type TransactionByteFee = TransactionByteFee;\n    type WeightToFee = IdentityFee\u003cBalance\u003e;\n    type FeeMultiplierUpdate = ();\n}\n\nimpl pallet_sudo::Config for Runtime {\n    type Event = Event;\n    type Call = Call;\n}\n\ntype AssetId = u32;\n\nparameter_types! {\n    pub const AssetDepositBase: Balance = 1;\n    pub const AssetDepositPerZombie: Balance = 1;\n    pub const StringLimit: u32 = 50;\n    pub const MetadataDepositBase: Balance = 1;\n    pub const MetadataDepositPerByte: Balance = 1;\n}\n\npub struct EnsureCurveAmm;\nimpl EnsureOrigin\u003cOrigin\u003e for EnsureCurveAmm {\n    type Success = AccountId;\n    fn try_origin(o: Origin) -\u003e Result\u003cSelf::Success, Origin\u003e {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n\n        let result: Result\u003cRawOrigin\u003cAccountId\u003e, Origin\u003e = o.into();\n\n        result.and_then(|o| match o {\n            RawOrigin::Signed(id) if id == account_id =\u003e Ok(id),\n            r =\u003e Err(Origin::from(r)),\n        })\n    }\n\n    #[cfg(feature = \"runtime-benchmarks\")]\n    fn successful_origin() -\u003e Origin {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        Origin::from(RawOrigin::Signed(account_id))\n    }\n}\n\nimpl pallet_assets::Config for Runtime {\n    type Event = Event;\n    type Balance = Balance;\n    type AssetId = AssetId;\n    type Currency = Balances;\n    type ForceOrigin = EnsureCurveAmm;\n    type AssetDepositBase = AssetDepositBase;\n    type AssetDepositPerZombie = AssetDepositPerZombie;\n    type StringLimit = StringLimit;\n    type MetadataDepositBase = MetadataDepositBase;\n    type MetadataDepositPerByte = MetadataDepositPerByte;\n    type WeightInfo = pallet_assets::weights::SubstrateWeight\u003cRuntime\u003e;\n}\n\nparameter_types! {\n    pub const CreationFee: Balance = 999;\n    pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n    pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000);\n}\n\ntype Number = FixedU128;\n\npub struct EmptyUnbalanceHandler;\n\nimpl OnUnbalanced\u003c\u003cpallet_balances::Pallet\u003cRuntime\u003e as Currency\u003cAccountId\u003e\u003e::NegativeImbalance\u003e\n    for EmptyUnbalanceHandler\n{\n}\n\npub struct FixedU128Convert;\n\nimpl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Permill) -\u003e FixedU128 {\n        a.into()\n    }\n}\n\nimpl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Balance) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: u8) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl equilibrium_curve_amm::traits::CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n        Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n    }\n}\n\nimpl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n    fn convert(a: FixedU128) -\u003e Balance {\n        a.into_inner() / FixedU128::accuracy()\n    }\n}\n\npub struct FrameAssets;\n\n/// NOTE: Please do not use this implementation in production.\n/// It has some major issues. But it is a great example on the other hand.\n/// Trait `equilibrium_curve_amm::traits::Assets` expects that implementation\n/// will generate asset id for the new asset on it's own. But `pallet-assets` in contrast\n/// expects that asset id will be provided by the caller. The only thing we can do here\n/// is to guess asset id and hope that it is not in use.\nimpl equilibrium_curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for FrameAssets {\n    fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n        fn random_u32_seed() -\u003e u32 {\n            let seed = RandomnessCollectiveFlip::random_seed();\n            let seed_bytes = seed.as_fixed_bytes();\n            let small_seed_bytes = [seed_bytes[0], seed_bytes[1], seed_bytes[2], seed_bytes[3]];\n            let small_seed: u32 = u32::from_le_bytes(small_seed_bytes);\n\n            small_seed\n        }\n\n        /// See https://en.wikipedia.org/wiki/Linear_congruential_generator\n        fn lcg(seed: u32) -\u003e u32 {\n            const A: u32 = 1664525;\n            const C: u32 = 1013904223;\n\n            A.overflowing_mul(seed).0.overflowing_add(C).0\n        }\n\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(account_id);\n\n        // Guessing unused asset id\n        let mut seed = random_u32_seed();\n        for _ in 0..10 {\n            seed = lcg(seed);\n\n            let call = Call::Assets(AssetsCall::force_create(seed, multi_address.clone(), 0, 1));\n            if call.dispatch(origin.clone()).map_err(|x| x.error).is_ok() {\n                return Ok(seed);\n            }\n        }\n\n        Err(DispatchError::Other(\u0026\"Out of luck\"))\n    }\n\n    fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::mint(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::burn(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn transfer(\n        asset: AssetId,\n        source: \u0026AccountId,\n        dest: \u0026AccountId,\n        amount: Balance,\n    ) -\u003e DispatchResult {\n        let raw_origin = RawOrigin::Signed(source.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::transfer(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n        Assets::balance(asset, who.clone())\n    }\n\n    fn total_issuance(asset: AssetId) -\u003e Balance {\n        Assets::total_supply(asset)\n    }\n}\n\n/// Configure the pallet equilibrium_curve_amm in pallets/equilibrium_curve_amm.\nimpl equilibrium_curve_amm::Config for Runtime {\n    type Event = Event;\n    type AssetId = AssetId;\n    type Balance = Balance;\n    type Currency = pallet_balances::Pallet\u003cRuntime\u003e;\n    type CreationFee = CreationFee;\n    type Assets = FrameAssets;\n    type OnUnbalanced = EmptyUnbalanceHandler;\n    type ModuleId = CurveAmmModuleId;\n\n    type Number = Number;\n    type Precision = Precision;\n    type Convert = FixedU128Convert;\n}\n\n// Create the runtime by composing the FRAME pallets that were previously configured.\nconstruct_runtime!(\n    pub enum Runtime where\n        Block = Block,\n        NodeBlock = opaque::Block,\n        UncheckedExtrinsic = UncheckedExtrinsic\n    {\n        System: frame_system::{Module, Call, Config, Storage, Event\u003cT\u003e},\n        RandomnessCollectiveFlip: pallet_randomness_collective_flip::{Module, Call, Storage},\n        Timestamp: pallet_timestamp::{Module, Call, Storage, Inherent},\n        Aura: pallet_aura::{Module, Config\u003cT\u003e},\n        Grandpa: pallet_grandpa::{Module, Call, Storage, Config, Event},\n        Assets: pallet_assets::{Module, Call, Storage, Event\u003cT\u003e},\n        Balances: pallet_balances::{Module, Call, Storage, Config\u003cT\u003e, Event\u003cT\u003e},\n        TransactionPayment: pallet_transaction_payment::{Module, Storage},\n        Sudo: pallet_sudo::{Module, Call, Config\u003cT\u003e, Storage, Event\u003cT\u003e},\n        // Include the custom logic from the equilibrium_curve_amm pallet in the runtime.\n        CurveAmm: equilibrium_curve_amm::{Module, Call, Storage, Event\u003cT\u003e},\n    }\n);\n\n/// The address format for describing accounts.\npub type Address = sp_runtime::MultiAddress\u003cAccountId, ()\u003e;\n/// Block header type as expected by this runtime.\npub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n/// Block type as expected by this runtime.\npub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n/// A Block signed with a Justification\npub type SignedBlock = generic::SignedBlock\u003cBlock\u003e;\n/// BlockId type as expected by this runtime.\npub type BlockId = generic::BlockId\u003cBlock\u003e;\n/// The SignedExtension to the basic transaction logic.\npub type SignedExtra = (\n    frame_system::CheckSpecVersion\u003cRuntime\u003e,\n    frame_system::CheckTxVersion\u003cRuntime\u003e,\n    frame_system::CheckGenesis\u003cRuntime\u003e,\n    frame_system::CheckEra\u003cRuntime\u003e,\n    frame_system::CheckNonce\u003cRuntime\u003e,\n    frame_system::CheckWeight\u003cRuntime\u003e,\n    pallet_transaction_payment::ChargeTransactionPayment\u003cRuntime\u003e,\n);\n/// Unchecked extrinsic type as expected by this runtime.\npub type UncheckedExtrinsic = generic::UncheckedExtrinsic\u003cAddress, Call, Signature, SignedExtra\u003e;\n/// Extrinsic type that has already been checked.\npub type CheckedExtrinsic = generic::CheckedExtrinsic\u003cAccountId, Call, SignedExtra\u003e;\n/// Executive: handles dispatch to the various modules.\npub type Executive = frame_executive::Executive\u003c\n    Runtime,\n    Block,\n    frame_system::ChainContext\u003cRuntime\u003e,\n    Runtime,\n    AllModules,\n\u003e;\n\nimpl_runtime_apis! {\n    impl sp_api::Core\u003cBlock\u003e for Runtime {\n        fn version() -\u003e RuntimeVersion {\n            VERSION\n        }\n\n        fn execute_block(block: Block) {\n            Executive::execute_block(block)\n        }\n\n        fn initialize_block(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::initialize_block(header)\n        }\n    }\n\n    impl sp_api::Metadata\u003cBlock\u003e for Runtime {\n        fn metadata() -\u003e OpaqueMetadata {\n            Runtime::metadata().into()\n        }\n    }\n\n    impl sp_block_builder::BlockBuilder\u003cBlock\u003e for Runtime {\n        fn apply_extrinsic(extrinsic: \u003cBlock as BlockT\u003e::Extrinsic) -\u003e ApplyExtrinsicResult {\n            Executive::apply_extrinsic(extrinsic)\n        }\n\n        fn finalize_block() -\u003e \u003cBlock as BlockT\u003e::Header {\n            Executive::finalize_block()\n        }\n\n        fn inherent_extrinsics(data: sp_inherents::InherentData) -\u003e Vec\u003c\u003cBlock as BlockT\u003e::Extrinsic\u003e {\n            data.create_extrinsics()\n        }\n\n        fn check_inherents(\n            block: Block,\n            data: sp_inherents::InherentData,\n        ) -\u003e sp_inherents::CheckInherentsResult {\n            data.check_extrinsics(\u0026block)\n        }\n\n        fn random_seed() -\u003e \u003cBlock as BlockT\u003e::Hash {\n            RandomnessCollectiveFlip::random_seed()\n        }\n    }\n\n    impl sp_transaction_pool::runtime_api::TaggedTransactionQueue\u003cBlock\u003e for Runtime {\n        fn validate_transaction(\n            source: TransactionSource,\n            tx: \u003cBlock as BlockT\u003e::Extrinsic,\n        ) -\u003e TransactionValidity {\n            Executive::validate_transaction(source, tx)\n        }\n    }\n\n    impl sp_offchain::OffchainWorkerApi\u003cBlock\u003e for Runtime {\n        fn offchain_worker(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::offchain_worker(header)\n        }\n    }\n\n    impl sp_consensus_aura::AuraApi\u003cBlock, AuraId\u003e for Runtime {\n        fn slot_duration() -\u003e u64 {\n            Aura::slot_duration()\n        }\n\n        fn authorities() -\u003e Vec\u003cAuraId\u003e {\n            Aura::authorities()\n        }\n    }\n\n    impl sp_session::SessionKeys\u003cBlock\u003e for Runtime {\n        fn generate_session_keys(seed: Option\u003cVec\u003cu8\u003e\u003e) -\u003e Vec\u003cu8\u003e {\n            opaque::SessionKeys::generate(seed)\n        }\n\n        fn decode_session_keys(\n            encoded: Vec\u003cu8\u003e,\n        ) -\u003e Option\u003cVec\u003c(Vec\u003cu8\u003e, KeyTypeId)\u003e\u003e {\n            opaque::SessionKeys::decode_into_raw_public_keys(\u0026encoded)\n        }\n    }\n\n    impl fg_primitives::GrandpaApi\u003cBlock\u003e for Runtime {\n        fn grandpa_authorities() -\u003e GrandpaAuthorityList {\n            Grandpa::grandpa_authorities()\n        }\n\n        fn submit_report_equivocation_unsigned_extrinsic(\n            _equivocation_proof: fg_primitives::EquivocationProof\u003c\n                \u003cBlock as BlockT\u003e::Hash,\n                NumberFor\u003cBlock\u003e,\n            \u003e,\n            _key_owner_proof: fg_primitives::OpaqueKeyOwnershipProof,\n        ) -\u003e Option\u003c()\u003e {\n            None\n        }\n\n        fn generate_key_ownership_proof(\n            _set_id: fg_primitives::SetId,\n            _authority_id: GrandpaId,\n        ) -\u003e Option\u003cfg_primitives::OpaqueKeyOwnershipProof\u003e {\n            // NOTE: this is the only implementation possible since we've\n            // defined our key owner proof type as a bottom type (i.e. a type\n            // with no values).\n            None\n        }\n    }\n\n    impl frame_system_rpc_runtime_api::AccountNonceApi\u003cBlock, AccountId, Index\u003e for Runtime {\n        fn account_nonce(account: AccountId) -\u003e Index {\n            System::account_nonce(account)\n        }\n    }\n\n    impl pallet_transaction_payment_rpc_runtime_api::TransactionPaymentApi\u003cBlock, Balance\u003e for Runtime {\n        fn query_info(\n            uxt: \u003cBlock as BlockT\u003e::Extrinsic,\n            len: u32,\n        ) -\u003e pallet_transaction_payment_rpc_runtime_api::RuntimeDispatchInfo\u003cBalance\u003e {\n            TransactionPayment::query_info(uxt, len)\n        }\n        fn query_fee_details(\n            uxt: \u003cBlock as BlockT\u003e::Extrinsic,\n            len: u32,\n        ) -\u003e pallet_transaction_payment::FeeDetails\u003cBalance\u003e {\n            TransactionPayment::query_fee_details(uxt, len)\n        }\n    }\n\n    #[cfg(feature = \"runtime-benchmarks\")]\n    impl frame_benchmarking::Benchmark\u003cBlock\u003e for Runtime {\n        fn dispatch_benchmark(\n            config: frame_benchmarking::BenchmarkConfig\n        ) -\u003e Result\u003cVec\u003cframe_benchmarking::BenchmarkBatch\u003e, sp_runtime::RuntimeString\u003e {\n            use frame_benchmarking::{Benchmarking, BenchmarkBatch, add_benchmark, TrackedStorageKey};\n\n            use frame_system_benchmarking::Module as SystemBench;\n            impl frame_system_benchmarking::Config for Runtime {}\n\n            let whitelist: Vec\u003cTrackedStorageKey\u003e = vec![\n                // Block Number\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef702a5c1b19ab7a04f536c519aca4983ac\").to_vec().into(),\n                // Total Issuance\n                hex_literal::hex!(\"c2261276cc9d1f8598ea4b6a74b15c2f57c875e4cff74148e4628f264b974c80\").to_vec().into(),\n                // Execution Phase\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef7ff553b5a9862a516939d82b3d3d8661a\").to_vec().into(),\n                // Event Count\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef70a98fdbe9ce6c55837576c60c7af3850\").to_vec().into(),\n                // System Events\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef780d41e5e16056765bc8461851072c9d7\").to_vec().into(),\n            ];\n\n            let mut batches = Vec::\u003cBenchmarkBatch\u003e::new();\n            let params = (\u0026config, \u0026whitelist);\n\n            add_benchmark!(params, batches, frame_system, SystemBench::\u003cRuntime\u003e);\n            add_benchmark!(params, batches, pallet_balances, Balances);\n            add_benchmark!(params, batches, pallet_timestamp, Timestamp);\n\n            if batches.is_empty() { return Err(\"Benchmark not found for this pallet.\".into()) }\n            Ok(batches)\n        }\n    }\n}\n","traces":[{"line":100,"address":[6030738,6031275,6031734,6031758,6030951,6031125,6031445,6031654,6030919,6031679],"length":1,"stats":{"Line":0},"fn_name":null},{"line":135,"address":[4309552],"length":1,"stats":{"Line":0},"fn_name":"native_version"},{"line":138,"address":[4309559],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[4315287],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[4315351],"length":1,"stats":{"Line":1},"fn_name":null},{"line":150,"address":[4315396],"length":1,"stats":{"Line":0},"fn_name":null},{"line":287,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":288,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":289,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":291,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":294,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":295,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":300,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":301,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":303,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":323,"address":[4315648],"length":1,"stats":{"Line":0},"fn_name":"get"},{"line":324,"address":[4315684],"length":1,"stats":{"Line":0},"fn_name":null},{"line":339,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":340,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":345,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":346,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":351,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":352,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":357,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":358,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":363,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":364,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":377,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":378,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":379,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":380,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":381,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":382,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":384,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":388,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":392,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":395,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":396,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":397,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":398,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":400,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":403,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":404,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":405,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":407,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":408,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":409,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":413,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":416,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":417,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":418,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":419,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":420,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":422,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":424,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":425,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":427,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":430,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":432,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":433,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":434,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":436,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":438,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":439,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":441,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":444,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":450,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":451,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":453,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":455,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":456,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":458,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":461,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":462,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":465,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":466,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":487,"address":[4317575,4316214,4315856,4315808,4315925,4315749,4316948,4316583,4315728,4315824,4317268],"length":1,"stats":{"Line":4},"fn_name":"fmt"},{"line":493,"address":[6209870,6210014,6209012,6209444],"length":1,"stats":{"Line":0},"fn_name":null},{"line":497,"address":[6209072,6209504],"length":1,"stats":{"Line":0},"fn_name":null},{"line":498,"address":[6209565,6209133],"length":1,"stats":{"Line":0},"fn_name":null},{"line":499,"address":[6209190,6209622],"length":1,"stats":{"Line":0},"fn_name":null},{"line":501,"address":[6209244,6209676],"length":1,"stats":{"Line":0},"fn_name":null},{"line":503,"address":[6209298,6209730],"length":1,"stats":{"Line":0},"fn_name":null},{"line":540,"address":[4986157,4980317,4990781,4985507,4996573,4986094,4990865,4982228,4982656,4986740,4992603,4995145,4983657,4993686,4991515,4984691,4990210,4988390,4986972,4995864,4984915,4992850,4993372,4984255,4990557,4987056,4980208,4988087,4992044,4991212,4982880,4989102,4991452,4994099,4985854,4994921,4988327,4995666],"length":1,"stats":{"Line":0},"fn_name":"dispatch"},{"line":542,"address":[4334160],"length":1,"stats":{"Line":0},"fn_name":"version"},{"line":543,"address":[4334167],"length":1,"stats":{"Line":0},"fn_name":null},{"line":546,"address":[4334208],"length":1,"stats":{"Line":0},"fn_name":"execute_block"},{"line":547,"address":[4334215],"length":1,"stats":{"Line":0},"fn_name":null},{"line":550,"address":[4334272],"length":1,"stats":{"Line":0},"fn_name":"initialize_block"},{"line":551,"address":[4334280],"length":1,"stats":{"Line":0},"fn_name":null},{"line":556,"address":[4334288],"length":1,"stats":{"Line":0},"fn_name":"metadata"},{"line":557,"address":[4334295],"length":1,"stats":{"Line":0},"fn_name":null},{"line":562,"address":[4334352],"length":1,"stats":{"Line":0},"fn_name":"apply_extrinsic"},{"line":563,"address":[4334362],"length":1,"stats":{"Line":0},"fn_name":null},{"line":566,"address":[4334432],"length":1,"stats":{"Line":0},"fn_name":"finalize_block"},{"line":567,"address":[4334443],"length":1,"stats":{"Line":0},"fn_name":null},{"line":570,"address":[4334520,4334464],"length":1,"stats":{"Line":0},"fn_name":"inherent_extrinsics"},{"line":571,"address":[4334481],"length":1,"stats":{"Line":0},"fn_name":null},{"line":574,"address":[4334544,4334639],"length":1,"stats":{"Line":0},"fn_name":"check_inherents"},{"line":575,"address":[4986499,4986606],"length":1,"stats":{"Line":0},"fn_name":null},{"line":576,"address":[4986566,4986668],"length":1,"stats":{"Line":0},"fn_name":null},{"line":578,"address":[4334556],"length":1,"stats":{"Line":0},"fn_name":null},{"line":581,"address":[4334688],"length":1,"stats":{"Line":0},"fn_name":"random_seed"},{"line":582,"address":[4334699],"length":1,"stats":{"Line":0},"fn_name":null},{"line":587,"address":[4334720],"length":1,"stats":{"Line":0},"fn_name":"validate_transaction"},{"line":588,"address":[4987908],"length":1,"stats":{"Line":0},"fn_name":null},{"line":589,"address":[4987919],"length":1,"stats":{"Line":0},"fn_name":null},{"line":591,"address":[4334738],"length":1,"stats":{"Line":0},"fn_name":null},{"line":596,"address":[4334832],"length":1,"stats":{"Line":0},"fn_name":"offchain_worker"},{"line":597,"address":[4334840],"length":1,"stats":{"Line":0},"fn_name":null},{"line":602,"address":[4334848],"length":1,"stats":{"Line":0},"fn_name":"slot_duration"},{"line":603,"address":[4334852],"length":1,"stats":{"Line":0},"fn_name":null},{"line":606,"address":[4334880],"length":1,"stats":{"Line":0},"fn_name":"authorities"},{"line":607,"address":[4334891],"length":1,"stats":{"Line":0},"fn_name":null},{"line":612,"address":[4334912],"length":1,"stats":{"Line":0},"fn_name":"generate_session_keys"},{"line":613,"address":[4334919],"length":1,"stats":{"Line":0},"fn_name":null},{"line":616,"address":[4334976,4335074],"length":1,"stats":{"Line":0},"fn_name":"decode_session_keys"},{"line":617,"address":[4991156],"length":1,"stats":{"Line":0},"fn_name":null},{"line":619,"address":[4334983],"length":1,"stats":{"Line":0},"fn_name":null},{"line":624,"address":[4335104],"length":1,"stats":{"Line":0},"fn_name":"grandpa_authorities"},{"line":625,"address":[4335115],"length":1,"stats":{"Line":0},"fn_name":null},{"line":628,"address":[4335136],"length":1,"stats":{"Line":0},"fn_name":"submit_report_equivocation_unsigned_extrinsic"},{"line":629,"address":[4992399,4992493],"length":1,"stats":{"Line":0},"fn_name":null},{"line":633,"address":[4992445,4992539],"length":1,"stats":{"Line":0},"fn_name":null},{"line":635,"address":[4335140],"length":1,"stats":{"Line":0},"fn_name":null},{"line":638,"address":[4335184],"length":1,"stats":{"Line":0},"fn_name":"generate_key_ownership_proof"},{"line":639,"address":[4993228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":640,"address":[4993244],"length":1,"stats":{"Line":0},"fn_name":null},{"line":645,"address":[4335192],"length":1,"stats":{"Line":0},"fn_name":null},{"line":650,"address":[4335200],"length":1,"stats":{"Line":0},"fn_name":"account_nonce"},{"line":651,"address":[4335204],"length":1,"stats":{"Line":0},"fn_name":null},{"line":656,"address":[4335264],"length":1,"stats":{"Line":0},"fn_name":"query_info"},{"line":657,"address":[4994737,4994820],"length":1,"stats":{"Line":0},"fn_name":null},{"line":658,"address":[4994804],"length":1,"stats":{"Line":0},"fn_name":null},{"line":660,"address":[4335281],"length":1,"stats":{"Line":0},"fn_name":null},{"line":662,"address":[4335360],"length":1,"stats":{"Line":0},"fn_name":"query_fee_details"},{"line":663,"address":[4995524,4995592],"length":1,"stats":{"Line":0},"fn_name":null},{"line":664,"address":[4995576],"length":1,"stats":{"Line":0},"fn_name":null},{"line":666,"address":[4335377],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":2,"coverable":142}]};
        var previousData = {"files":[{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","build.rs"],"content":"use substrate_build_script_utils::{generate_cargo_keys, rerun_if_git_head_changed};\n\nfn main() {\n    generate_cargo_keys();\n\n    rerun_if_git_head_changed();\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","chain_spec.rs"],"content":"use node_runtime::{\n    AccountId, AuraConfig, BalancesConfig, GenesisConfig, GrandpaConfig, Signature, SudoConfig,\n    SystemConfig, WASM_BINARY,\n};\nuse sc_service::ChainType;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{sr25519, Pair, Public};\nuse sp_finality_grandpa::AuthorityId as GrandpaId;\nuse sp_runtime::traits::{IdentifyAccount, Verify};\n\n// The URL for the telemetry server.\n// const STAGING_TELEMETRY_URL: \u0026str = \"wss://telemetry.polkadot.io/submit/\";\n\n/// Specialized `ChainSpec`. This is a specialization of the general Substrate ChainSpec type.\npub type ChainSpec = sc_service::GenericChainSpec\u003cGenesisConfig\u003e;\n\n/// Generate a crypto pair from seed.\npub fn get_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e \u003cTPublic::Pair as Pair\u003e::Public {\n    TPublic::Pair::from_string(\u0026format!(\"//{}\", seed), None)\n        .expect(\"static values are valid; qed\")\n        .public()\n}\n\ntype AccountPublic = \u003cSignature as Verify\u003e::Signer;\n\n/// Generate an account ID from seed.\npub fn get_account_id_from_seed\u003cTPublic: Public\u003e(seed: \u0026str) -\u003e AccountId\nwhere\n    AccountPublic: From\u003c\u003cTPublic::Pair as Pair\u003e::Public\u003e,\n{\n    AccountPublic::from(get_from_seed::\u003cTPublic\u003e(seed)).into_account()\n}\n\n/// Generate an Aura authority key.\npub fn authority_keys_from_seed(s: \u0026str) -\u003e (AuraId, GrandpaId) {\n    (get_from_seed::\u003cAuraId\u003e(s), get_from_seed::\u003cGrandpaId\u003e(s))\n}\n\npub fn development_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or_else(|| \"Development wasm not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Development\",\n        // ID\n        \"dev\",\n        ChainType::Development,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![authority_keys_from_seed(\"Alice\")],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                ],\n                true,\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\npub fn local_testnet_config() -\u003e Result\u003cChainSpec, String\u003e {\n    let wasm_binary = WASM_BINARY.ok_or_else(|| \"Development wasm not available\".to_string())?;\n\n    Ok(ChainSpec::from_genesis(\n        // Name\n        \"Local Testnet\",\n        // ID\n        \"local_testnet\",\n        ChainType::Local,\n        move || {\n            testnet_genesis(\n                wasm_binary,\n                // Initial PoA authorities\n                vec![\n                    authority_keys_from_seed(\"Alice\"),\n                    authority_keys_from_seed(\"Bob\"),\n                ],\n                // Sudo account\n                get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                // Pre-funded accounts\n                vec![\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Alice//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Bob//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Charlie//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Dave//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Eve//stash\"),\n                    get_account_id_from_seed::\u003csr25519::Public\u003e(\"Ferdie//stash\"),\n                ],\n                true,\n            )\n        },\n        // Bootnodes\n        vec![],\n        // Telemetry\n        None,\n        // Protocol ID\n        None,\n        // Properties\n        None,\n        // Extensions\n        None,\n    ))\n}\n\n/// Configure initial storage state for FRAME modules.\nfn testnet_genesis(\n    wasm_binary: \u0026[u8],\n    initial_authorities: Vec\u003c(AuraId, GrandpaId)\u003e,\n    root_key: AccountId,\n    endowed_accounts: Vec\u003cAccountId\u003e,\n    _enable_println: bool,\n) -\u003e GenesisConfig {\n    GenesisConfig {\n        frame_system: Some(SystemConfig {\n            // Add Wasm runtime to storage.\n            code: wasm_binary.to_vec(),\n            changes_trie_config: Default::default(),\n        }),\n        pallet_balances: Some(BalancesConfig {\n            // Configure endowed accounts with initial balance of 1 \u003c\u003c 60.\n            balances: endowed_accounts\n                .iter()\n                .cloned()\n                .map(|k| (k, 1 \u003c\u003c 60))\n                .collect(),\n        }),\n        pallet_aura: Some(AuraConfig {\n            authorities: initial_authorities.iter().map(|x| (x.0.clone())).collect(),\n        }),\n        pallet_grandpa: Some(GrandpaConfig {\n            authorities: initial_authorities\n                .iter()\n                .map(|x| (x.1.clone(), 1))\n                .collect(),\n        }),\n        pallet_sudo: Some(SudoConfig {\n            // Assign network admin rights.\n            key: root_key,\n        }),\n    }\n}\n","traces":[{"line":18,"address":[5547824,5549228,5548320,5548256,5548800,5548748],"length":1,"stats":{"Line":0},"fn_name":"get_from_seed\u003csp_core::sr25519::Public\u003e"},{"line":19,"address":[5548827,5548347,5547851],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[5549280],"length":1,"stats":{"Line":0},"fn_name":"get_account_id_from_seed\u003csp_core::sr25519::Public\u003e"},{"line":31,"address":[5549297],"length":1,"stats":{"Line":0},"fn_name":null},{"line":35,"address":[11883520],"length":1,"stats":{"Line":0},"fn_name":"authority_keys_from_seed"},{"line":36,"address":[11883537],"length":1,"stats":{"Line":0},"fn_name":null},{"line":39,"address":[11884265,11883680],"length":1,"stats":{"Line":0},"fn_name":"development_config"},{"line":40,"address":[5549374,5549360],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":42,"address":[11884043,11884210],"length":1,"stats":{"Line":0},"fn_name":null},{"line":47,"address":[11883807],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[5549408,5549939],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":49,"address":[5549858],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[5549426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[5549457,5549993],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[5549569],"length":1,"stats":{"Line":0},"fn_name":null},{"line":56,"address":[5549954,5549727,5549606],"length":1,"stats":{"Line":0},"fn_name":null},{"line":57,"address":[5549619],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[5549646],"length":1,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[5549673],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[5549700],"length":1,"stats":{"Line":0},"fn_name":null},{"line":66,"address":[11883843],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[11883999],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[11884011],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[11884023],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[11884035],"length":1,"stats":{"Line":0},"fn_name":null},{"line":78,"address":[11884336,11884921],"length":1,"stats":{"Line":0},"fn_name":"local_testnet_config"},{"line":79,"address":[5550078,5550064],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":81,"address":[11884699,11884866],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[11884463],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[5550112,5551177],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":88,"address":[5551096],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[5550130],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[5550161,5550243,5551231],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[5550192],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[5550216],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[5550351],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[5550388,5551192,5550725],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[5550401],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[5550428],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[5550455],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[5550482],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[5550509],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[5550536],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[5550563],"length":1,"stats":{"Line":0},"fn_name":null},{"line":106,"address":[5550590],"length":1,"stats":{"Line":0},"fn_name":null},{"line":107,"address":[5550617],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[5550644],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[5550671],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[5550698],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[11884499],"length":1,"stats":{"Line":0},"fn_name":null},{"line":118,"address":[11884655],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[11884667],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[11884679],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[11884691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[11884992,11886261],"length":1,"stats":{"Line":0},"fn_name":"testnet_genesis"},{"line":137,"address":[11885192],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[11885467],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[11885635],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[11885803],"length":1,"stats":{"Line":0},"fn_name":null},{"line":159,"address":[11885898],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":60},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","cli.rs"],"content":"use sc_cli::RunCmd;\nuse structopt::StructOpt;\n\n#[derive(Debug, StructOpt)]\npub struct Cli {\n    #[structopt(subcommand)]\n    pub subcommand: Option\u003cSubcommand\u003e,\n\n    #[structopt(flatten)]\n    pub run: RunCmd,\n}\n\n#[derive(Debug, StructOpt)]\npub enum Subcommand {\n    /// Key management cli utilities\n    Key(sc_cli::KeySubcommand),\n    /// Build a chain specification.\n    BuildSpec(sc_cli::BuildSpecCmd),\n\n    /// Validate blocks.\n    CheckBlock(sc_cli::CheckBlockCmd),\n\n    /// Export blocks.\n    ExportBlocks(sc_cli::ExportBlocksCmd),\n\n    /// Export the state of a given block into a chain spec.\n    ExportState(sc_cli::ExportStateCmd),\n\n    /// Import blocks.\n    ImportBlocks(sc_cli::ImportBlocksCmd),\n\n    /// Remove the whole chain.\n    PurgeChain(sc_cli::PurgeChainCmd),\n\n    /// Revert the chain to a previous state.\n    Revert(sc_cli::RevertCmd),\n\n    /// The custom benchmark subcommmand benchmarking runtime pallets.\n    #[structopt(name = \"benchmark\", about = \"Benchmark runtime pallets.\")]\n    Benchmark(frame_benchmarking_cli::BenchmarkCmd),\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","command.rs"],"content":"// This file is part of Substrate.\n\n// Copyright (C) 2017-2021 Parity Technologies (UK) Ltd.\n// SPDX-License-Identifier: Apache-2.0\n\n// Licensed under the Apache License, Version 2.0 (the \"License\");\n// you may not use this file except in compliance with the License.\n// You may obtain a copy of the License at\n//\n// \thttp://www.apache.org/licenses/LICENSE-2.0\n//\n// Unless required by applicable law or agreed to in writing, software\n// distributed under the License is distributed on an \"AS IS\" BASIS,\n// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n// See the License for the specific language governing permissions and\n// limitations under the License.\n\nuse crate::cli::{Cli, Subcommand};\nuse crate::{chain_spec, service};\nuse node_runtime::Block;\nuse sc_cli::{ChainSpec, Role, RuntimeVersion, SubstrateCli};\nuse sc_service::PartialComponents;\n\nimpl SubstrateCli for Cli {\n    fn impl_name() -\u003e String {\n        \"Substrate Node\".into()\n    }\n\n    fn impl_version() -\u003e String {\n        env!(\"SUBSTRATE_CLI_IMPL_VERSION\").into()\n    }\n\n    fn description() -\u003e String {\n        env!(\"CARGO_PKG_DESCRIPTION\").into()\n    }\n\n    fn author() -\u003e String {\n        env!(\"CARGO_PKG_AUTHORS\").into()\n    }\n\n    fn support_url() -\u003e String {\n        \"support.anonymous.an\".into()\n    }\n\n    fn copyright_start_year() -\u003e i32 {\n        2017\n    }\n\n    fn load_spec(\u0026self, id: \u0026str) -\u003e Result\u003cBox\u003cdyn sc_service::ChainSpec\u003e, String\u003e {\n        Ok(match id {\n            \"dev\" =\u003e Box::new(chain_spec::development_config()?),\n            \"\" | \"local\" =\u003e Box::new(chain_spec::local_testnet_config()?),\n            path =\u003e Box::new(chain_spec::ChainSpec::from_json_file(\n                std::path::PathBuf::from(path),\n            )?),\n        })\n    }\n\n    fn native_runtime_version(_: \u0026Box\u003cdyn ChainSpec\u003e) -\u003e \u0026'static RuntimeVersion {\n        \u0026node_runtime::VERSION\n    }\n}\n\n/// Parse and run command line arguments\npub fn run() -\u003e sc_cli::Result\u003c()\u003e {\n    let cli = Cli::from_args();\n\n    match \u0026cli.subcommand {\n        Some(Subcommand::Key(cmd)) =\u003e cmd.run(\u0026cli),\n        Some(Subcommand::BuildSpec(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.sync_run(|config| cmd.run(config.chain_spec, config.network))\n        }\n        Some(Subcommand::CheckBlock(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    import_queue,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, import_queue), task_manager))\n            })\n        }\n        Some(Subcommand::ExportBlocks(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, config.database), task_manager))\n            })\n        }\n        Some(Subcommand::ExportState(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, config.chain_spec), task_manager))\n            })\n        }\n        Some(Subcommand::ImportBlocks(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    import_queue,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, import_queue), task_manager))\n            })\n        }\n        Some(Subcommand::PurgeChain(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.sync_run(|config| cmd.run(config.database))\n        }\n        Some(Subcommand::Revert(cmd)) =\u003e {\n            let runner = cli.create_runner(cmd)?;\n            runner.async_run(|config| {\n                let PartialComponents {\n                    client,\n                    task_manager,\n                    backend,\n                    ..\n                } = service::new_partial(\u0026config)?;\n                Ok((cmd.run(client, backend), task_manager))\n            })\n        }\n        Some(Subcommand::Benchmark(cmd)) =\u003e {\n            if cfg!(feature = \"runtime-benchmarks\") {\n                let runner = cli.create_runner(cmd)?;\n\n                runner.sync_run(|config| cmd.run::\u003cBlock, service::Executor\u003e(config))\n            } else {\n                Err(\"Benchmarking wasn't enabled when building the node. \\\n\t\t\t\tYou can enable it with `--features runtime-benchmarks`.\"\n                    .into())\n            }\n        }\n        None =\u003e {\n            let runner = cli.create_runner(\u0026cli.run)?;\n            runner.run_node_until_exit(|config| async move {\n                match config.role {\n                    Role::Light =\u003e service::new_light(config),\n                    _ =\u003e service::new_full(config),\n                }\n                .map_err(sc_cli::Error::Service)\n            })\n        }\n    }\n}\n","traces":[{"line":25,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[12621934],"length":1,"stats":{"Line":0},"fn_name":null},{"line":29,"address":[12621968],"length":1,"stats":{"Line":0},"fn_name":"impl_version"},{"line":30,"address":[12621982],"length":1,"stats":{"Line":0},"fn_name":null},{"line":33,"address":[12622016],"length":1,"stats":{"Line":0},"fn_name":"description"},{"line":34,"address":[12622030],"length":1,"stats":{"Line":0},"fn_name":null},{"line":37,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":38,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":41,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":42,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":46,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":51,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":52,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":53,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":59,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":65,"address":[8833968,8838709],"length":1,"stats":{"Line":0},"fn_name":"run"},{"line":66,"address":[8834008],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[8836503,8834829,8835945,8837061,8835387,8838252,8834223,8837619,8838168,8834271],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[8834233,8834112,8834188],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[8834284],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[8838996,8834621,8834296],"length":1,"stats":{"Line":0},"fn_name":null},{"line":72,"address":[8834501],"length":1,"stats":{"Line":0},"fn_name":null},{"line":74,"address":[8834842],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[8838958,8834854,8835179],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[17369728,17370542],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":78,"address":[17369957],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[17369981],"length":1,"stats":{"Line":0},"fn_name":null},{"line":80,"address":[17370014],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[17370975,17370698,17370504,17369761,17370102],"length":1,"stats":{"Line":0},"fn_name":null},{"line":83,"address":[17370294,17370565],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[8835400],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[8838920,8835412,8835737],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[8835617],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[17371429],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[17371453],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[17371489,17372002,17372152,17373386,17371201],"length":1,"stats":{"Line":0},"fn_name":null},{"line":94,"address":[17371709,17372046],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[8835958],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[8838882,8835970,8836295],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[8836175],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[17374725],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[17374749],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[17375337,17375218,17374785,17376571,17374497],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[17375005,17375262],"length":1,"stats":{"Line":0},"fn_name":null},{"line":108,"address":[8836516],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[8836528,8836853,8838844],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[8836733],"length":1,"stats":{"Line":0},"fn_name":null},{"line":112,"address":[17377877],"length":1,"stats":{"Line":0},"fn_name":null},{"line":113,"address":[17377901],"length":1,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[17377934],"length":1,"stats":{"Line":0},"fn_name":null},{"line":116,"address":[17378022,17378424,17378895,17377681,17378618],"length":1,"stats":{"Line":0},"fn_name":null},{"line":117,"address":[17378485,17378214],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[8837074],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[8838809,8837086,8837411],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[8837291],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[8837632],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[8837969,8837644,8838780],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[8837849],"length":1,"stats":{"Line":0},"fn_name":null},{"line":128,"address":[17380950],"length":1,"stats":{"Line":0},"fn_name":null},{"line":129,"address":[17380974],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[17381007],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[17380754,17381588,17381031,17381474,17381860],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[17381535,17381227],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[8838181],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[8838193],"length":1,"stats":{"Line":0},"fn_name":null},{"line":148,"address":[8834146,8838273,8838479,8838751],"length":1,"stats":{"Line":0},"fn_name":null},{"line":149,"address":[8838404],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[17382269],"length":1,"stats":{"Line":0},"fn_name":null},{"line":151,"address":[17382233,17382149],"length":1,"stats":{"Line":0},"fn_name":null},{"line":152,"address":[17382176],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":75},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","lib.rs"],"content":"pub mod chain_spec;\npub mod rpc;\npub mod service;\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","main.rs"],"content":"//! Substrate Node Template CLI library.\n#![warn(missing_docs)]\n\nmod chain_spec;\n#[macro_use]\nmod service;\nmod cli;\nmod command;\nmod rpc;\n\nfn main() -\u003e sc_cli::Result\u003c()\u003e {\n    command::run()\n}\n","traces":[{"line":11,"address":[7445280],"length":1,"stats":{"Line":0},"fn_name":"main"},{"line":12,"address":[7445291],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":2},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","rpc.rs"],"content":"//! A collection of node-specific RPC methods.\n//! Substrate provides the `sc-rpc` crate, which defines the core RPC layer\n//! used by Substrate nodes. This file extends those RPC definitions with\n//! capabilities that are specific to this project's runtime configuration.\n\n#![warn(missing_docs)]\n\nuse std::sync::Arc;\n\nuse node_runtime::{opaque::Block, AccountId, Balance, Index};\npub use sc_rpc_api::DenyUnsafe;\nuse sp_api::ProvideRuntimeApi;\nuse sp_block_builder::BlockBuilder;\nuse sp_blockchain::{Error as BlockChainError, HeaderBackend, HeaderMetadata};\nuse sp_transaction_pool::TransactionPool;\n\n/// Full client dependencies.\npub struct FullDeps\u003cC, P\u003e {\n    /// The client instance to use.\n    pub client: Arc\u003cC\u003e,\n    /// Transaction pool instance.\n    pub pool: Arc\u003cP\u003e,\n    /// Whether to deny unsafe calls\n    pub deny_unsafe: DenyUnsafe,\n}\n\n/// Instantiate all full RPC extensions.\npub fn create_full\u003cC, P\u003e(deps: FullDeps\u003cC, P\u003e) -\u003e jsonrpc_core::IoHandler\u003csc_rpc::Metadata\u003e\nwhere\n    C: ProvideRuntimeApi\u003cBlock\u003e,\n    C: HeaderBackend\u003cBlock\u003e + HeaderMetadata\u003cBlock, Error = BlockChainError\u003e + 'static,\n    C: Send + Sync + 'static,\n    C::Api: substrate_frame_rpc_system::AccountNonceApi\u003cBlock, AccountId, Index\u003e,\n    C::Api: pallet_transaction_payment_rpc::TransactionPaymentRuntimeApi\u003cBlock, Balance\u003e,\n    C::Api: BlockBuilder\u003cBlock\u003e,\n    P: TransactionPool + 'static,\n{\n    use pallet_transaction_payment_rpc::{TransactionPayment, TransactionPaymentApi};\n    use substrate_frame_rpc_system::{FullSystem, SystemApi};\n\n    let mut io = jsonrpc_core::IoHandler::default();\n    let FullDeps {\n        client,\n        pool,\n        deny_unsafe,\n    } = deps;\n\n    io.extend_with(SystemApi::to_delegate(FullSystem::new(\n        client.clone(),\n        pool,\n        deny_unsafe,\n    )));\n\n    io.extend_with(TransactionPaymentApi::to_delegate(TransactionPayment::new(\n        client.clone(),\n    )));\n\n    // Extend this RPC with a custom API by using the following syntax.\n    // `YourRpcStruct` should have a reference to a client, which is needed\n    // to call into the runtime.\n    // `io.extend_with(YourRpcTrait::to_delegate(YourRpcStruct::new(ReferenceToClient, ...)));`\n\n    io\n}\n","traces":[{"line":28,"address":[18828142,18827728],"length":1,"stats":{"Line":0},"fn_name":"create_full\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_runtime::RuntimeApi\u003e,sc_transaction_pool::BasicPool\u003csc_transaction_pool::api::FullChainApi\u003csc_service::client::client::Client\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_service::client::call_executor::LocalCallExecutor\u003csc_client_db::Backend\u003csp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sc_executor::native_executor::NativeExecutor\u003cnode::service::Executor\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e, node_runtime::RuntimeApi\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e, sp_runtime::generic::block::Block\u003csp_runtime::generic::header::Header\u003cu32, sp_runtime::traits::BlakeTwo256\u003e, sp_runtime::OpaqueExtrinsic\u003e\u003e\u003e"},{"line":41,"address":[18827738],"length":1,"stats":{"Line":0},"fn_name":null},{"line":43,"address":[18827808],"length":1,"stats":{"Line":0},"fn_name":null},{"line":44,"address":[18827837],"length":1,"stats":{"Line":0},"fn_name":null},{"line":45,"address":[18827862],"length":1,"stats":{"Line":0},"fn_name":null},{"line":48,"address":[18827881,18827927],"length":1,"stats":{"Line":0},"fn_name":null},{"line":49,"address":[18827898],"length":1,"stats":{"Line":0},"fn_name":null},{"line":50,"address":[18827910],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[18827995,18828029],"length":1,"stats":{"Line":0},"fn_name":null},{"line":55,"address":[18828012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":63,"address":[18828081],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":11},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","node","src","service.rs"],"content":"//! Service and ServiceFactory implementation. Specialized wrapper over substrate service.\n\nuse node_runtime::{self, opaque::Block, RuntimeApi};\nuse sc_client_api::{ExecutorProvider, RemoteBackend};\nuse sc_executor::native_executor_instance;\npub use sc_executor::NativeExecutor;\nuse sc_finality_grandpa::SharedVoterState;\nuse sc_keystore::LocalKeystore;\nuse sc_service::{error::Error as ServiceError, Configuration, TaskManager};\nuse sp_consensus_aura::sr25519::AuthorityPair as AuraPair;\nuse sp_inherents::InherentDataProviders;\nuse std::sync::Arc;\nuse std::time::Duration;\n\n// Our native executor instance.\nnative_executor_instance!(\n    pub Executor,\n    node_runtime::api::dispatch,\n    node_runtime::native_version,\n    frame_benchmarking::benchmarking::HostFunctions,\n);\n\ntype FullClient = sc_service::TFullClient\u003cBlock, RuntimeApi, Executor\u003e;\ntype FullBackend = sc_service::TFullBackend\u003cBlock\u003e;\ntype FullSelectChain = sc_consensus::LongestChain\u003cFullBackend, Block\u003e;\n\npub fn new_partial(\n    config: \u0026Configuration,\n) -\u003e Result\u003c\n    sc_service::PartialComponents\u003c\n        FullClient,\n        FullBackend,\n        FullSelectChain,\n        sp_consensus::DefaultImportQueue\u003cBlock, FullClient\u003e,\n        sc_transaction_pool::FullPool\u003cBlock, FullClient\u003e,\n        (\n            sc_consensus_aura::AuraBlockImport\u003c\n                Block,\n                FullClient,\n                sc_finality_grandpa::GrandpaBlockImport\u003c\n                    FullBackend,\n                    Block,\n                    FullClient,\n                    FullSelectChain,\n                \u003e,\n                AuraPair,\n            \u003e,\n            sc_finality_grandpa::LinkHalf\u003cBlock, FullClient, FullSelectChain\u003e,\n        ),\n    \u003e,\n    ServiceError,\n\u003e {\n    if config.keystore_remote.is_some() {\n        return Err(ServiceError::Other(format!(\n            \"Remote Keystores are not supported.\"\n        )));\n    }\n    let inherent_data_providers = sp_inherents::InherentDataProviders::new();\n\n    let (client, backend, keystore_container, task_manager) =\n        sc_service::new_full_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n    let client = Arc::new(client);\n\n    let select_chain = sc_consensus::LongestChain::new(backend.clone());\n\n    let transaction_pool = sc_transaction_pool::BasicPool::new_full(\n        config.transaction_pool.clone(),\n        config.role.is_authority().into(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n    );\n\n    let (grandpa_block_import, grandpa_link) = sc_finality_grandpa::block_import(\n        client.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        select_chain.clone(),\n    )?;\n\n    let aura_block_import = sc_consensus_aura::AuraBlockImport::\u003c_, _, _, AuraPair\u003e::new(\n        grandpa_block_import.clone(),\n        client.clone(),\n    );\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        aura_block_import.clone(),\n        Some(Box::new(grandpa_block_import.clone())),\n        client.clone(),\n        inherent_data_providers.clone(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone()),\n    )?;\n\n    Ok(sc_service::PartialComponents {\n        client,\n        backend,\n        task_manager,\n        import_queue,\n        keystore_container,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (aura_block_import, grandpa_link),\n    })\n}\n\nfn remote_keystore(_url: \u0026String) -\u003e Result\u003cArc\u003cLocalKeystore\u003e, \u0026'static str\u003e {\n    // FIXME: here would the concrete keystore be built,\n    //        must return a concrete type (NOT `LocalKeystore`) that\n    //        implements `CryptoStore` and `SyncCryptoStore`\n    Err(\"Remote Keystore not supported.\")\n}\n\n/// Builds a new service for a full client.\npub fn new_full(mut config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let sc_service::PartialComponents {\n        client,\n        backend,\n        mut task_manager,\n        import_queue,\n        mut keystore_container,\n        select_chain,\n        transaction_pool,\n        inherent_data_providers,\n        other: (block_import, grandpa_link),\n    } = new_partial(\u0026config)?;\n\n    if let Some(url) = \u0026config.keystore_remote {\n        match remote_keystore(url) {\n            Ok(k) =\u003e keystore_container.set_remote_keystore(k),\n            Err(e) =\u003e {\n                return Err(ServiceError::Other(format!(\n                    \"Error hooking up remote keystore for {}: {}\",\n                    url, e\n                )))\n            }\n        };\n    }\n\n    config\n        .network\n        .extra_sets\n        .push(sc_finality_grandpa::grandpa_peers_set_config());\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: None,\n            block_announce_validator_builder: None,\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    let role = config.role.clone();\n    let force_authoring = config.force_authoring;\n    let backoff_authoring_blocks: Option\u003c()\u003e = None;\n    let name = config.network.node_name.clone();\n    let enable_grandpa = !config.disable_grandpa;\n    let prometheus_registry = config.prometheus_registry().cloned();\n\n    let rpc_extensions_builder = {\n        let client = client.clone();\n        let pool = transaction_pool.clone();\n\n        Box::new(move |deny_unsafe, _| {\n            let deps = crate::rpc::FullDeps {\n                client: client.clone(),\n                pool: pool.clone(),\n                deny_unsafe,\n            };\n\n            crate::rpc::create_full(deps)\n        })\n    };\n\n    let (_rpc_handlers, telemetry_connection_notifier) =\n        sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n            network: network.clone(),\n            client: client.clone(),\n            keystore: keystore_container.sync_keystore(),\n            task_manager: \u0026mut task_manager,\n            transaction_pool: transaction_pool.clone(),\n            rpc_extensions_builder,\n            on_demand: None,\n            remote_blockchain: None,\n            backend,\n            network_status_sinks,\n            system_rpc_tx,\n            config,\n        })?;\n\n    if role.is_authority() {\n        let proposer = sc_basic_authorship::ProposerFactory::new(\n            task_manager.spawn_handle(),\n            client.clone(),\n            transaction_pool,\n            prometheus_registry.as_ref(),\n        );\n\n        let can_author_with =\n            sp_consensus::CanAuthorWithNativeVersion::new(client.executor().clone());\n\n        let aura = sc_consensus_aura::start_aura::\u003c_, _, _, _, _, AuraPair, _, _, _, _\u003e(\n            sc_consensus_aura::slot_duration(\u0026*client)?,\n            client.clone(),\n            select_chain,\n            block_import,\n            proposer,\n            network.clone(),\n            inherent_data_providers.clone(),\n            force_authoring,\n            backoff_authoring_blocks,\n            keystore_container.sync_keystore(),\n            can_author_with,\n        )?;\n\n        // the AURA authoring task is considered essential, i.e. if it\n        // fails we take down the service with it.\n        task_manager\n            .spawn_essential_handle()\n            .spawn_blocking(\"aura\", aura);\n    }\n\n    // if the node isn't actively participating in consensus then it doesn't\n    // need a keystore, regardless of which protocol we use below.\n    let keystore = if role.is_authority() {\n        Some(keystore_container.sync_keystore())\n    } else {\n        None\n    };\n\n    let grandpa_config = sc_finality_grandpa::Config {\n        // FIXME #1578 make this available through chainspec\n        gossip_duration: Duration::from_millis(333),\n        justification_period: 512,\n        name: Some(name),\n        observer_enabled: false,\n        keystore,\n        is_authority: role.is_network_authority(),\n    };\n\n    if enable_grandpa {\n        // start the full GRANDPA voter\n        // NOTE: non-authorities could run the GRANDPA observer protocol, but at\n        // this point the full voter should provide better guarantees of block\n        // and vote data availability than the observer. The observer has not\n        // been tested extensively yet and having most nodes in a network run it\n        // could lead to finality stalls.\n        let grandpa_config = sc_finality_grandpa::GrandpaParams {\n            config: grandpa_config,\n            link: grandpa_link,\n            network,\n            telemetry_on_connect: telemetry_connection_notifier.map(|x| x.on_connect_stream()),\n            voting_rule: sc_finality_grandpa::VotingRulesBuilder::default().build(),\n            prometheus_registry,\n            shared_voter_state: SharedVoterState::empty(),\n        };\n\n        // the GRANDPA voter task is considered infallible, i.e.\n        // if it fails we take down the service with it.\n        task_manager.spawn_essential_handle().spawn_blocking(\n            \"grandpa-voter\",\n            sc_finality_grandpa::run_grandpa_voter(grandpa_config)?,\n        );\n    }\n\n    network_starter.start_network();\n    Ok(task_manager)\n}\n\n/// Builds a new service for a light client.\npub fn new_light(mut config: Configuration) -\u003e Result\u003cTaskManager, ServiceError\u003e {\n    let (client, backend, keystore_container, mut task_manager, on_demand) =\n        sc_service::new_light_parts::\u003cBlock, RuntimeApi, Executor\u003e(\u0026config)?;\n\n    config\n        .network\n        .extra_sets\n        .push(sc_finality_grandpa::grandpa_peers_set_config());\n\n    let select_chain = sc_consensus::LongestChain::new(backend.clone());\n\n    let transaction_pool = Arc::new(sc_transaction_pool::BasicPool::new_light(\n        config.transaction_pool.clone(),\n        config.prometheus_registry(),\n        task_manager.spawn_handle(),\n        client.clone(),\n        on_demand.clone(),\n    ));\n\n    let (grandpa_block_import, _) = sc_finality_grandpa::block_import(\n        client.clone(),\n        \u0026(client.clone() as Arc\u003c_\u003e),\n        select_chain.clone(),\n    )?;\n\n    let aura_block_import = sc_consensus_aura::AuraBlockImport::\u003c_, _, _, AuraPair\u003e::new(\n        grandpa_block_import.clone(),\n        client.clone(),\n    );\n\n    let import_queue = sc_consensus_aura::import_queue::\u003c_, _, _, AuraPair, _, _\u003e(\n        sc_consensus_aura::slot_duration(\u0026*client)?,\n        aura_block_import,\n        Some(Box::new(grandpa_block_import)),\n        client.clone(),\n        InherentDataProviders::new(),\n        \u0026task_manager.spawn_handle(),\n        config.prometheus_registry(),\n        sp_consensus::NeverCanAuthor,\n    )?;\n\n    let (network, network_status_sinks, system_rpc_tx, network_starter) =\n        sc_service::build_network(sc_service::BuildNetworkParams {\n            config: \u0026config,\n            client: client.clone(),\n            transaction_pool: transaction_pool.clone(),\n            spawn_handle: task_manager.spawn_handle(),\n            import_queue,\n            on_demand: Some(on_demand.clone()),\n            block_announce_validator_builder: None,\n        })?;\n\n    if config.offchain_worker.enabled {\n        sc_service::build_offchain_workers(\n            \u0026config,\n            backend.clone(),\n            task_manager.spawn_handle(),\n            client.clone(),\n            network.clone(),\n        );\n    }\n\n    sc_service::spawn_tasks(sc_service::SpawnTasksParams {\n        remote_blockchain: Some(backend.remote_blockchain()),\n        transaction_pool,\n        task_manager: \u0026mut task_manager,\n        on_demand: Some(on_demand),\n        rpc_extensions_builder: Box::new(|_, _| ()),\n        config,\n        client,\n        keystore: keystore_container.sync_keystore(),\n        backend,\n        network,\n        network_status_sinks,\n        system_rpc_tx,\n    })?;\n\n    network_starter.start_network();\n\n    Ok(task_manager)\n}\n","traces":[{"line":27,"address":[17390172,17384880],"length":1,"stats":{"Line":0},"fn_name":"new_partial"},{"line":53,"address":[17384958],"length":1,"stats":{"Line":0},"fn_name":null},{"line":54,"address":[17385165,17385215],"length":1,"stats":{"Line":0},"fn_name":null},{"line":58,"address":[17385188],"length":1,"stats":{"Line":0},"fn_name":null},{"line":60,"address":[17385403,17385866,17390636],"length":1,"stats":{"Line":0},"fn_name":null},{"line":62,"address":[17385770,17386058],"length":1,"stats":{"Line":0},"fn_name":null},{"line":64,"address":[17386082],"length":1,"stats":{"Line":0},"fn_name":null},{"line":67,"address":[17386144],"length":1,"stats":{"Line":0},"fn_name":null},{"line":68,"address":[17386174],"length":1,"stats":{"Line":0},"fn_name":null},{"line":69,"address":[17386285],"length":1,"stats":{"Line":0},"fn_name":null},{"line":70,"address":[17386312],"length":1,"stats":{"Line":0},"fn_name":null},{"line":71,"address":[17386355],"length":1,"stats":{"Line":0},"fn_name":null},{"line":75,"address":[17386497],"length":1,"stats":{"Line":0},"fn_name":null},{"line":76,"address":[17386544],"length":1,"stats":{"Line":0},"fn_name":null},{"line":77,"address":[17386614],"length":1,"stats":{"Line":0},"fn_name":null},{"line":81,"address":[17387280],"length":1,"stats":{"Line":0},"fn_name":null},{"line":82,"address":[17387303],"length":1,"stats":{"Line":0},"fn_name":null},{"line":86,"address":[17387373,17387501],"length":1,"stats":{"Line":0},"fn_name":null},{"line":87,"address":[17387491,17387689],"length":1,"stats":{"Line":0},"fn_name":null},{"line":88,"address":[17387713,17387790],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[17387837],"length":1,"stats":{"Line":0},"fn_name":null},{"line":90,"address":[17387884],"length":1,"stats":{"Line":0},"fn_name":null},{"line":91,"address":[17387923],"length":1,"stats":{"Line":0},"fn_name":null},{"line":92,"address":[17387950],"length":1,"stats":{"Line":0},"fn_name":null},{"line":93,"address":[17387985],"length":1,"stats":{"Line":0},"fn_name":null},{"line":96,"address":[17389338],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[17388668],"length":1,"stats":{"Line":0},"fn_name":null},{"line":98,"address":[17388684],"length":1,"stats":{"Line":0},"fn_name":null},{"line":99,"address":[17388700],"length":1,"stats":{"Line":0},"fn_name":null},{"line":100,"address":[17388781],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[17388861],"length":1,"stats":{"Line":0},"fn_name":null},{"line":102,"address":[17388901],"length":1,"stats":{"Line":0},"fn_name":null},{"line":103,"address":[17388917],"length":1,"stats":{"Line":0},"fn_name":null},{"line":104,"address":[17388933],"length":1,"stats":{"Line":0},"fn_name":null},{"line":105,"address":[17388949],"length":1,"stats":{"Line":0},"fn_name":null},{"line":109,"address":[17391232],"length":1,"stats":{"Line":0},"fn_name":"remote_keystore"},{"line":117,"address":[17391280,17401039],"length":1,"stats":{"Line":0},"fn_name":"new_full"},{"line":118,"address":[17391369,17402401,17392284],"length":1,"stats":{"Line":0},"fn_name":null},{"line":119,"address":[17391964],"length":1,"stats":{"Line":0},"fn_name":null},{"line":120,"address":[17391980],"length":1,"stats":{"Line":0},"fn_name":null},{"line":121,"address":[17392004],"length":1,"stats":{"Line":0},"fn_name":null},{"line":122,"address":[17392051],"length":1,"stats":{"Line":0},"fn_name":null},{"line":123,"address":[17392101],"length":1,"stats":{"Line":0},"fn_name":null},{"line":124,"address":[17392149],"length":1,"stats":{"Line":0},"fn_name":null},{"line":125,"address":[17392173],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[17392197],"length":1,"stats":{"Line":0},"fn_name":null},{"line":127,"address":[17391852],"length":1,"stats":{"Line":0},"fn_name":null},{"line":130,"address":[17392221,17392468,17392708],"length":1,"stats":{"Line":0},"fn_name":null},{"line":131,"address":[17392672,17392489],"length":1,"stats":{"Line":0},"fn_name":null},{"line":132,"address":[17392512,17392674],"length":1,"stats":{"Line":0},"fn_name":null},{"line":133,"address":[17392531],"length":1,"stats":{"Line":0},"fn_name":null},{"line":134,"address":[17392729,17392571],"length":1,"stats":{"Line":0},"fn_name":null},{"line":142,"address":[17393140,17393091],"length":1,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[17393097],"length":1,"stats":{"Line":0},"fn_name":null},{"line":147,"address":[17393360,17393718,17394155,17393983],"length":1,"stats":{"Line":0},"fn_name":null},{"line":150,"address":[17393155],"length":1,"stats":{"Line":0},"fn_name":null},{"line":151,"address":[17393194],"length":1,"stats":{"Line":0},"fn_name":null},{"line":152,"address":[17393225],"length":1,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[17393252],"length":1,"stats":{"Line":0},"fn_name":null},{"line":155,"address":[17393340],"length":1,"stats":{"Line":0},"fn_name":null},{"line":158,"address":[17394458,17394190,17393965],"length":1,"stats":{"Line":0},"fn_name":null},{"line":161,"address":[17394175,17394203],"length":1,"stats":{"Line":0},"fn_name":null},{"line":162,"address":[17394219],"length":1,"stats":{"Line":0},"fn_name":null},{"line":163,"address":[17394262],"length":1,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[17394309],"length":1,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[17394468],"length":1,"stats":{"Line":0},"fn_name":null},{"line":169,"address":[17394498],"length":1,"stats":{"Line":0},"fn_name":null},{"line":170,"address":[17394511],"length":1,"stats":{"Line":0},"fn_name":null},{"line":171,"address":[17394519],"length":1,"stats":{"Line":0},"fn_name":null},{"line":172,"address":[17394570],"length":1,"stats":{"Line":0},"fn_name":null},{"line":173,"address":[17394586],"length":1,"stats":{"Line":0},"fn_name":null},{"line":176,"address":[17394670],"length":1,"stats":{"Line":0},"fn_name":null},{"line":177,"address":[17394717],"length":1,"stats":{"Line":0},"fn_name":null},{"line":179,"address":[5551755,5551536],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":180,"address":[5551643],"length":1,"stats":{"Line":0},"fn_name":null},{"line":181,"address":[5551581],"length":1,"stats":{"Line":0},"fn_name":null},{"line":182,"address":[5551625],"length":1,"stats":{"Line":0},"fn_name":null},{"line":186,"address":[5551673],"length":1,"stats":{"Line":0},"fn_name":null},{"line":190,"address":[17395705,17396058,17395330,17395886],"length":1,"stats":{"Line":0},"fn_name":null},{"line":192,"address":[17394940],"length":1,"stats":{"Line":0},"fn_name":null},{"line":193,"address":[17394979],"length":1,"stats":{"Line":0},"fn_name":null},{"line":194,"address":[17395010],"length":1,"stats":{"Line":0},"fn_name":null},{"line":196,"address":[17395085],"length":1,"stats":{"Line":0},"fn_name":null},{"line":197,"address":[17395100],"length":1,"stats":{"Line":0},"fn_name":null},{"line":198,"address":[17395116],"length":1,"stats":{"Line":0},"fn_name":null},{"line":199,"address":[17395128],"length":1,"stats":{"Line":0},"fn_name":null},{"line":200,"address":[17395140],"length":1,"stats":{"Line":0},"fn_name":null},{"line":201,"address":[17395156],"length":1,"stats":{"Line":0},"fn_name":null},{"line":202,"address":[17395180],"length":1,"stats":{"Line":0},"fn_name":null},{"line":203,"address":[17395220],"length":1,"stats":{"Line":0},"fn_name":null},{"line":206,"address":[17396077,17395857,17396110],"length":1,"stats":{"Line":0},"fn_name":null},{"line":208,"address":[17396083,17396115],"length":1,"stats":{"Line":0},"fn_name":null},{"line":209,"address":[17396131],"length":1,"stats":{"Line":0},"fn_name":null},{"line":210,"address":[17396170],"length":1,"stats":{"Line":0},"fn_name":null},{"line":211,"address":[17396210],"length":1,"stats":{"Line":0},"fn_name":null},{"line":214,"address":[17396336],"length":1,"stats":{"Line":0},"fn_name":null},{"line":218,"address":[17396564,17396436],"length":1,"stats":{"Line":0},"fn_name":null},{"line":219,"address":[17396546,17396760],"length":1,"stats":{"Line":0},"fn_name":null},{"line":220,"address":[17396776],"length":1,"stats":{"Line":0},"fn_name":null},{"line":221,"address":[17396808],"length":1,"stats":{"Line":0},"fn_name":null},{"line":222,"address":[17396936],"length":1,"stats":{"Line":0},"fn_name":null},{"line":223,"address":[17397024],"length":1,"stats":{"Line":0},"fn_name":null},{"line":224,"address":[17397071],"length":1,"stats":{"Line":0},"fn_name":null},{"line":226,"address":[17397110],"length":1,"stats":{"Line":0},"fn_name":null},{"line":227,"address":[17397117],"length":1,"stats":{"Line":0},"fn_name":null},{"line":228,"address":[17397159],"length":1,"stats":{"Line":0},"fn_name":null},{"line":233,"address":[17397902,17397627],"length":1,"stats":{"Line":0},"fn_name":null},{"line":235,"address":[17397853,17400707,17397945],"length":1,"stats":{"Line":0},"fn_name":null},{"line":240,"address":[17397988,17398082],"length":1,"stats":{"Line":0},"fn_name":null},{"line":241,"address":[17398084,17398027],"length":1,"stats":{"Line":0},"fn_name":null},{"line":243,"address":[17398062],"length":1,"stats":{"Line":0},"fn_name":null},{"line":248,"address":[17398129],"length":1,"stats":{"Line":0},"fn_name":null},{"line":250,"address":[17398166],"length":1,"stats":{"Line":0},"fn_name":null},{"line":253,"address":[17398278],"length":1,"stats":{"Line":0},"fn_name":null},{"line":256,"address":[17398480,17398737],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[5551808,5551815],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":268,"address":[17398750],"length":1,"stats":{"Line":0},"fn_name":null},{"line":270,"address":[17398820],"length":1,"stats":{"Line":0},"fn_name":null},{"line":275,"address":[17399360,17399087],"length":1,"stats":{"Line":0},"fn_name":null},{"line":277,"address":[17399114,17399406],"length":1,"stats":{"Line":0},"fn_name":null},{"line":281,"address":[17399605],"length":1,"stats":{"Line":0},"fn_name":null},{"line":282,"address":[17399632],"length":1,"stats":{"Line":0},"fn_name":null},{"line":286,"address":[17403472,17410305],"length":1,"stats":{"Line":0},"fn_name":"new_light"},{"line":287,"address":[17404127,17411117,17403527],"length":1,"stats":{"Line":0},"fn_name":null},{"line":290,"address":[17404327,17404082],"length":1,"stats":{"Line":0},"fn_name":null},{"line":293,"address":[17404089],"length":1,"stats":{"Line":0},"fn_name":null},{"line":295,"address":[17404342],"length":1,"stats":{"Line":0},"fn_name":null},{"line":297,"address":[17404558,17404653],"length":1,"stats":{"Line":0},"fn_name":null},{"line":298,"address":[17404404],"length":1,"stats":{"Line":0},"fn_name":null},{"line":299,"address":[17404426],"length":1,"stats":{"Line":0},"fn_name":null},{"line":300,"address":[17404453],"length":1,"stats":{"Line":0},"fn_name":null},{"line":301,"address":[17404496],"length":1,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[17404543],"length":1,"stats":{"Line":0},"fn_name":null},{"line":306,"address":[17404700],"length":1,"stats":{"Line":0},"fn_name":null},{"line":307,"address":[17404747],"length":1,"stats":{"Line":0},"fn_name":null},{"line":308,"address":[17404817],"length":1,"stats":{"Line":0},"fn_name":null},{"line":312,"address":[17405411],"length":1,"stats":{"Line":0},"fn_name":null},{"line":313,"address":[17405434],"length":1,"stats":{"Line":0},"fn_name":null},{"line":317,"address":[17405940,17405512],"length":1,"stats":{"Line":0},"fn_name":null},{"line":318,"address":[17405609],"length":1,"stats":{"Line":0},"fn_name":null},{"line":319,"address":[17406128,17405737],"length":1,"stats":{"Line":0},"fn_name":null},{"line":320,"address":[17406175],"length":1,"stats":{"Line":0},"fn_name":null},{"line":321,"address":[17406214],"length":1,"stats":{"Line":0},"fn_name":null},{"line":322,"address":[17406249],"length":1,"stats":{"Line":0},"fn_name":null},{"line":323,"address":[17406284],"length":1,"stats":{"Line":0},"fn_name":null},{"line":327,"address":[17407615],"length":1,"stats":{"Line":0},"fn_name":null},{"line":330,"address":[17406914],"length":1,"stats":{"Line":0},"fn_name":null},{"line":331,"address":[17406953],"length":1,"stats":{"Line":0},"fn_name":null},{"line":332,"address":[17406984],"length":1,"stats":{"Line":0},"fn_name":null},{"line":333,"address":[17407011],"length":1,"stats":{"Line":0},"fn_name":null},{"line":334,"address":[17407107],"length":1,"stats":{"Line":0},"fn_name":null},{"line":335,"address":[17407138],"length":1,"stats":{"Line":0},"fn_name":null},{"line":338,"address":[17407992,17408260,17407767],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[17407977,17408005],"length":1,"stats":{"Line":0},"fn_name":null},{"line":342,"address":[17408021],"length":1,"stats":{"Line":0},"fn_name":null},{"line":343,"address":[17408064],"length":1,"stats":{"Line":0},"fn_name":null},{"line":344,"address":[17408111],"length":1,"stats":{"Line":0},"fn_name":null},{"line":348,"address":[17409064,17409317,17408713,17409178],"length":1,"stats":{"Line":0},"fn_name":null},{"line":349,"address":[17408270],"length":1,"stats":{"Line":0},"fn_name":null},{"line":350,"address":[17408348],"length":1,"stats":{"Line":0},"fn_name":null},{"line":352,"address":[17408372],"length":1,"stats":{"Line":0},"fn_name":null},{"line":353,"address":[5551931,5551904],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}"},{"line":354,"address":[17408467],"length":1,"stats":{"Line":0},"fn_name":null},{"line":355,"address":[17408505],"length":1,"stats":{"Line":0},"fn_name":null},{"line":356,"address":[17408529],"length":1,"stats":{"Line":0},"fn_name":null},{"line":357,"address":[17408572],"length":1,"stats":{"Line":0},"fn_name":null},{"line":358,"address":[17408588],"length":1,"stats":{"Line":0},"fn_name":null},{"line":359,"address":[17408604],"length":1,"stats":{"Line":0},"fn_name":null},{"line":360,"address":[17408628],"length":1,"stats":{"Line":0},"fn_name":null},{"line":363,"address":[17409346],"length":1,"stats":{"Line":0},"fn_name":null},{"line":365,"address":[17409373],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":0,"coverable":171},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","lib.rs"],"content":"//! # Project description\n//!\n//! Substrate-based runtime version of Curve automated market maker will be a 7 week long project which will deliver a following functionality:\n//!\n//! - Low slippage, high efficiency stablecoin exchange\n//!\n//! - High efficiency exchange tool for other homogeneous assets on Polkadot (e.g. wrapped assets)\n//!\n//! - Low risk fee income for liquidity providers.\n//!\n//! - Liquidity superfluidity with additional rewards from supplying liquidity to lending protocols such as Equilibrium and Acala.\n//!\n//! Curve AMM is of paramount importance to the entire Polkadot ecosystem. With the introduction of parachains and interconnection of different Polka-based projects the issue of multiple wrapped assets representing the same underlying assets arises.\n//!\n//! Consider ETH, for example. There are multiple bridging solutions who promise to introduce wrapped-ETH and other ERC-20 tokens to Polkadot. There needs to be a way to manage or exchange all of these representations of the same underlying asset inside Polkadot with low cost and low slippage, and that is where the Curve AMM comes into play.\n//!\n//! Curve’s unique stableswap invariant utilizes liquidity much more efficiently compared to all existing DEXes for stablecoins at already several hundred USD TVL (total value locked). Since initial liquidity on Polkadot is hardly going to be very large, proposed efficiency is VERY important for the ecosystem to flourish.\n//!\n//! ## Setup\n//!\n//! Before using Equilibrium Curve Amm Pallet in your code you need to setup it.\n//!\n//! For implementation examples please see `lib.rs` file from `runtime/src` directory and `mock.rs` file\n//! from `pallets/equilibrium-curve-amm/src` directory.\n//!\n//! Please note that all subsequent code snippets are for reference purposes only.\n//! Code for your specific runtime implementation can differ from these examples drastically.\n//!\n//! ### Runtime crate\n//!\n//! First of all you need to define some parameters.\n//!\n//! ```ignore\n//! parameter_types! {\n//!     // Anti ddos fee for pool creation\n//!     pub const CreationFee: Balance = 10_000;\n//!     // Module account\n//!     pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n//!     // Value that represents precision used for fixed-point iteration method\n//!     pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000_000);\n//! }\n//! ```\n//!\n//! Define convertion routines. They used by pallet to convert between various external types\n//! and internal `Number` type for math calculations:\n//!\n//! ```ignore\n//! pub struct FixedU128Convert;\n//!\n//! // Convertion from Permill to internal number representation\n//! impl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: Permill) -\u003e FixedU128 {\n//!         a.into()\n//!     }\n//! }\n//!\n//! // Convertion from Balance to internal number representation\n//! impl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: Balance) -\u003e FixedU128 {\n//!         FixedU128::saturating_from_integer(a)\n//!     }\n//! }\n//!\n//! // Convertion from byte to internal number representation\n//! impl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: u8) -\u003e FixedU128 {\n//!         FixedU128::saturating_from_integer(a)\n//!     }\n//! }\n//!\n//! // Convertion from usize to internal number represenation\n//! impl equilibrium_curve_amm::traits::CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n//!     fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n//!         Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n//!     }\n//! }\n//!\n//! // Convertion from internal number representation to Balance\n//! impl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n//!     fn convert(a: FixedU128) -\u003e Balance {\n//!         a.into_inner() / FixedU128::accuracy()\n//!     }\n//! }\n//! ```\n//!\n//! Define adapter for asset system used in your runtime. See `FrameAssets` struct from `runtime/src/lib.rs` file for\n//! example implementation that uses `pallet-assets` under the hood.\n//!\n//! ```ignore\n//! pub struct FrameAssets;\n//! impl equilibrium_curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for FrameAssets {\n//!     // Creates new asset\n//!     fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Mint tokens for the specified asset\n//!     fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Burn tokens for the specified asset\n//!     fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Transfer tokens for the specified asset\n//!     fn transfer(\n//!         asset: AssetId,\n//!         source: \u0026AccountId,\n//!         dest: \u0026AccountId,\n//!         amount: Balance,\n//!     ) -\u003e DispatchResult {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Checks the balance for the specified asset\n//!     fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n//!         panic!(\"Not implemented\");\n//!     }\n//!\n//!     // Returns total issuance of the specified asset\n//!     fn total_issuance(asset: AssetId) -\u003e Balance {\n//!         panic!(\"Not implemented\");\n//!     }\n//! }\n//! ```\n//!\n//! Implement Financial Pallet for your Runtime:\n//!\n//! ```ignore\n//! impl equilibrium_curve_amm::Config for Runtime {\n//!     // The overarching event type.\n//!     type Event = Event;\n//!     // Identificator type of Asset\n//!     type AssetId = AssetId;\n//!     // The balance of an account\n//!     type Balance = Balance;\n//!     // Standart balances pallet for utility token or adapter\n//!     type Currency = pallet_balances::Pallet\u003cRuntime\u003e;\n//!     // Anti ddos fee for pool creation\n//!     type CreationFee = CreationFee;\n//!     // External implementation for required opeartions with assets\n//!     type Assets = FrameAssets;\n//!     type OnUnbalanced = EmptyUnbalanceHandler;\n//!     // Module account\n//!     type ModuleId = CurveAmmModuleId;\n//!     // Number type for underlying calculations\n//!     type Number = Number;\n//!     // Value that represents precision used for fixed-point iteration method\n//!     type Precision = Precision;\n//!     // Convertions between `Number` and various representations\n//!     type Convert = FixedU128Convert;\n//! }\n//! ```\n\n#![warn(missing_docs)]\n#![cfg_attr(not(feature = \"std\"), no_std)]\n\npub use pallet::*;\n\n#[cfg(test)]\nmod mock;\n\n#[cfg(test)]\nmod tests;\n\nuse frame_support::codec::{Decode, Encode};\nuse frame_support::traits::Get;\nuse sp_runtime::traits::{CheckedAdd, CheckedDiv, CheckedMul, CheckedSub, Convert};\nuse sp_runtime::Permill;\nuse sp_std::prelude::*;\nuse traits::CheckedConvert;\n\n#[frame_support::pallet]\npub mod pallet {\n    use super::{traits::Assets, traits::CheckedConvert, PoolId, PoolInfo, PoolTokenIndex};\n    use frame_support::{\n        dispatch::{Codec, DispatchResult, DispatchResultWithPostInfo},\n        pallet_prelude::*,\n        traits::{Currency, ExistenceRequirement, OnUnbalanced, WithdrawReasons},\n    };\n    use frame_system::pallet_prelude::*;\n    use sp_runtime::traits::{\n        AccountIdConversion, CheckedAdd, CheckedDiv, CheckedMul, CheckedSub, Convert,\n    };\n    use sp_runtime::{ModuleId, Permill};\n    use sp_std::collections::btree_set::BTreeSet;\n    use sp_std::iter::FromIterator;\n    use sp_std::prelude::*;\n\n    /// Config of Equilibrium Curve Amm pallet\n    #[pallet::config]\n    pub trait Config: frame_system::Config {\n        /// The overarching event type.\n        type Event: From\u003cEvent\u003cSelf\u003e\u003e + IsType\u003c\u003cSelf as frame_system::Config\u003e::Event\u003e;\n\n        /// Identificator type of Asset\n        type AssetId: Parameter + Ord + Copy;\n        /// The balance of an account\n        type Balance: Parameter + Codec + Copy + Ord;\n        /// External implementation for required opeartions with assets\n        type Assets: super::traits::Assets\u003cSelf::AssetId, Self::Balance, Self::AccountId\u003e;\n        /// Standart balances pallet for utility token or adapter\n        type Currency: Currency\u003cSelf::AccountId, Balance = Self::Balance\u003e;\n        /// Anti ddos fee for pool creation\n        #[pallet::constant]\n        type CreationFee: Get\u003cSelf::Balance\u003e;\n        /// What to do with fee (burn, transfer to treasury, etc)\n        type OnUnbalanced: OnUnbalanced\u003c\n            \u003cSelf::Currency as Currency\u003cSelf::AccountId\u003e\u003e::NegativeImbalance,\n        \u003e;\n        /// Module account\n        #[pallet::constant]\n        type ModuleId: Get\u003cModuleId\u003e;\n\n        /// Number type for underlying calculations\n        type Number: Parameter + CheckedAdd + CheckedSub + CheckedMul + CheckedDiv + Copy + Eq + Ord;\n        /// Value that represents precision used for fixed-point iteration method\n        type Precision: Get\u003cSelf::Number\u003e;\n        /// Convertions between `Self::Number` and various representations\n        type Convert: Convert\u003cPermill, Self::Number\u003e\n            + Convert\u003cSelf::Balance, Self::Number\u003e\n            + Convert\u003cu8, Self::Number\u003e\n            + CheckedConvert\u003cusize, Self::Number\u003e\n            + Convert\u003cSelf::Number, Self::Balance\u003e;\n    }\n\n    #[pallet::pallet]\n    #[pallet::generate_store(pub(super) trait Store)]\n    pub struct Pallet\u003cT\u003e(_);\n\n    /// Current number of pools\n    #[pallet::storage]\n    #[pallet::getter(fn pool_count)]\n    pub type PoolCount\u003cT: Config\u003e = StorageValue\u003c_, PoolId, ValueQuery\u003e;\n\n    /// Existing pools\n    #[pallet::storage]\n    #[pallet::getter(fn pools)]\n    pub type Pools\u003cT: Config\u003e =\n        StorageMap\u003c_, Blake2_128Concat, PoolId, PoolInfo\u003cT::AssetId, T::Number, T::Balance\u003e\u003e;\n\n    /// Event type for Equilibrium Curve AMM pallet\n    #[pallet::event]\n    #[pallet::metadata(T::AccountId = \"AccountId\")]\n    #[pallet::generate_deposit(pub(super) fn deposit_event)]\n    pub enum Event\u003cT: Config\u003e {\n        /// Pool with specified id created successfully\n        CreatePool(T::AccountId, PoolId),\n        /// Liquidity added into pool\n        AddLiquidity(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n            T::Balance,\n        ),\n        /// Token exchange happened\n        TokenExchange(\n            T::AccountId,\n            PoolId,\n            PoolTokenIndex,\n            T::Balance,\n            PoolTokenIndex,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool in balanced way\n        RemoveLiquidity(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool in imbalanced way\n        RemoveLiquidityImbalance(\n            T::AccountId,\n            PoolId,\n            Vec\u003cT::Balance\u003e,\n            Vec\u003cT::Balance\u003e,\n            T::Balance,\n            T::Balance,\n        ),\n        /// Liquidity removed from pool only for one token\n        RemoveLiquidityOne(T::AccountId, PoolId, T::Balance, T::Balance, T::Balance),\n    }\n\n    /// Error type for Equilibrium Curve AMM pallet\n    #[pallet::error]\n    pub enum Error\u003cT\u003e {\n        /// Could not create new asset\n        AssetNotCreated,\n        /// Values in the storage are inconsistent\n        InconsistentStorage,\n        /// Not enough assets provided\n        NotEnoughAssets,\n        /// Some provided assets are not unique\n        DuplicateAssets,\n        /// Pool with specified id is not found\n        PoolNotFound,\n        /// Error occurred while performing math calculations\n        Math,\n        /// Specified asset amount is wrong\n        WrongAssetAmount,\n        /// Required amount of some token did not reached during adding or removing liquidity\n        RequiredAmountNotReached,\n        /// Source does not have required amount of coins to complete operation\n        InsufficientFunds,\n    }\n\n    #[pallet::hooks]\n    impl\u003cT: Config\u003e Hooks\u003cBlockNumberFor\u003cT\u003e\u003e for Pallet\u003cT\u003e {}\n\n    #[pallet::call]\n    impl\u003cT: Config\u003e Pallet\u003cT\u003e {\n        /// Creates pool, taking creation fee from the caller\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn create_pool(\n            origin: OriginFor\u003cT\u003e,\n            assets: Vec\u003cT::AssetId\u003e,\n            amplification: T::Number,\n            fee: Permill,\n            admin_fee: Permill,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            // Assets related checks\n            ensure!(assets.len() \u003e 1, Error::\u003cT\u003e::NotEnoughAssets);\n            let unique_assets = BTreeSet::\u003cT::AssetId\u003e::from_iter(assets.iter().copied());\n            ensure!(\n                unique_assets.len() == assets.len(),\n                Error::\u003cT\u003e::DuplicateAssets\n            );\n\n            // Take fee\n            let creation_fee = T::CreationFee::get();\n            let imbalance = T::Currency::withdraw(\n                \u0026who,\n                creation_fee,\n                WithdrawReasons::FEE,\n                ExistenceRequirement::AllowDeath,\n            )\n            .map_err(|_| Error::\u003cT\u003e::InsufficientFunds)?;\n            T::OnUnbalanced::on_unbalanced(imbalance);\n\n            // Add new pool\n            let pool_id =\n                PoolCount::\u003cT\u003e::try_mutate(|pool_count| -\u003e Result\u003cPoolId, DispatchError\u003e {\n                    let pool_id = *pool_count;\n\n                    Pools::\u003cT\u003e::try_mutate_exists(pool_id, |maybe_pool_info| -\u003e DispatchResult {\n                        // We expect that PoolInfos have sequential keys.\n                        // No PoolInfo can have key greater or equal to PoolCount\n                        ensure!(maybe_pool_info.is_none(), Error::\u003cT\u003e::InconsistentStorage);\n\n                        let asset =\n                            T::Assets::create_asset().map_err(|_| Error::\u003cT\u003e::AssetNotCreated)?;\n\n                        let balances = vec![\n                            Self::convert_number_to_balance(Self::get_number(0));\n                            assets.len()\n                        ];\n\n                        *maybe_pool_info = Some(PoolInfo {\n                            pool_asset: asset,\n                            assets: assets,\n                            amplification,\n                            fee,\n                            admin_fee,\n                            balances,\n                        });\n\n                        Ok(())\n                    })?;\n\n                    *pool_count = pool_id\n                        .checked_add(1)\n                        .ok_or(Error::\u003cT\u003e::InconsistentStorage)?;\n\n                    Ok(pool_id)\n                })?;\n\n            Self::deposit_event(Event::CreatePool(who.clone(), pool_id));\n\n            Ok(().into())\n        }\n\n        /// Deposit coins into the pool.\n        /// `amounts` - list of amounts of coins to deposit,\n        /// `min_mint_amount` - minimum amout of LP tokens to mint from the deposit.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn add_liquidity(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amounts: Vec\u003cT::Balance\u003e,\n            min_mint_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let (provider, pool_id, token_amounts, fees, invariant, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let old_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    let d0 = Self::get_d(\u0026old_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    let mut new_balances = old_balances.clone();\n                    let n_amounts = amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_balance_to_number)\n                        .collect::\u003cVec\u003c_\u003e\u003e();\n                    for i in 0..n_coins {\n                        if token_supply == zero {\n                            ensure!(n_amounts[i] \u003e zero, Error::\u003cT\u003e::WrongAssetAmount);\n                        }\n                        new_balances[i] = new_balances[i]\n                            .checked_add(\u0026n_amounts[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n\n                    let d1 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(d1 \u003e d0, Error::\u003cT\u003e::WrongAssetAmount);\n\n                    let mut fees = vec![zero; n_coins];\n                    let mint_amount;\n\n                    // Only account for fees if we are not the first to deposit\n                    if token_supply \u003e zero {\n                        // Deposit x + withdraw y would charge about same\n                        // fees as a swap. Otherwise, one could exchange w/o paying fees.\n                        // And this formula leads to exactly that equality\n                        // fee = pool.fee * n_coins / (4 * (n_coins - 1))\n                        let fee = (|| {\n                            let n_coins =\n                                \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n_coins)?;\n                            let one = Self::get_number(1);\n                            let four = Self::get_number(4);\n\n                            \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee)\n                                .checked_mul(\u0026n_coins)?\n                                .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                        let admin_fee =\n                            \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                        for i in 0..n_coins {\n                            // ideal_balance = d1 * old_balances[i] / d0\n                            let ideal_balance =\n                                (|| d1.checked_mul(\u0026old_balances[i])?.checked_div(\u0026d0))()\n                                    .ok_or(Error::\u003cT\u003e::Math)?;\n\n                            let new_balance = new_balances[i];\n\n                            // difference = abs(ideal_balance - new_balance)\n                            let difference = (if ideal_balance \u003e new_balance {\n                                ideal_balance.checked_sub(\u0026new_balance)\n                            } else {\n                                new_balance.checked_sub(\u0026ideal_balance)\n                            })\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n\n                            fees[i] = fee.checked_mul(\u0026difference).ok_or(Error::\u003cT\u003e::Math)?;\n                            // new_pool_balance = new_balance - (fees[i] * admin_fee)\n                            let new_pool_balance =\n                                (|| new_balance.checked_sub(\u0026fees[i].checked_mul(\u0026admin_fee)?))()\n                                    .ok_or(Error::\u003cT\u003e::Math)?;\n                            pool.balances[i] = Self::convert_number_to_balance(new_pool_balance);\n\n                            new_balances[i] = new_balances[i]\n                                .checked_sub(\u0026fees[i])\n                                .ok_or(Error::\u003cT\u003e::Math)?;\n                        }\n                        let d2 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // mint_amount = token_supply * (d2 - d0) / d0\n                        mint_amount = (|| {\n                            token_supply\n                                .checked_mul(\u0026d2.checked_sub(\u0026d0)?)?\n                                .checked_div(\u0026d0)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                    } else {\n                        pool.balances = Self::convert_vec_number_to_balance(new_balances);\n                        mint_amount = d1;\n                    }\n\n                    ensure!(\n                        mint_amount \u003e= Self::convert_balance_to_number(min_mint_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_add(\u0026mint_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // Ensure that for all tokens user has sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026who) \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026who,\n                                \u0026T::ModuleId::get().into_account(),\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    T::Assets::mint(\n                        pool.pool_asset,\n                        \u0026who,\n                        Self::convert_number_to_balance(mint_amount),\n                    )?;\n\n                    let fees = fees\n                        .into_iter()\n                        .map(|x| Self::convert_number_to_balance(x))\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(d1),\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::AddLiquidity(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                invariant,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Perform an exchange between two coins.\n        /// `i` - index value of the coin to send,\n        /// `j` - index value of the coin to recieve,\n        /// `dx` - amount of `i` being exchanged,\n        /// `min_dy` - minimum amount of `j` to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn exchange(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            i: PoolTokenIndex,\n            j: PoolTokenIndex,\n            dx: T::Balance,\n            min_dy: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let one = Self::get_number(1);\n\n            // sold_id, tokens_sold, bought_id, tokens_bought\n            let (provider, pool_id, dy) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let i = i as usize;\n                    let j = j as usize;\n\n                    let n_dx = Self::convert_balance_to_number(dx);\n                    let n_min_dy = Self::convert_balance_to_number(min_dy);\n\n                    let xp = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    // xp[i] + dx\n                    let x = xp[i].checked_add(\u0026n_dx).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let n_coins = pool.assets.len();\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n                    let y = Self::get_y(i, j, x, \u0026xp, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // -1 just in case there were some rounding errors\n                    // dy = xp[j] - y - 1\n                    let n_dy =\n                        (|| xp[j].checked_sub(\u0026y)?.checked_sub(\u0026one))().ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let fee = \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee);\n                    let dy_fee = n_dy.checked_mul(\u0026fee).ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(n_dy \u003e= n_min_dy, Error::\u003cT\u003e::RequiredAmountNotReached);\n\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                    let dy_admin_fee = dy_fee.checked_mul(\u0026admin_fee).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    pool.balances[i] = Self::convert_number_to_balance(\n                        xp[i].checked_add(\u0026n_dx).ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n                    // When rounding errors happen, we undercharge admin fee in favor of LP\n                    // pool.balances[j] = xp[j] - n_dy - dy_admin_fee\n                    pool.balances[j] = Self::convert_number_to_balance(\n                        (|| xp[j].checked_sub(\u0026n_dy)?.checked_sub(\u0026dy_admin_fee))()\n                            .ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n\n                    let dy = Self::convert_number_to_balance(n_dy);\n\n                    T::Assets::transfer(\n                        pool.assets[i],\n                        \u0026who,\n                        \u0026T::ModuleId::get().into_account(),\n                        dx,\n                    )?;\n\n                    T::Assets::transfer(\n                        pool.assets[j],\n                        \u0026T::ModuleId::get().into_account(),\n                        \u0026who,\n                        dy,\n                    )?;\n\n                    Ok((who.clone(), pool_id, dy))\n                })?;\n\n            Self::deposit_event(Event::TokenExchange(provider, pool_id, i, dx, j, dy));\n\n            Ok(().into())\n        }\n\n        /// Withdraw coins from the pool.\n        /// Withdrawal amount are based on current deposit ratios.\n        /// `amount` - quantity of LP tokens to burn in the withdrawal,\n        /// `min_amounts` - minimum amounts of underlying coins to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amount: T::Balance,\n            min_amounts: Vec\u003cT::Balance\u003e,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let n_amount = Self::convert_balance_to_number(amount);\n\n            let min_amounts = min_amounts\n                .into_iter()\n                .map(Self::convert_balance_to_number)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            let (provider, pool_id, token_amounts, fees, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n\n                    let mut n_amounts = vec![zero; n_coins];\n\n                    for i in 0..n_coins {\n                        let old_balance = Self::convert_balance_to_number(pool.balances[i]);\n                        // value = old_balance * n_amount / token_supply\n                        let value = (|| {\n                            old_balance\n                                .checked_mul(\u0026n_amount)?\n                                .checked_div(\u0026token_supply)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n                        ensure!(\n                            value \u003e= min_amounts[i],\n                            Error::\u003cT\u003e::RequiredAmountNotReached\n                        );\n\n                        // pool.balances[i] = old_balance - value\n                        pool.balances[i] = Self::convert_number_to_balance(\n                            old_balance\n                                .checked_sub(\u0026value)\n                                .ok_or(Error::\u003cT\u003e::InsufficientFunds)?,\n                        );\n\n                        n_amounts[i] = value;\n                    }\n\n                    let amounts = n_amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_number_to_balance)\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    let new_token_supply = token_supply\n                        .checked_sub(\u0026n_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let fees = vec![Self::convert_number_to_balance(zero); n_coins];\n\n                    T::Assets::burn(pool.pool_asset, \u0026who, amount)?;\n\n                    // Ensure that for all tokens we have sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                                \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026T::ModuleId::get().into_account(),\n                                \u0026who,\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidity(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Withdraw coins from the pool in an imbalanced amount.\n        /// `amounts` - list of amounts of underlying coins to withdraw,\n        /// `max_burn_amount` - maximum amount of LP token to burn in the withdrawal.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity_imbalance(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            amounts: Vec\u003cT::Balance\u003e,\n            max_burn_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let zero = Self::get_number(0);\n\n            let (provider, pool_id, token_amounts, fees, invariant, token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let old_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n\n                    let d0 = Self::get_d(\u0026old_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let mut new_balances = old_balances.clone();\n                    let n_amounts = amounts\n                        .iter()\n                        .copied()\n                        .map(Self::convert_balance_to_number)\n                        .collect::\u003cVec\u003c_\u003e\u003e();\n                    for i in 0..n_coins {\n                        new_balances[i] = new_balances[i]\n                            .checked_sub(\u0026n_amounts[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n\n                    let d1 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    // Deposit x + withdraw y would charge about same\n                    // fees as a swap. Otherwise, one could exchange w/o paying fees.\n                    // And this formula leads to exactly that equality\n                    // fee = pool.fee * n_coins / (4 * (n_coins - 1))\n                    let fee = (|| {\n                        let n_coins =\n                            \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n_coins)?;\n                        let one = Self::get_number(1);\n                        let four = one\n                            .checked_add(\u0026one)?\n                            .checked_add(\u0026one)?\n                            .checked_add(\u0026one)?;\n\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee)\n                            .checked_mul(\u0026n_coins)?\n                            .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)\n                    })()\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n                    let mut fees = vec![zero; n_coins];\n                    for i in 0..n_coins {\n                        let new_balance = new_balances[i];\n\n                        ensure!(d0 != zero, Error::\u003cT\u003e::InsufficientFunds);\n                        // ideal_balance = d1 * old_balances[i] / d0\n                        let ideal_balance =\n                            (|| d1.checked_mul(\u0026old_balances[i])?.checked_div(\u0026d0))()\n                                .ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // difference = abs(ideal_balance - new_balance)\n                        let difference = (if ideal_balance \u003e new_balance {\n                            ideal_balance.checked_sub(\u0026new_balance)\n                        } else {\n                            new_balance.checked_sub(\u0026ideal_balance)\n                        })\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                        fees[i] = fee.checked_mul(\u0026difference).ok_or(Error::\u003cT\u003e::Math)?;\n\n                        // pool.balances[i] = new_balance - (fees[i] * admin_fee)\n                        pool.balances[i] = Self::convert_number_to_balance(\n                            (|| new_balance.checked_sub(\u0026fees[i].checked_mul(\u0026admin_fee)?))()\n                                .ok_or(Error::\u003cT\u003e::Math)?,\n                        );\n\n                        new_balances[i] = new_balances[i]\n                            .checked_sub(\u0026fees[i])\n                            .ok_or(Error::\u003cT\u003e::Math)?;\n                    }\n                    let d2 = Self::get_d(\u0026new_balances, ann).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    // token_amount = token_supply * (d0 - d2) / d0\n                    let token_amount = (|| {\n                        token_supply\n                            .checked_mul(\u0026d0.checked_sub(\u0026d2)?)?\n                            .checked_div(\u0026d0)\n                    })()\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n                    ensure!(token_amount != zero, Error::\u003cT\u003e::WrongAssetAmount);\n                    // In case of rounding errors - make it unfavorable for the \"attacker\"\n                    let token_amount = token_amount\n                        .checked_add(\u0026T::Precision::get())\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    ensure!(\n                        token_amount \u003c= Self::convert_balance_to_number(max_burn_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_sub(\u0026token_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    T::Assets::burn(\n                        pool.pool_asset,\n                        \u0026who,\n                        Self::convert_number_to_balance(token_amount),\n                    )?;\n\n                    // Ensure that for all tokens we have sufficient amount\n                    for i in 0..n_coins {\n                        ensure!(\n                            T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                                \u003e= amounts[i],\n                            Error::\u003cT\u003e::InsufficientFunds\n                        );\n                    }\n\n                    for i in 0..n_coins {\n                        if n_amounts[i] \u003e zero {\n                            T::Assets::transfer(\n                                pool.assets[i],\n                                \u0026T::ModuleId::get().into_account(),\n                                \u0026who,\n                                amounts[i],\n                            )?;\n                        }\n                    }\n\n                    let fees = fees\n                        .into_iter()\n                        .map(|x| Self::convert_number_to_balance(x))\n                        .collect::\u003cVec\u003cT::Balance\u003e\u003e();\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        amounts,\n                        fees,\n                        Self::convert_number_to_balance(d1),\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidityImbalance(\n                provider,\n                pool_id,\n                token_amounts,\n                fees,\n                invariant,\n                token_supply,\n            ));\n\n            Ok(().into())\n        }\n\n        /// Withdraw a signe coin from the pool.\n        /// `token_amount` - amount of LP tokens to burn in the withdrawal,\n        /// `i` - index value of the coin to withdraw,\n        /// `min_amount` - minimum amount of coin to receive.\n        #[pallet::weight(10_000 + T::DbWeight::get().reads_writes(1,1))]\n        pub fn remove_liquidity_one_coin(\n            origin: OriginFor\u003cT\u003e,\n            pool_id: PoolId,\n            token_amount: T::Balance,\n            i: PoolTokenIndex,\n            min_amount: T::Balance,\n        ) -\u003e DispatchResultWithPostInfo {\n            let who = ensure_signed(origin)?;\n\n            let i = i as usize;\n\n            let n_token_amount = Self::convert_balance_to_number(token_amount);\n\n            let (provider, pool_id, burn_amount, dy, new_token_supply) =\n                Pools::\u003cT\u003e::try_mutate(pool_id, |pool| -\u003e Result\u003c_, DispatchError\u003e {\n                    let pool = pool.as_mut().ok_or(Error::\u003cT\u003e::PoolNotFound)?;\n\n                    let n_coins = pool.assets.len();\n\n                    ensure!(\n                        n_coins == pool.balances.len(),\n                        Error::\u003cT\u003e::InconsistentStorage\n                    );\n\n                    let ann = Self::get_ann(pool.amplification, n_coins).ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let token_supply =\n                        Self::convert_balance_to_number(T::Assets::total_issuance(pool.pool_asset));\n                    let pool_fee = \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.fee);\n\n                    let pool_balances = Self::convert_vec_balance_to_number(pool.balances.clone());\n                    let (dy, dy_fee) = Self::calc_withdraw_one_coin(\n                        n_token_amount,\n                        i,\n                        \u0026pool_balances,\n                        ann,\n                        token_supply,\n                        pool_fee,\n                    )\n                    .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    ensure!(\n                        dy \u003e Self::convert_balance_to_number(min_amount),\n                        Error::\u003cT\u003e::RequiredAmountNotReached\n                    );\n\n                    let admin_fee =\n                        \u003cT::Convert as Convert\u003cPermill, T::Number\u003e\u003e::convert(pool.admin_fee);\n\n                    // pool.balances[i] = pool.balances[i] - (dy + dy_fee * pool.admin_fee)\n                    pool.balances[i] = Self::convert_number_to_balance(\n                        (|| {\n                            pool_balances[i]\n                                .checked_sub(\u0026dy.checked_add(\u0026dy_fee.checked_mul(\u0026admin_fee)?)?)\n                        })()\n                        .ok_or(Error::\u003cT\u003e::Math)?,\n                    );\n\n                    let new_token_supply = token_supply\n                        .checked_add(\u0026n_token_amount)\n                        .ok_or(Error::\u003cT\u003e::Math)?;\n\n                    let b_dy = Self::convert_number_to_balance(dy);\n\n                    ensure!(\n                        T::Assets::balance(pool.assets[i], \u0026T::ModuleId::get().into_account())\n                            \u003e= b_dy,\n                        Error::\u003cT\u003e::InsufficientFunds\n                    );\n\n                    T::Assets::burn(pool.pool_asset, \u0026who, token_amount)?;\n\n                    T::Assets::transfer(\n                        pool.assets[i],\n                        \u0026T::ModuleId::get().into_account(),\n                        \u0026who,\n                        b_dy,\n                    )?;\n\n                    Ok((\n                        who.clone(),\n                        pool_id,\n                        token_amount,\n                        b_dy,\n                        Self::convert_number_to_balance(new_token_supply),\n                    ))\n                })?;\n\n            Self::deposit_event(Event::RemoveLiquidityOne(\n                provider,\n                pool_id,\n                burn_amount,\n                dy,\n                new_token_supply,\n            ));\n\n            Ok(().into())\n        }\n    }\n}\n\n// The main implementation block for the module.\nimpl\u003cT: Config\u003e Pallet\u003cT\u003e {\n    pub(crate) fn get_number(n: u8) -\u003e T::Number {\n        \u003cT::Convert as Convert\u003cu8, T::Number\u003e\u003e::convert(n)\n    }\n\n    pub(crate) fn convert_number_to_balance(number: T::Number) -\u003e T::Balance {\n        \u003cT::Convert as Convert\u003cT::Number, T::Balance\u003e\u003e::convert(number)\n    }\n\n    pub(crate) fn convert_balance_to_number(balance: T::Balance) -\u003e T::Number {\n        \u003cT::Convert as Convert\u003cT::Balance, T::Number\u003e\u003e::convert(balance)\n    }\n\n    pub(crate) fn convert_vec_number_to_balance(numbers: Vec\u003cT::Number\u003e) -\u003e Vec\u003cT::Balance\u003e {\n        numbers\n            .into_iter()\n            .map(Self::convert_number_to_balance)\n            .collect()\n    }\n\n    pub(crate) fn convert_vec_balance_to_number(balances: Vec\u003cT::Balance\u003e) -\u003e Vec\u003cT::Number\u003e {\n        balances\n            .into_iter()\n            .map(Self::convert_balance_to_number)\n            .collect()\n    }\n\n    /// Find `ann = amp * n^n` where `amp` - amplification coefficient,\n    /// `n` - number of coins.\n    pub(crate) fn get_ann(amp: T::Number, n: usize) -\u003e Option\u003cT::Number\u003e {\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(n)?;\n        let mut ann = amp;\n        for _ in 0..n {\n            ann = ann.checked_mul(\u0026n_coins)?;\n        }\n        Some(ann)\n    }\n\n    /// Find `d` preserving StableSwap invariant.\n    /// Here `d` - total amount of coins when they have an equal price,\n    /// `xp` - coin amounts, `ann` is amplification coefficient multiplied by `n^n`,\n    /// where `n` is number of coins.\n    ///\n    /// # Notes\n    ///\n    /// Converging solution:\n    ///\n    /// ```latex\n    /// $$d_{j+1} = \\frac{a \\cdot n^n \\cdot \\sum x_i - \\frac{d_j^{n+1}}{n^n \\cdot \\prod x_i}}{a \\cdot n^n - 1} $$\n    /// ```\n    pub(crate) fn get_d(xp: \u0026[T::Number], ann: T::Number) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n        let one = Self::get_number(1);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        let mut s = zero;\n\n        for x in xp.iter() {\n            s = s.checked_add(x)?;\n        }\n        if s == zero {\n            return Some(zero);\n        }\n\n        let mut d = s;\n\n        for _ in 0..255 {\n            let mut d_p = d;\n            for x in xp.iter() {\n                // d_p = d_p * d / (x * n_coins)\n                d_p = d_p\n                    .checked_mul(\u0026d)?\n                    .checked_div(\u0026x.checked_mul(\u0026n_coins)?)?;\n            }\n            let d_prev = d;\n            // d = (ann * s + d_p * n_coins) * d / ((ann - 1) * d + (n_coins + 1) * d_p)\n            d = ann\n                .checked_mul(\u0026s)?\n                .checked_add(\u0026d_p.checked_mul(\u0026n_coins)?)?\n                .checked_mul(\u0026d)?\n                .checked_div(\n                    \u0026ann.checked_sub(\u0026one)?\n                        .checked_mul(\u0026d)?\n                        .checked_add(\u0026n_coins.checked_add(\u0026one)?.checked_mul(\u0026d_p)?)?,\n                )?;\n\n            if d \u003e d_prev {\n                if d.checked_sub(\u0026d_prev)? \u003c= prec {\n                    return Some(d);\n                }\n            } else {\n                if d_prev.checked_sub(\u0026d)? \u003c= prec {\n                    return Some(d);\n                }\n            }\n        }\n        // Convergence typically occurs in 4 rounds or less, this should be unreachable!\n        None\n    }\n\n    /// Find new amount `xp[j]` if one changes some other amount `x[i]` to value `x` preserving StableSwap invariant.\n    /// Here `xp` - coin amounts, `ann` is amplification coefficient multiplied by `n^n`, where\n    /// `n` is number of coins.\n    ///\n    /// # Explanation\n    ///\n    /// Here we give some explanations of how the function works and what its variables are used for.\n    ///\n    /// ```latex\n    /// Suppose we have $n$ coins with amounts $x_1, \\ldots, x_n$. Let $S$ be equal to $\\sum_{k=1}^{n}\n    /// x_k$ and $P$ equal to $\\prod_{k=1}^n x_k$.\n    /// Let's write StableSwap invariant:\n    /// $$a \\cdot n^n \\cdot S + d = a \\cdot n^n \\cdot d + \\frac{d^{n+1}}{n^n \\cdot P}$$\n    /// where $a$ - amplification coefficient, $d$ - total amount of coins when they have an equal\n    /// price.\n    ///\n    /// We know index $i$ of amount that changed to value $x$.  No other parameters have changed and\n    /// StableSwap invariant is preserved. We want to find a new amount with a given index $j$.\n    /// Let's denote this value $x_j$ as $y$. So for $S$ and $P$ we can write following:\n    /// $$S = x_1 + x_2 + \\ldots + x_{i-1} + x+x_{i+1} + \\ldots + x_{j-1} + y + x_{j+1} + \\ldots +\n    /// x_n$$\n    /// $$P = x_1 \\cdot x_2 \\cdot \\ldots \\cdot x_{i-1} \\cdot x \\cdot x_{i+1} \\cdot \\ldots \\cdot x_{j-1}\n    /// \\cdot y \\cdot x_{j+1} \\cdot \\ldots \\cdot x_n$$\n    ///\n    /// Let sum of all known terms in $S$ be $s$ and product of all known factors in $P$ be $p$. So we\n    /// can rewrite $S$ and $P$:\n    /// $$S = s + y$$\n    /// $$P = p \\cdot y$$\n    ///\n    /// Now we can substitute these values into StableSwap invariant:\n    /// $$a \\cdot n^n \\cdot (s + y) + d = a \\cdot n^n \\cdot d + \\frac{d^{n+1}}{n^n \\cdot p \\cdot y}$$\n    ///\n    /// It's obvious that $y\u003e0$, $a\u003e0$ and $n\u003e0$. So we can rewrite previous equation as a quadratic\n    /// equation with respect to $y$:\n    /// $$y^2 + \\left( s + \\frac{d}{a \\cdot n^n} - d \\right)y = \\frac{d^{n+1}}{a \\cdot n^{2n} \\cdot\n    /// p}$$\n    ///\n    /// Let's introduce variable $ann$ that equals to $a \\cdot n^n$. With $ann$ in mind rewrite\n    /// previous equation:\n    /// $$y^2 + \\left( s + \\frac{d}{ann} - d \\right)y = \\frac{d^{n+1}}{ann \\cdot n^n \\cdot p}$$\n    ///\n    /// Let's introduce $b$ and $c$ such that:\n    /// $$b = s + \\frac{d}{ann} - d$$\n    /// $$c = \\frac{d^{n+1}}{ann \\cdot n^n \\cdot p} $$\n    ///\n    /// Now we can rewrite our quadratic equation as:\n    /// $$y^2 + by = c$$\n    ///\n    /// To solve this equation numerically using fixed-point iteration method let's rewrite it as:\n    /// $$y = \\frac{y^2 + c}{2y + b}$$\n    /// ```\n    pub(crate) fn get_y(\n        i: usize,\n        j: usize,\n        x: T::Number,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n    ) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n\n        let two = Self::get_number(2);\n\n        let n = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        // Same coin\n        if !(i != j) {\n            return None;\n        }\n        // j above n\n        if !(j \u003c xp.len()) {\n            return None;\n        }\n        if !(i \u003c xp.len()) {\n            return None;\n        }\n\n        let d = Self::get_d(xp, ann)?;\n\n        let mut c = d;\n        let mut s = zero;\n\n        // Calculate s and c\n        // p is implicitly calculated as part of c\n        // note that loop makes n - 1 iterations\n        for k in 0..xp.len() {\n            let x_k;\n            if k == i {\n                x_k = x;\n            } else if k != j {\n                x_k = xp[k];\n            } else {\n                continue;\n            }\n            // s = s + x_k\n            s = s.checked_add(\u0026x_k)?;\n            // c = c * d / (x_k * n)\n            c = c.checked_mul(\u0026d)?.checked_div(\u0026x_k.checked_mul(\u0026n)?)?;\n        }\n        // c = c * d / (ann * n)\n        // At this step we have d^n in the numerator of c\n        // and n^(n-1) in its denominator.\n        // So we multiplying it by remaining d/n\n        c = c.checked_mul(\u0026d)?.checked_div(\u0026ann.checked_mul(\u0026n)?)?;\n\n        // b = s + d / ann\n        // We subtract d later\n        let b = s.checked_add(\u0026d.checked_div(\u0026ann)?)?;\n        let mut y = d;\n\n        for _ in 0..255 {\n            let y_prev = y;\n            // y = (y^2 + c) / (2 * y + b - d)\n            // Subtract d to calculate b finally\n            y = y\n                .checked_mul(\u0026y)?\n                .checked_add(\u0026c)?\n                .checked_div(\u0026two.checked_mul(\u0026y)?.checked_add(\u0026b)?.checked_sub(\u0026d)?)?;\n\n            // Equality with the specified precision\n            if y \u003e y_prev {\n                if y.checked_sub(\u0026y_prev)? \u003c= prec {\n                    return Some(y);\n                }\n            } else {\n                if y_prev.checked_sub(\u0026y)? \u003c= prec {\n                    return Some(y);\n                }\n            }\n        }\n\n        None\n    }\n\n    /// Calculate `x[i]` if one reduces `d` from being calculated for `xp` to `d`.\n    /// Done by solving quadratic equation iteratively.\n    ///\n    /// ```latex\n    /// \\[x_1^2 + x_1 \\cdot \\left(sum' - \\frac{A \\cdot n^n - 1) \\cdot D}{A \\cdot n^n}\\right) = \\frac{D^{n + 1}}{n^{2n} \\cdot prod' \\cdot A}\\]\n    /// \\[x_1^2 + b \\cdot x_1 = c\\]\n    /// \\[x_1 = \\frac{x_1^2 + c}{2x_1 + b}\\]\n    /// ```\n    pub(crate) fn get_y_d(\n        i: usize,\n        d: T::Number,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n    ) -\u003e Option\u003cT::Number\u003e {\n        let prec = T::Precision::get();\n        let zero = Self::get_number(0);\n        let two = Self::get_number(2);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        if i \u003e= xp.len() {\n            return None;\n        }\n\n        let mut c = d;\n        let mut s = zero;\n\n        for k in 0..xp.len() {\n            if k == i {\n                continue;\n            }\n\n            let x = xp[k];\n\n            s = s.checked_add(\u0026x)?;\n            // c = c * d / (x * n_coins)\n            c = c.checked_mul(\u0026d)?.checked_div(\u0026x.checked_mul(\u0026n_coins)?)?;\n        }\n        // c = c * d / (ann * n_coins)\n        c = c\n            .checked_mul(\u0026d)?\n            .checked_div(\u0026ann.checked_mul(\u0026n_coins)?)?;\n        // b = s + d / ann\n        let b = s.checked_add(\u0026d.checked_div(\u0026ann)?)?;\n        let mut y = d;\n\n        for _ in 0..255 {\n            let y_prev = y;\n            // y = (y*y + c) / (2 * y + b - d)\n            y = y\n                .checked_mul(\u0026y)?\n                .checked_add(\u0026c)?\n                .checked_div(\u0026two.checked_mul(\u0026y)?.checked_add(\u0026b)?.checked_sub(\u0026d)?)?;\n\n            // Equality with the specified precision\n            if y \u003e y_prev {\n                if y.checked_sub(\u0026y_prev)? \u003c= prec {\n                    return Some(y);\n                }\n            } else {\n                if y_prev.checked_sub(\u0026y)? \u003c= prec {\n                    return Some(y);\n                }\n            }\n        }\n\n        None\n    }\n\n    /// First, need to calculate:\n    /// - current `d`,\n    /// - solve equation against `y_i` for `d` - token_amount.\n    pub(crate) fn calc_withdraw_one_coin(\n        token_amount: T::Number,\n        i: usize,\n        xp: \u0026[T::Number],\n        ann: T::Number,\n        total_supply: T::Number,\n        pool_fee: T::Number,\n    ) -\u003e Option\u003c(T::Number, T::Number)\u003e {\n        let prec = T::Precision::get();\n        let one = Self::get_number(1);\n        let four = Self::get_number(4);\n\n        let n_coins = \u003cT::Convert as CheckedConvert\u003cusize, T::Number\u003e\u003e::convert(xp.len())?;\n\n        let d0 = Self::get_d(xp, ann)?;\n        // d1 = d0 - token_amount * d0 / total_supply\n        let d1 = d0.checked_sub(\u0026token_amount.checked_mul(\u0026d0)?.checked_div(\u0026total_supply)?)?;\n        let new_y = Self::get_y_d(i, d1, xp, ann)?;\n        let mut xp_reduced = xp.to_vec();\n\n        // Deposit x + withdraw y would charge about same\n        // fees as a swap. Otherwise, one could exchange w/o paying fees.\n        // And this formula leads to exactly that equality\n        // fee = pool_fee * n_coins / (4 * (n_coins - 1))\n        let fee = pool_fee\n            .checked_mul(\u0026n_coins)?\n            .checked_div(\u0026four.checked_mul(\u0026n_coins.checked_sub(\u0026one)?)?)?;\n\n        for j in 0..xp.len() {\n            let dx_expected = if j == i {\n                // dx_expected = xp[j] * d1 / d0 - new_y\n                xp[j]\n                    .checked_mul(\u0026d1)?\n                    .checked_div(\u0026d0)?\n                    .checked_sub(\u0026new_y)?\n            } else {\n                // dx_expected = xp[j] - xp[j] * d1 / d0\n                xp[j].checked_sub(\u0026xp[j].checked_mul(\u0026d1)?.checked_div(\u0026d0)?)?\n            };\n            // xp_reduced[j] = xp_reduced[j] - fee * dx_expected\n            xp_reduced[j] = xp_reduced[j].checked_sub(\u0026fee.checked_mul(\u0026dx_expected)?)?;\n        }\n\n        let dy = xp_reduced[i].checked_sub(\u0026Self::get_y_d(i, d1, \u0026xp_reduced, ann)?)?;\n        // Withdraw less to account for rounding errors\n        let dy = dy.checked_sub(\u0026prec)?;\n        // Without fees\n        let dy_0 = xp[i].checked_sub(\u0026new_y)?;\n\n        Some((dy, dy_0))\n    }\n}\n\n/// Module that contain traits which must be implemented somewhere in the runtime\n/// in order to equilibrium_curve_amm pallet can work properly.\npub mod traits {\n    use frame_support::dispatch::{DispatchError, DispatchResult};\n\n    /// Pallet equilibrium_curve_amm should interact with custom Assets.\n    /// In order to do this it relies on `Asset` trait implementation.\n    pub trait Assets\u003cAssetId, Balance, AccountId\u003e {\n        /// Creates new asset\n        fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e;\n        /// Mint tokens for the specified asset\n        fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult;\n        /// Burn tokens for the specified asset\n        fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult;\n        /// Transfer tokens for the specified asset\n        fn transfer(\n            asset: AssetId,\n            source: \u0026AccountId,\n            dest: \u0026AccountId,\n            amount: Balance,\n        ) -\u003e DispatchResult;\n        /// Checks the balance for the specified asset\n        fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance;\n        /// Returns total issuance of the specified asset\n        fn total_issuance(asset: AssetId) -\u003e Balance;\n    }\n\n    /// Generic convertion trait. Unlike `sp_runtime::traits::Convert` it supports cases\n    /// where some values of type `A` can not be represented in type `B`.\n    pub trait CheckedConvert\u003cA, B\u003e {\n        /// Make a conversion\n        fn convert(a: A) -\u003e Option\u003cB\u003e;\n    }\n}\n\n/// Type that represents index type of token in the pool passed from the outside as an extrinsic\n/// argument.\npub type PoolTokenIndex = u32;\n\n/// Type that represents pool id\npub type PoolId = u32;\n\n/// Storage record type for a pool\n#[derive(Encode, Decode, Clone, Default, PartialEq, Eq, Debug)]\npub struct PoolInfo\u003cAssetId, Number, Balance\u003e {\n    /// LP multiasset\n    pool_asset: AssetId,\n    /// List of multiassets supported by the pool\n    assets: Vec\u003cAssetId\u003e,\n    /// Initial amplification coefficient (leverage)\n    amplification: Number,\n    /// Amount of the fee pool charges for the exchange\n    fee: Permill,\n    /// Amount of the admin fee pool charges for the exchange\n    admin_fee: Permill,\n    /// Current balances excluding admin_fee\n    balances: Vec\u003cBalance\u003e,\n}\n","traces":[{"line":34,"address":[4768929,4767032,4767362,4768304,4767053,4770320,4767339,4767616,4769180,4768784,4765181,4771022,4767127,4768457,4770221,4769653,4769703,4768964,4768176,4768640,4767046,4768343,4765419,4769811,4769504,4770149,4770335,4769664,4770704,4768432,4771056,4768160,4767316,4768416,4767039,4768172,4765205,4768215,4767293,4770980,4769824,4770445,4767633,4769543,4765184,4770184,4765918,4770616,4768601,4765280,4770729,4769844,4770551,4768798,4769168,4766880,4765301,4769301,4765168,4768288],"length":1,"stats":{"Line":6},"fn_name":"module_constants_metadata\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":82,"address":[4767860,4767856,4767920,4767924],"length":1,"stats":{"Line":4},"fn_name":"pool_count\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":87,"address":[4767888,4768016,4768020,4767904],"length":1,"stats":{"Line":12},"fn_name":"pools\u003cequilibrium_curve_amm::mock::Test,u32\u003e"},{"line":123,"address":[4761936,4763487],"length":1,"stats":{"Line":1},"fn_name":"create_pool\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":129,"address":[4761970,4763549,4762225],"length":1,"stats":{"Line":1},"fn_name":null},{"line":132,"address":[4762275,4762201,4762356],"length":1,"stats":{"Line":3},"fn_name":null},{"line":133,"address":[4762331,4762406],"length":1,"stats":{"Line":4},"fn_name":null},{"line":134,"address":[4762549,4762615,4762567],"length":1,"stats":{"Line":2},"fn_name":null},{"line":135,"address":[4762497],"length":1,"stats":{"Line":2},"fn_name":null},{"line":136,"address":[4762559],"length":1,"stats":{"Line":0},"fn_name":null},{"line":140,"address":[4762590,4762670],"length":1,"stats":{"Line":7},"fn_name":null},{"line":142,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":143,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":144,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":145,"address":[4762691],"length":1,"stats":{"Line":4},"fn_name":null},{"line":147,"address":[4763696,4763547,4762786,4762894],"length":1,"stats":{"Line":6},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":148,"address":[4762861],"length":1,"stats":{"Line":4},"fn_name":null},{"line":151,"address":[4763115,4763159,4763264,4764624,4762956],"length":1,"stats":{"Line":15},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":152,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":153,"address":[4764642],"length":1,"stats":{"Line":5},"fn_name":null},{"line":155,"address":[4764651,4764920,4763744,4764456,4764805],"length":1,"stats":{"Line":10},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":158,"address":[4763975,4763935,4763850,4763762],"length":1,"stats":{"Line":10},"fn_name":null},{"line":159,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":160,"address":[4763712,4763717],"length":1,"stats":{"Line":0},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":161,"address":[4763845,4763937,4763899],"length":1,"stats":{"Line":10},"fn_name":null},{"line":163,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":164,"address":[4763928,4764375,4763995,4763728],"length":1,"stats":{"Line":10},"fn_name":"{{closure}}\u003cequilibrium_curve_amm::mock::Test\u003e"},{"line":166,"address":[4764235,4764476],"length":1,"stats":{"Line":5},"fn_name":null},{"line":167,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":168,"address":[4764176],"length":1,"stats":{"Line":5},"fn_name":null},{"line":169,"address":[4764212],"length":1,"stats":{"Line":5},"fn_name":null},{"line":170,"address":[4764228],"length":1,"stats":{"Line":5},"fn_name":null},{"line":173,"address":[4764536],"length":1,"stats":{"Line":5},"fn_name":null},{"line":176,"address":[4764782,4764954,4765088,4765125,4765047],"length":1,"stats":{"Line":15},"fn_name":null},{"line":177,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":178,"address":[4764938,4765028,4765090],"length":1,"stats":{"Line":10},"fn_name":null},{"line":180,"address":[4765077],"length":1,"stats":{"Line":5},"fn_name":null},{"line":183,"address":[4763277,4763148],"length":1,"stats":{"Line":10},"fn_name":null},{"line":185,"address":[4763326],"length":1,"stats":{"Line":5},"fn_name":null},{"line":247,"address":[5098421,5097360],"length":1,"stats":{"Line":1},"fn_name":"get_ann\u003csp_arithmetic::fixed_point::FixedI128,i128\u003e"},{"line":252,"address":[5097812,5098471,5097391],"length":1,"stats":{"Line":2},"fn_name":null},{"line":253,"address":[5097836],"length":1,"stats":{"Line":3},"fn_name":null},{"line":254,"address":[5098462,5098089,5097876],"length":1,"stats":{"Line":9},"fn_name":null},{"line":255,"address":[5098469,5098115,5098441],"length":1,"stats":{"Line":8},"fn_name":null},{"line":257,"address":[5098040],"length":1,"stats":{"Line":5},"fn_name":null},{"line":272,"address":[5098560],"length":1,"stats":{"Line":1},"fn_name":"get_d\u003csp_arithmetic::fixed_point::FixedI128,i128,equilibrium_curve_amm::math_tests::ConstFixedI128\u003e"},{"line":278,"address":[5098615],"length":1,"stats":{"Line":1},"fn_name":null},{"line":279,"address":[5098636],"length":1,"stats":{"Line":1},"fn_name":null},{"line":280,"address":[5098657],"length":1,"stats":{"Line":1},"fn_name":null},{"line":282,"address":[5098694],"length":1,"stats":{"Line":2},"fn_name":null},{"line":284,"address":[5098982],"length":1,"stats":{"Line":2},"fn_name":null},{"line":286,"address":[5099395,5099199,5099030],"length":1,"stats":{"Line":3},"fn_name":null},{"line":287,"address":[5099233,5099400],"length":1,"stats":{"Line":1},"fn_name":null},{"line":289,"address":[5099166,5099449],"length":1,"stats":{"Line":2},"fn_name":null},{"line":290,"address":[5099455],"length":1,"stats":{"Line":1},"fn_name":null},{"line":293,"address":[5099472],"length":1,"stats":{"Line":1},"fn_name":null},{"line":295,"address":[5099504,5099654,5103318],"length":1,"stats":{"Line":4},"fn_name":null},{"line":296,"address":[5099677],"length":1,"stats":{"Line":2},"fn_name":null},{"line":297,"address":[5099725,5100578,5099947],"length":1,"stats":{"Line":4},"fn_name":null},{"line":299,"address":[5100108,5100583,5100591,5100215,5100530,5099981,5100484,5100207,5100367],"length":1,"stats":{"Line":10},"fn_name":null},{"line":300,"address":[5100091,5100209],"length":1,"stats":{"Line":2},"fn_name":null},{"line":301,"address":[5100513,5100273,5100156,5100418,5100585],"length":1,"stats":{"Line":6},"fn_name":null},{"line":303,"address":[5099861],"length":1,"stats":{"Line":2},"fn_name":null},{"line":305,"address":[5100802,5100649,5102401,5101435,5101117,5101071,5102546,5101282,5099893,5101224,5100695,5101328,5102624,5100794,5101427,5102632,5100954,5102500],"length":1,"stats":{"Line":22},"fn_name":null},{"line":306,"address":[5100678,5100796],"length":1,"stats":{"Line":2},"fn_name":null},{"line":307,"address":[5100743,5101100,5100860,5101218,5101005],"length":1,"stats":{"Line":6},"fn_name":null},{"line":308,"address":[5101429,5101311],"length":1,"stats":{"Line":2},"fn_name":null},{"line":310,"address":[5101493,5101704,5101857,5101376,5102443,5102208,5101849,5102307,5102451,5102353,5101750],"length":1,"stats":{"Line":14},"fn_name":null},{"line":311,"address":[5101733,5101851],"length":1,"stats":{"Line":2},"fn_name":null},{"line":312,"address":[5102445,5102114,5101915,5102336,5101798,5102250],"length":1,"stats":{"Line":8},"fn_name":null},{"line":315,"address":[5102594,5103052,5103316,5102666],"length":1,"stats":{"Line":6},"fn_name":null},{"line":316,"address":[5102968,5102802,5102700],"length":1,"stats":{"Line":0},"fn_name":null},{"line":317,"address":[5103003],"length":1,"stats":{"Line":0},"fn_name":null},{"line":320,"address":[5102742,5103072,5103235],"length":1,"stats":{"Line":6},"fn_name":null},{"line":321,"address":[5103270],"length":1,"stats":{"Line":2},"fn_name":null},{"line":326,"address":[5099637],"length":1,"stats":{"Line":0},"fn_name":null},{"line":380,"address":[5103392],"length":1,"stats":{"Line":4},"fn_name":"get_y\u003csp_arithmetic::fixed_point::FixedI128,i128,equilibrium_curve_amm::math_tests::ConstFixedI128\u003e"},{"line":386,"address":[5103527],"length":1,"stats":{"Line":4},"fn_name":null},{"line":387,"address":[5103548],"length":1,"stats":{"Line":4},"fn_name":null},{"line":389,"address":[5103591,5103831],"length":1,"stats":{"Line":4},"fn_name":null},{"line":391,"address":[5103816,5103881],"length":1,"stats":{"Line":8},"fn_name":null},{"line":394,"address":[5104164],"length":1,"stats":{"Line":4},"fn_name":null},{"line":395,"address":[5104180],"length":1,"stats":{"Line":1},"fn_name":null},{"line":398,"address":[5104213],"length":1,"stats":{"Line":3},"fn_name":null},{"line":399,"address":[5104258],"length":1,"stats":{"Line":1},"fn_name":null},{"line":401,"address":[5104291],"length":1,"stats":{"Line":2},"fn_name":null},{"line":402,"address":[5104336],"length":1,"stats":{"Line":1},"fn_name":null},{"line":405,"address":[5104353,5104630],"length":1,"stats":{"Line":1},"fn_name":null},{"line":407,"address":[5104535],"length":1,"stats":{"Line":1},"fn_name":null},{"line":408,"address":[5104575],"length":1,"stats":{"Line":1},"fn_name":null},{"line":413,"address":[5104672,5104615,5105865,5104874],"length":1,"stats":{"Line":3},"fn_name":null},{"line":415,"address":[5104961,5104916],"length":1,"stats":{"Line":2},"fn_name":null},{"line":416,"address":[5104937],"length":1,"stats":{"Line":1},"fn_name":null},{"line":417,"address":[5104979],"length":1,"stats":{"Line":1},"fn_name":null},{"line":418,"address":[5109170,5105004,5109136],"length":1,"stats":{"Line":0},"fn_name":null},{"line":423,"address":[5105283,5105065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":425,"address":[5105232,5105349,5105771,5105870,5105560],"length":1,"stats":{"Line":4},"fn_name":null},{"line":431,"address":[5106152,5106508,5105941,5104820,5106363],"length":1,"stats":{"Line":4},"fn_name":null},{"line":435,"address":[5106972,5106574,5106785,5106457],"length":1,"stats":{"Line":3},"fn_name":null},{"line":436,"address":[5106882],"length":1,"stats":{"Line":1},"fn_name":null},{"line":438,"address":[5107021,5106914,5107108,5109059],"length":1,"stats":{"Line":3},"fn_name":null},{"line":439,"address":[5107131],"length":1,"stats":{"Line":1},"fn_name":null},{"line":442,"address":[5107387,5108373,5107280,5107491,5107445,5108241,5108365,5107598,5107163,5108287,5107590,5108142],"length":1,"stats":{"Line":7},"fn_name":null},{"line":443,"address":[5107381,5107263],"length":1,"stats":{"Line":1},"fn_name":null},{"line":444,"address":[5107474,5107592],"length":1,"stats":{"Line":1},"fn_name":null},{"line":445,"address":[5108367,5108184,5107539,5107855,5107656,5108270,5108048],"length":1,"stats":{"Line":5},"fn_name":null},{"line":448,"address":[5108335,5109057,5108407,5108793],"length":1,"stats":{"Line":3},"fn_name":null},{"line":449,"address":[5108709,5108543,5108441],"length":1,"stats":{"Line":0},"fn_name":null},{"line":450,"address":[5108744],"length":1,"stats":{"Line":0},"fn_name":null},{"line":453,"address":[5108813,5108976,5108483],"length":1,"stats":{"Line":3},"fn_name":null},{"line":454,"address":[5109011],"length":1,"stats":{"Line":1},"fn_name":null},{"line":459,"address":[5107091],"length":1,"stats":{"Line":0},"fn_name":null},{"line":471,"address":[5065248],"length":1,"stats":{"Line":5},"fn_name":"zero"},{"line":472,"address":[5065252],"length":1,"stats":{"Line":5},"fn_name":null},{"line":475,"address":[5065296],"length":1,"stats":{"Line":6},"fn_name":"one"},{"line":476,"address":[5065300],"length":1,"stats":{"Line":6},"fn_name":null},{"line":479,"address":[5065344],"length":1,"stats":{"Line":5},"fn_name":"prec"},{"line":485,"address":[4902456,4902448],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":486,"address":[5065409,5066483,5065488],"length":1,"stats":{"Line":2},"fn_name":null},{"line":487,"address":[5065432],"length":1,"stats":{"Line":1},"fn_name":null},{"line":488,"address":[5065465],"length":1,"stats":{"Line":1},"fn_name":null},{"line":490,"address":[5065582],"length":1,"stats":{"Line":1},"fn_name":null},{"line":491,"address":[5065645],"length":1,"stats":{"Line":1},"fn_name":null},{"line":493,"address":[5065809],"length":1,"stats":{"Line":1},"fn_name":null},{"line":497,"address":[5065943],"length":1,"stats":{"Line":1},"fn_name":null},{"line":498,"address":[4902480],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":499,"address":[4902523],"length":1,"stats":{"Line":1},"fn_name":null},{"line":505,"address":[4902640],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":506,"address":[4902673],"length":1,"stats":{"Line":1},"fn_name":null},{"line":511,"address":[5066291,5066016],"length":1,"stats":{"Line":1},"fn_name":null},{"line":515,"address":[4902728,4902720],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":516,"address":[5066551],"length":1,"stats":{"Line":1},"fn_name":null},{"line":517,"address":[5066574],"length":1,"stats":{"Line":1},"fn_name":null},{"line":518,"address":[5066637],"length":1,"stats":{"Line":1},"fn_name":null},{"line":520,"address":[5066801],"length":1,"stats":{"Line":1},"fn_name":null},{"line":522,"address":[5067184,5066919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":526,"address":[4902760,4902752],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":527,"address":[5067415],"length":1,"stats":{"Line":1},"fn_name":null},{"line":528,"address":[5067427],"length":1,"stats":{"Line":1},"fn_name":null},{"line":529,"address":[5067449],"length":1,"stats":{"Line":1},"fn_name":null},{"line":530,"address":[5067581,5068625,5067502],"length":1,"stats":{"Line":2},"fn_name":null},{"line":531,"address":[5067525],"length":1,"stats":{"Line":1},"fn_name":null},{"line":532,"address":[5067558],"length":1,"stats":{"Line":1},"fn_name":null},{"line":534,"address":[5067675],"length":1,"stats":{"Line":1},"fn_name":null},{"line":535,"address":[5067738],"length":1,"stats":{"Line":1},"fn_name":null},{"line":537,"address":[5067902],"length":1,"stats":{"Line":1},"fn_name":null},{"line":541,"address":[5068071],"length":1,"stats":{"Line":1},"fn_name":null},{"line":542,"address":[4902784],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":543,"address":[4902827],"length":1,"stats":{"Line":1},"fn_name":null},{"line":549,"address":[4902944],"length":1,"stats":{"Line":1},"fn_name":"{{closure}}"},{"line":550,"address":[4902977],"length":1,"stats":{"Line":1},"fn_name":null},{"line":555,"address":[5068156,5068431],"length":1,"stats":{"Line":1},"fn_name":null},{"line":559,"address":[4903032,4903024],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":560,"address":[5068695],"length":1,"stats":{"Line":1},"fn_name":null},{"line":561,"address":[5068707],"length":1,"stats":{"Line":1},"fn_name":null},{"line":562,"address":[5068729],"length":1,"stats":{"Line":1},"fn_name":null},{"line":563,"address":[5068782,5068861,5069802],"length":1,"stats":{"Line":2},"fn_name":null},{"line":564,"address":[5068805],"length":1,"stats":{"Line":1},"fn_name":null},{"line":565,"address":[5068838],"length":1,"stats":{"Line":1},"fn_name":null},{"line":567,"address":[5068955],"length":1,"stats":{"Line":1},"fn_name":null},{"line":568,"address":[5069018],"length":1,"stats":{"Line":1},"fn_name":null},{"line":570,"address":[5069182],"length":1,"stats":{"Line":1},"fn_name":null},{"line":572,"address":[5069343,5069608],"length":1,"stats":{"Line":1},"fn_name":null},{"line":576,"address":[4903056,4903064],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":577,"address":[5069863],"length":1,"stats":{"Line":1},"fn_name":null},{"line":578,"address":[5069875],"length":1,"stats":{"Line":1},"fn_name":null},{"line":579,"address":[5069897],"length":1,"stats":{"Line":1},"fn_name":null},{"line":580,"address":[5069950,5070969,5070029],"length":1,"stats":{"Line":2},"fn_name":null},{"line":581,"address":[5069973],"length":1,"stats":{"Line":1},"fn_name":null},{"line":582,"address":[5070006],"length":1,"stats":{"Line":1},"fn_name":null},{"line":584,"address":[5070123],"length":1,"stats":{"Line":1},"fn_name":null},{"line":585,"address":[5070186],"length":1,"stats":{"Line":1},"fn_name":null},{"line":587,"address":[5070350],"length":1,"stats":{"Line":1},"fn_name":null},{"line":589,"address":[5070510,5070775],"length":1,"stats":{"Line":1},"fn_name":null},{"line":593,"address":[4903096,4903088],"length":1,"stats":{"Line":3},"fn_name":"{{closure}}"},{"line":594,"address":[5071031],"length":1,"stats":{"Line":1},"fn_name":null},{"line":595,"address":[5071043],"length":1,"stats":{"Line":1},"fn_name":null},{"line":596,"address":[5071065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":597,"address":[5071197,5071118,5072137],"length":1,"stats":{"Line":2},"fn_name":null},{"line":598,"address":[5071141],"length":1,"stats":{"Line":1},"fn_name":null},{"line":599,"address":[5071174],"length":1,"stats":{"Line":1},"fn_name":null},{"line":601,"address":[5071291],"length":1,"stats":{"Line":1},"fn_name":null},{"line":602,"address":[5071354],"length":1,"stats":{"Line":1},"fn_name":null},{"line":604,"address":[5071518],"length":1,"stats":{"Line":1},"fn_name":null},{"line":606,"address":[5071943,5071678],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":168,"coverable":185},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","mock.rs"],"content":"use crate as curve_amm;\nuse crate::traits::CheckedConvert;\nuse frame_support::{\n    dispatch::{DispatchError, DispatchResult},\n    parameter_types,\n    traits::{Currency, OnUnbalanced},\n};\nuse frame_system as system;\nuse sp_core::H256;\nuse sp_runtime::traits::Convert;\nuse sp_runtime::Permill;\nuse sp_runtime::{\n    testing::Header,\n    traits::{BlakeTwo256, IdentityLookup},\n    ModuleId,\n};\nuse sp_runtime::{FixedI64, FixedPointNumber, FixedU128};\nuse sp_std::convert::{TryFrom, TryInto};\n\ntype UncheckedExtrinsic = frame_system::mocking::MockUncheckedExtrinsic\u003cTest\u003e;\ntype Block = frame_system::mocking::MockBlock\u003cTest\u003e;\n\n// Configure a mock runtime to test the pallet.\nframe_support::construct_runtime!(\n    pub enum Test where\n        Block = Block,\n        NodeBlock = Block,\n        UncheckedExtrinsic = UncheckedExtrinsic,\n    {\n        System: frame_system::{Module, Call, Config, Storage, Event\u003cT\u003e},\n        Balances: pallet_balances::{Module, Call, Storage, Event\u003cT\u003e},\n        CurveAmm: curve_amm::{Module, Call, Storage, Event\u003cT\u003e},\n    }\n);\n\nparameter_types! {\n    pub const BlockHashCount: u64 = 250;\n    pub const SS58Prefix: u8 = 42;\n}\n\npub type AccountId = u64;\n\nimpl system::Config for Test {\n    type BaseCallFilter = ();\n    type BlockWeights = ();\n    type BlockLength = ();\n    type DbWeight = ();\n    type Origin = Origin;\n    type Call = Call;\n    type Index = u64;\n    type BlockNumber = u64;\n    type Hash = H256;\n    type Hashing = BlakeTwo256;\n    type AccountId = AccountId;\n    type Lookup = IdentityLookup\u003cSelf::AccountId\u003e;\n    type Header = Header;\n    type Event = Event;\n    type BlockHashCount = BlockHashCount;\n    type Version = ();\n    type PalletInfo = PalletInfo;\n    type AccountData = pallet_balances::AccountData\u003cBalance\u003e;\n    type OnNewAccount = ();\n    type OnKilledAccount = ();\n    type SystemWeightInfo = ();\n    type SS58Prefix = SS58Prefix;\n}\n\nparameter_types! {\n    pub const ExistentialDeposit: u64 = 1;\n}\n\nimpl pallet_balances::Config for Test {\n    type MaxLocks = ();\n    type Balance = Balance;\n    type DustRemoval = ();\n    type Event = Event;\n    type ExistentialDeposit = ExistentialDeposit;\n    type AccountStore = System;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const CreationFee: Balance = 999;\n    pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n    pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000_000);\n}\n\npub type Balance = u64;\ntype Number = FixedU128;\n\npub type AssetId = i64;\n\npub struct FixedU128Convert;\n\nimpl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Permill) -\u003e FixedU128 {\n        a.into()\n    }\n}\n\nimpl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Balance) -\u003e FixedU128 {\n        let accuracy = FixedU128::accuracy() / FixedI64::accuracy() as u128;\n        FixedU128::from_inner(a as u128 * accuracy)\n    }\n}\n\nimpl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: u8) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n        Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n    }\n}\n\nimpl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n    fn convert(a: FixedU128) -\u003e Balance {\n        let accuracy = FixedU128::accuracy() / FixedI64::accuracy() as u128;\n        // NOTE: unwrap is for testing purposes only. Do not use it in production.\n        (a.into_inner() / accuracy).try_into().unwrap()\n    }\n}\n\nuse std::cell::RefCell;\nuse std::collections::HashMap;\n\npub struct Asset {\n    total: Balance,\n    balances: HashMap\u003cAccountId, Balance\u003e,\n}\n\nthread_local! {\n    static ASSETS: RefCell\u003cVec\u003cAsset\u003e\u003e = RefCell::new(Vec::new());\n}\n\npub struct TestAssets;\nimpl curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for TestAssets {\n    fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n        ASSETS.with(|d| -\u003e Result\u003cAssetId, DispatchError\u003e {\n            let mut d = d.borrow_mut();\n            let id =\n                AssetId::try_from(d.len()).map_err(|_| DispatchError::Other(\u0026\"Too large id\"))?;\n            d.push(Asset {\n                total: 0,\n                balances: HashMap::new(),\n            });\n\n            Ok(id)\n        })\n    }\n\n    fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        ASSETS.with(|d| -\u003e DispatchResult {\n            let i =\n                usize::try_from(asset).map_err(|_| DispatchError::Other(\u0026\"Index out of range\"))?;\n            let mut d = d.borrow_mut();\n            let a = d\n                .get_mut(i)\n                .ok_or(DispatchError::Other(\u0026\"Index out of range\"))?;\n\n            if let Some(x) = a.balances.get_mut(dest) {\n                *x = x\n                    .checked_add(amount)\n                    .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n            } else {\n                a.balances.insert(*dest, amount);\n            }\n\n            a.total = a\n                .total\n                .checked_add(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            Ok(())\n        })\n    }\n\n    fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        ASSETS.with(|d| -\u003e DispatchResult {\n            let i =\n                usize::try_from(asset).map_err(|_| DispatchError::Other(\u0026\"Index out of range\"))?;\n            let mut d = d.borrow_mut();\n            let a = d\n                .get_mut(i)\n                .ok_or(DispatchError::Other(\u0026\"Index out of range\"))?;\n\n            let x = a\n                .balances\n                .get_mut(dest)\n                .ok_or(DispatchError::Other(\u0026\"Not found\"))?;\n\n            *x = x\n                .checked_sub(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            a.total = a\n                .total\n                .checked_sub(amount)\n                .ok_or(DispatchError::Other(\u0026\"Overflow\"))?;\n\n            Ok(())\n        })\n    }\n\n    fn transfer(\n        asset: AssetId,\n        source: \u0026AccountId,\n        dest: \u0026AccountId,\n        amount: Balance,\n    ) -\u003e DispatchResult {\n        Self::burn(asset, source, amount)?;\n        Self::mint(asset, dest, amount)?;\n        Ok(())\n    }\n\n    fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n        ASSETS\n            .with(|d| -\u003e Option\u003cBalance\u003e {\n                let i = usize::try_from(asset).ok()?;\n                let d = d.borrow();\n                let a = d.get(i)?;\n                a.balances.get(who).map(|x| *x)\n            })\n            .unwrap_or(0)\n    }\n\n    fn total_issuance(asset: AssetId) -\u003e Balance {\n        ASSETS\n            .with(|d| -\u003e Option\u003cBalance\u003e {\n                let i = usize::try_from(asset).ok()?;\n                let d = d.borrow();\n                d.get(i).map(|a| a.total)\n            })\n            .unwrap_or(0)\n    }\n}\n\npub struct EmptyUnbalanceHandler;\n\ntype Imbalance = \u003cpallet_balances::Pallet\u003cTest\u003e as Currency\u003cAccountId\u003e\u003e::NegativeImbalance;\n\nimpl OnUnbalanced\u003cImbalance\u003e for EmptyUnbalanceHandler {}\n\nimpl curve_amm::Config for Test {\n    type Event = Event;\n    type AssetId = i64;\n    type Balance = Balance;\n    type Currency = Balances;\n    type CreationFee = CreationFee;\n    type Assets = TestAssets;\n    type OnUnbalanced = EmptyUnbalanceHandler;\n    type ModuleId = CurveAmmModuleId;\n\n    type Number = Number;\n    type Precision = Precision;\n    type Convert = FixedU128Convert;\n}\n\n// Build genesis storage according to the mock runtime.\npub fn new_test_ext() -\u003e sp_io::TestExternalities {\n    system::GenesisConfig::default()\n        .build_storage::\u003cTest\u003e()\n        .unwrap()\n        .into()\n}\n","traces":[{"line":19,"address":[4665744,4665748],"length":1,"stats":{"Line":42},"fn_name":"runtime_integrity_tests"},{"line":25,"address":[4489449,4488976,4489216,4489593],"length":1,"stats":{"Line":0},"fn_name":null},{"line":26,"address":[4489030,4489270],"length":1,"stats":{"Line":0},"fn_name":null},{"line":27,"address":[4489084,4489324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":79,"address":[4490324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":89,"address":[],"length":0,"stats":{"Line":5},"fn_name":null},{"line":93,"address":[4979232],"length":1,"stats":{"Line":0},"fn_name":"mint"},{"line":94,"address":[4979255],"length":1,"stats":{"Line":0},"fn_name":null},{"line":97,"address":[4979264],"length":1,"stats":{"Line":0},"fn_name":"burn"},{"line":98,"address":[4979287],"length":1,"stats":{"Line":0},"fn_name":null},{"line":101,"address":[4979296],"length":1,"stats":{"Line":0},"fn_name":"transfer"},{"line":107,"address":[4979324],"length":1,"stats":{"Line":0},"fn_name":null},{"line":110,"address":[4979328],"length":1,"stats":{"Line":0},"fn_name":"balance"},{"line":111,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":114,"address":[4979360],"length":1,"stats":{"Line":0},"fn_name":"total_issuance"},{"line":115,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[4979376,4979515],"length":1,"stats":{"Line":7},"fn_name":"new_test_ext"},{"line":140,"address":[4979386],"length":1,"stats":{"Line":7},"fn_name":null}],"covered":4,"coverable":18},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","pallets","equilibrium-curve-amm","src","tests.rs"],"content":"use crate::{mock::*, Error, PoolInfo};\nuse core::convert::From;\nuse frame_support::assert_err_ignore_postinfo;\nuse frame_support::{assert_ok, traits::Currency};\nuse sp_runtime::traits::Saturating;\nuse sp_runtime::Permill;\nuse sp_runtime::{FixedPointNumber, FixedU128};\nuse sp_std::cmp::Ordering;\n\nfn last_event() -\u003e Event {\n    frame_system::pallet::Pallet::\u003cTest\u003e::events()\n        .pop()\n        .expect(\"Event expected\")\n        .event\n}\n\n#[test]\nfn create_pool_successful() {\n    new_test_ext().execute_with(|| {\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n    });\n}\n\n#[test]\nfn create_pool_assets_must_be_nonempty() {\n    new_test_ext().execute_with(|| {\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n\n        assert_err_ignore_postinfo!(\n            CurveAmm::create_pool(\n                Origin::signed(1),\n                vec![],\n                FixedU128::from(1u128),\n                Permill::one(),\n                Permill::one(),\n            ),\n            Error::\u003cTest\u003e::NotEnoughAssets\n        );\n    });\n}\n\n#[test]\nfn create_pool_balance_must_be_more_than_fee() {\n    new_test_ext().execute_with(|| {\n        assert_err_ignore_postinfo!(\n            CurveAmm::create_pool(\n                Origin::signed(1),\n                vec![0, 1],\n                FixedU128::from(1u128),\n                Permill::one(),\n                Permill::one(),\n            ),\n            Error::\u003cTest\u003e::InsufficientFunds\n        );\n    });\n}\n\n#[test]\nfn create_pool_correct_pool_count() {\n    new_test_ext().execute_with(|| {\n        assert_eq!(CurveAmm::pool_count(), 0);\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        assert_eq!(CurveAmm::pool_count(), 1);\n    });\n}\n\n#[test]\nfn create_pool_pool_saved_to_storage() {\n    new_test_ext().execute_with(|| {\n        assert_eq!(CurveAmm::pool_count(), 0);\n        let _ = Balances::deposit_creating(\u00261, 100000000);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        assert_eq!(\n            CurveAmm::pools(0),\n            Some(PoolInfo {\n                pool_asset: 0,\n                assets: vec![0, 1],\n                amplification: FixedU128::from(1u128),\n                fee: Permill::one(),\n                admin_fee: Permill::one(),\n                balances: vec![0u64, 0u64,]\n            })\n        );\n    });\n}\n\n#[test]\nfn create_pool_fee_withdrawn() {\n    new_test_ext().execute_with(|| {\n        let initial_balance = 100000000;\n        let _ = Balances::deposit_creating(\u00261, initial_balance);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        let balance_after_fee = Balances::free_balance(\u00261);\n        assert_eq!(initial_balance - balance_after_fee, 999);\n    });\n}\n\n#[test]\nfn create_pool_on_unbalanced_called() {\n    new_test_ext().execute_with(|| {\n        let initial_balance = 100000000;\n        let _ = Balances::deposit_creating(\u00261, initial_balance);\n        assert_ok!(CurveAmm::create_pool(\n            Origin::signed(1),\n            vec![0, 1],\n            FixedU128::from(1u128),\n            Permill::one(),\n            Permill::one(),\n        ));\n        let balance_after_fee = Balances::free_balance(\u00261);\n        assert_eq!(initial_balance - balance_after_fee, 999);\n    });\n}\n\n#[test]\nfn get_d_successful() {\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_d(\u0026xp, ann);\n\n    // expected d is 1.9781953712751776\n    // expected precision is 1e-13\n    let delta = result\n        .map(|x| {\n            x.saturating_sub(FixedU128::saturating_from_rational(\n                19781953712751776u128,\n                10_000_000_000_000_000u128,\n            ))\n            .saturating_abs()\n        })\n        .map(|x| {\n            x.cmp(\u0026FixedU128::saturating_from_rational(\n                1u128,\n                10_000_000_000_000u128,\n            ))\n        });\n    assert_eq!(delta, Some(Ordering::Less));\n}\n\n#[test]\nfn get_d_empty() {\n    let xp = vec![];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_d(\u0026xp, ann);\n\n    assert_eq!(result, Some(FixedU128::zero()));\n}\n\n#[test]\nfn get_y_successful() {\n    let i = 0;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    // expected y is 0.8703405416689252\n    // expected precision is 1e-13\n    let delta = result\n        .map(|x| {\n            x.saturating_sub(FixedU128::saturating_from_rational(\n                8703405416689252u128,\n                10_000_000_000_000_000u128,\n            ))\n            .saturating_abs()\n        })\n        .map(|x| {\n            x.cmp(\u0026FixedU128::saturating_from_rational(\n                1,\n                10_000_000_000_000u128,\n            ))\n        });\n    assert_eq!(delta, Some(Ordering::Less));\n}\n\n#[test]\nfn get_y_same_coin() {\n    let i = 1;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\n#[test]\nfn get_y_i_greater_than_n() {\n    let i = 33;\n    let j = 1;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\n#[test]\nfn get_y_j_greater_than_n() {\n    let i = 1;\n    let j = 33;\n    let x = FixedU128::saturating_from_rational(111, 100);\n    let xp = vec![\n        FixedU128::saturating_from_rational(11, 10),\n        FixedU128::saturating_from_rational(88, 100),\n    ];\n    let amp = FixedU128::saturating_from_rational(292, 100);\n    let ann = CurveAmm::get_ann(amp, xp.len()).unwrap();\n\n    let result = CurveAmm::get_y(i, j, x, \u0026xp, ann);\n\n    assert_eq!(result, None);\n}\n\nmod curve {\n    use crate::{mock::*, PoolId};\n\n    pub const ALICE_ID: AccountId = 1;\n    pub const BOB_ID: AccountId = 2;\n    pub const CHARLIE_ID: AccountId = 3;\n\n    pub const TEST_POOL_ID: PoolId = 0;\n\n    pub const BALANCE_ONE: Balance = 1_000_000_000;\n\n    mod test_add_liquidity {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::{AccountIdConversion, Saturating};\n        use sp_runtime::{FixedI64, Permill};\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct AddLiquidityTestContext {\n            bob: AccountId,\n            charlie: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_add_liquidity_test() -\u003e AddLiquidityTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let charlie = CHARLIE_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            // mint_bob\n            let _ = Balances::deposit_creating(\u0026bob, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026bob, amount));\n            }\n\n            AddLiquidityTestContext {\n                bob,\n                charlie,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        #[test]\n        fn test_add_liquidity() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    swap,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_add_liquidity_test();\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    initial_amounts.clone(),\n                    0\n                ));\n\n                for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                    assert_eq!(TestAssets::balance(coin, \u0026bob), 0);\n                    assert_eq!(TestAssets::balance(coin, \u0026swap), 2 * amount);\n                }\n\n                assert_eq!(\n                    TestAssets::balance(pool_token, \u0026bob),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount\n                );\n                assert_eq!(\n                    TestAssets::total_issuance(pool_token),\n                    2 * (n_coins as Balance) * BALANCE_ONE * base_amount\n                );\n            });\n        }\n\n        #[test]\n        fn test_add_with_slippage() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let mut amounts = coins.iter().map(|_| FixedI64::one()).collect::\u003cVec\u003c_\u003e\u003e();\n                amounts[0] = amounts[0].saturating_mul(FixedI64::saturating_from_rational(99, 100));\n                amounts[1] =\n                    amounts[1].saturating_mul(FixedI64::saturating_from_rational(101, 100));\n                let amounts = amounts\n                    .iter()\n                    .map(|x| x.into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    amounts,\n                    0\n                ));\n\n                let b = TestAssets::balance(pool_token, \u0026bob) / n_coins as u64;\n\n                assert!(\n                    (FixedI64::saturating_from_rational(999, 1000).into_inner() as Balance) \u003c b\n                        \u0026\u0026 (b \u003c FixedI64::one().into_inner() as Balance)\n                );\n            });\n        }\n\n        macro_rules! add_one_coin_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityTestContext {\n                                bob,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_add_liquidity_test();\n\n                            let idx = $value;\n\n                            let mut amounts = coins.iter().map(|_| 0 as Balance).collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = initial_amounts[idx];\n\n                            assert_ok!(CurveAmm::add_liquidity(\n                                Origin::signed(bob),\n                                pool,\n                                amounts.clone(),\n                                0\n                            ));\n\n                            for (i, \u0026coin) in coins.iter().enumerate() {\n                                assert_eq!(\n                                    TestAssets::balance(coin, \u0026bob),\n                                    initial_amounts[i] - amounts[i]\n                                );\n                                assert_eq!(\n                                    TestAssets::balance(coin, \u0026swap),\n                                    initial_amounts[i] + amounts[i]\n                                );\n                            }\n\n                            let b = TestAssets::balance(pool_token, \u0026bob) / base_amount;\n\n                            assert!(\n                                (FixedI64::saturating_from_rational(999, 1000).into_inner() as Balance) \u003c b\n                                    \u0026\u0026 (b \u003c FixedI64::one().into_inner() as Balance)\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        add_one_coin_tests! {\n            test_add_one_coin_0: 0,\n            test_add_one_coin_1: 1,\n        }\n\n        #[test]\n        fn test_insufficient_balance() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    charlie,\n                    pool,\n                    coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let amounts = coins\n                    .iter()\n                    .map(|_| FixedI64::one().into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(Origin::signed(charlie), pool, amounts, 0),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_min_amount_too_high() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let amounts = coins\n                    .iter()\n                    .map(|_| FixedI64::one().into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                let min_amount = (FixedI64::one().into_inner() as Balance) * n_coins as Balance + 1;\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(Origin::signed(bob), pool, amounts, min_amount),\n                    Error::\u003cTest\u003e::RequiredAmountNotReached\n                );\n            });\n        }\n\n        #[test]\n        fn test_min_amount_with_slippage() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_add_liquidity_test();\n\n                let mut amounts = coins.iter().map(|_| FixedI64::one()).collect::\u003cVec\u003c_\u003e\u003e();\n                amounts[0] = amounts[0].saturating_mul(FixedI64::saturating_from_rational(99, 100));\n                amounts[1] =\n                    amounts[1].saturating_mul(FixedI64::saturating_from_rational(101, 100));\n                let amounts = amounts\n                    .iter()\n                    .map(|x| x.into_inner() as Balance)\n                    .collect::\u003cVec\u003c_\u003e\u003e();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::add_liquidity(\n                        Origin::signed(bob),\n                        pool,\n                        amounts,\n                        FixedI64::saturating_from_integer(n_coins as i64).into_inner() as Balance\n                    ),\n                    Error::\u003cTest\u003e::RequiredAmountNotReached\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let AddLiquidityTestContext {\n                    bob,\n                    pool,\n                    pool_token,\n                    initial_amounts,\n                    ..\n                } = init_add_liquidity_test();\n\n                System::set_block_number(2);\n\n                assert_ok!(CurveAmm::add_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    initial_amounts.clone(),\n                    0\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::AddLiquidity(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_amounts, initial_amounts);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token))\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_add_liquidity_initial {\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::{FixedI64, Permill};\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct AddLiquidityInitialTestContext {\n            alice: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_add_liquidity_initial_test() -\u003e AddLiquidityInitialTestContext {\n            let alice = ALICE_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            AddLiquidityInitialTestContext {\n                alice,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! initial_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityInitialTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                initial_amounts,\n                                ..\n                            } = init_add_liquidity_initial_test();\n\n                            let min_amount: Balance = $value;\n\n                            let amounts = coins\n                                .iter()\n                                .map(|_| FixedI64::one().into_inner() as Balance)\n                                .collect::\u003cVec\u003c_\u003e\u003e();\n\n                            assert_ok!(\n                                CurveAmm::add_liquidity(Origin::signed(alice), pool, amounts.clone(), min_amount)\n                            );\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), initial - amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), amount);\n                            }\n\n                            assert_eq!(\n                                TestAssets::balance(pool_token, \u0026alice),\n                                (n_coins as Balance) * BALANCE_ONE\n                            );\n                            assert_eq!(\n                                TestAssets::total_issuance(pool_token),\n                                (n_coins as Balance) * BALANCE_ONE\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        initial_tests! {\n            test_initial_0: 0,\n            test_initial_2: 2 * BALANCE_ONE,\n        }\n\n        macro_rules! initial_liquidity_missing_coin_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let AddLiquidityInitialTestContext {\n                                alice,\n                                pool,\n                                coins,\n                                ..\n                            } = init_add_liquidity_initial_test();\n\n                            let idx = $value;\n\n                            let mut amounts = coins\n                                .iter()\n                                .map(|_| FixedI64::one().into_inner() as Balance)\n                                .collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = 0;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::add_liquidity(Origin::signed(alice), pool, amounts, 0),\n                                Error::\u003cTest\u003e::WrongAssetAmount\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        initial_liquidity_missing_coin_tests! {\n            test_initial_liquidity_missing_coin_0: 0,\n            test_initial_liquidity_missing_coin_1: 1,\n        }\n    }\n\n    mod test_remove_liquidity {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_test() -\u003e RemoveLiquidityTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! remove_liquidity_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_test();\n\n                            let min_amount = $value;\n\n                            assert_ok!(CurveAmm::remove_liquidity(\n                                Origin::signed(alice),\n                                pool,\n                                (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                initial_amounts.iter().map(|i| i * min_amount).collect()\n                            ));\n\n                            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), 0);\n                            }\n\n                            assert_eq!(\n                                TestAssets::balance(pool_token, \u0026alice),\n                                0\n                            );\n                            assert_eq!(\n                                TestAssets::total_issuance(pool_token),\n                                0\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_liquidity_tests! {\n            test_remove_liquidity_0: 0,\n            test_remove_liquidity_1: 1,\n        }\n\n        #[test]\n        fn test_remove_partial() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    swap,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_remove_liquidity_test();\n\n                let withdraw_amount = initial_amounts.iter().sum::\u003cBalance\u003e() / 2;\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(alice),\n                    pool,\n                    withdraw_amount,\n                    vec![0; n_coins]\n                ));\n\n                for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                    let pool_balance = TestAssets::balance(coin, \u0026swap);\n                    let alice_balance = TestAssets::balance(coin, \u0026alice);\n                    assert_eq!(alice_balance + pool_balance, amount);\n                }\n\n                assert_eq!(\n                    TestAssets::balance(pool_token, \u0026alice),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount - withdraw_amount\n                );\n                assert_eq!(\n                    TestAssets::total_issuance(pool_token),\n                    (n_coins as Balance) * BALANCE_ONE * base_amount - withdraw_amount\n                );\n            });\n        }\n\n        macro_rules! below_min_amount_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityTestContext {\n                                alice,\n                                pool,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_test();\n\n                            let idx = $value;\n\n                            let mut min_amount = initial_amounts.clone();\n                            min_amount[idx] = min_amount[idx] + 1;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::remove_liquidity(\n                                    Origin::signed(alice),\n                                    pool,\n                                    (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                    min_amount,\n                                ),\n                                Error::\u003cTest\u003e::RequiredAmountNotReached\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        below_min_amount_tests! {\n            test_below_min_amount_0: 0,\n            test_below_min_amount_1: 1,\n        }\n\n        #[test]\n        fn test_amount_exceeds_balance() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    pool,\n                    n_coins,\n                    base_amount,\n                    ..\n                } = init_remove_liquidity_test();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity(\n                        Origin::signed(alice),\n                        pool,\n                        (n_coins as Balance) * BALANCE_ONE * base_amount + 1,\n                        vec![0; n_coins],\n                    ),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityTestContext {\n                    alice,\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_test();\n\n                let _ = TestAssets::transfer(pool_token, \u0026alice, \u0026bob, BALANCE_ONE);\n\n                System::set_block_number(2);\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(bob),\n                    pool,\n                    BALANCE_ONE,\n                    vec![0; n_coins],\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::RemoveLiquidity(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token));\n\n                    for (\u0026coin, \u0026amount) in coins.iter().zip(token_amounts.iter()) {\n                        assert_eq!(TestAssets::balance(coin, \u0026bob), amount);\n                    }\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_remove_liquidity_imbalance {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityImbalanceTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_imbalance_test() -\u003e RemoveLiquidityImbalanceTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityImbalanceTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! remove_balanced_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let divisor = $value;\n\n                            let amounts = initial_amounts.iter().map(|i| i / divisor).collect::\u003cVec\u003c_\u003e\u003e();\n                            let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount / divisor;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                Origin::signed(alice),\n                                pool,\n                                amounts.clone(),\n                                max_burn + 1,\n                            ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            assert!(\n                                i128::abs(TestAssets::balance(pool_token, \u0026alice) as i128 - ((n_coins as Balance) * BALANCE_ONE * base_amount - max_burn) as i128) \u003c= 1\n                            );\n                            assert!(\n                                i128::abs(TestAssets::total_issuance(pool_token) as i128 - ((n_coins as Balance) * BALANCE_ONE * base_amount - max_burn) as i128) \u003c= 1\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_balanced_tests! {\n            test_remove_balanced_2: 2,\n            test_remove_balanced_5: 5,\n            test_remove_balanced_10: 10,\n        }\n\n        macro_rules! remove_some_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let idx = $value;\n\n                            let mut amounts = initial_amounts.iter().map(|i| i / 2).collect::\u003cVec\u003c_\u003e\u003e();\n                            amounts[idx] = 0;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                            Origin::signed(alice),\n                                            pool,\n                                            amounts.clone(),\n                                            (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                        ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            let actual_balance = TestAssets::balance(pool_token, \u0026alice);\n                            let actual_total_supply = TestAssets::total_issuance(pool_token);\n                            let ideal_balance = BALANCE_ONE * base_amount * (n_coins as Balance) - BALANCE_ONE * base_amount / 2 * ((n_coins as Balance) - 1);\n\n                            assert_eq!(actual_balance, actual_total_supply);\n                            assert!(ideal_balance * 99 / 100 \u003c actual_balance);\n                            assert!(actual_balance \u003c ideal_balance);\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_some_tests! {\n            test_remove_some_0: 0,\n            test_remove_some_1: 1,\n        }\n\n        macro_rules! remove_one_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let idx = $value;\n\n                            let mut amounts = vec![0; n_coins];\n                            amounts[idx] = initial_amounts[idx] / 2;\n\n                            assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                                            Origin::signed(alice),\n                                            pool,\n                                            amounts.clone(),\n                                            (n_coins as Balance) * BALANCE_ONE * base_amount,\n                                        ));\n\n                            for ((\u0026coin, \u0026amount), \u0026initial) in coins.iter().zip(amounts.iter()).zip(initial_amounts.iter()) {\n                                assert_eq!(TestAssets::balance(coin, \u0026alice), amount);\n                                assert_eq!(TestAssets::balance(coin, \u0026swap), initial - amount);\n                            }\n\n                            let actual_balance = TestAssets::balance(pool_token, \u0026alice);\n                            let actual_total_supply = TestAssets::total_issuance(pool_token);\n                            let ideal_balance = BALANCE_ONE * base_amount * (n_coins as Balance) - BALANCE_ONE * base_amount / 2;\n\n                            assert_eq!(actual_balance, actual_total_supply);\n                            assert!(ideal_balance * 99 / 100 \u003c actual_balance);\n                            assert!(actual_balance \u003c ideal_balance);\n                        });\n                    }\n                )*\n            }\n        }\n\n        remove_one_tests! {\n            test_remove_one_0: 0,\n            test_remove_one_1: 1,\n        }\n\n        macro_rules! exceed_max_burn_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityImbalanceTestContext {\n                                alice,\n                                pool,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_imbalance_test();\n\n                            let divisor = $value;\n\n                            let amounts = initial_amounts.iter().map(|i| i / divisor).collect::\u003cVec\u003c_\u003e\u003e();\n                            let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount / divisor;\n\n                            assert_err_ignore_postinfo!(\n                                CurveAmm::remove_liquidity_imbalance(\n                                    Origin::signed(alice),\n                                    pool,\n                                    amounts.clone(),\n                                    max_burn - 1,\n                                ),\n                                Error::\u003cTest\u003e::RequiredAmountNotReached\n                            );\n                        });\n                    }\n                )*\n            }\n        }\n\n        exceed_max_burn_tests! {\n            test_exceed_max_burn_1: 1,\n            test_exceed_max_burn_2: 2,\n            test_exceed_max_burn_10: 10,\n        }\n\n        #[test]\n        fn test_cannot_remove_zero() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    pool,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity_imbalance(\n                        Origin::signed(alice),\n                        pool,\n                        vec![0; n_coins],\n                        0,\n                    ),\n                    Error::\u003cTest\u003e::WrongAssetAmount\n                );\n            });\n        }\n\n        #[test]\n        fn test_no_total_supply() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    pool,\n                    pool_token,\n                    n_coins,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                assert_ok!(CurveAmm::remove_liquidity(\n                    Origin::signed(alice),\n                    pool,\n                    TestAssets::total_issuance(pool_token),\n                    vec![0; n_coins],\n                ));\n\n                assert_err_ignore_postinfo!(\n                    CurveAmm::remove_liquidity_imbalance(\n                        Origin::signed(alice),\n                        pool,\n                        vec![0; n_coins],\n                        0,\n                    ),\n                    Error::\u003cTest\u003e::InsufficientFunds\n                );\n            });\n        }\n\n        #[test]\n        fn test_event() {\n            new_test_ext().execute_with(|| {\n                let RemoveLiquidityImbalanceTestContext {\n                    alice,\n                    bob,\n                    pool,\n                    pool_token,\n                    coins,\n                    n_coins,\n                    base_amount,\n                    initial_amounts,\n                    ..\n                } = init_remove_liquidity_imbalance_test();\n\n                let _ = TestAssets::transfer(\n                    pool_token,\n                    \u0026alice,\n                    \u0026bob,\n                    TestAssets::balance(pool_token, \u0026alice),\n                );\n\n                System::set_block_number(2);\n\n                let amounts = initial_amounts.iter().map(|i| i / 5).collect::\u003cVec\u003c_\u003e\u003e();\n                let max_burn = (n_coins as Balance) * BALANCE_ONE * base_amount;\n\n                assert_ok!(CurveAmm::remove_liquidity_imbalance(\n                    Origin::signed(bob),\n                    pool,\n                    amounts,\n                    max_burn,\n                ));\n\n                if let Event::curve_amm(crate::pallet::Event::RemoveLiquidityImbalance(\n                    provider,\n                    _,\n                    token_amounts,\n                    _,\n                    _,\n                    token_supply,\n                )) = last_event()\n                {\n                    assert_eq!(provider, bob);\n                    assert_eq!(token_supply, TestAssets::total_issuance(pool_token));\n\n                    for (\u0026coin, \u0026amount) in coins.iter().zip(token_amounts.iter()) {\n                        assert_eq!(TestAssets::balance(coin, \u0026bob), amount);\n                    }\n                } else {\n                    panic!(\"Unexpected event\");\n                }\n            });\n        }\n    }\n\n    mod test_remove_liquidity_one_coin {\n        use super::super::last_event;\n        use super::*;\n        use crate::traits::Assets;\n        use crate::{Error, PoolId, PoolTokenIndex};\n        use frame_support::assert_err_ignore_postinfo;\n        use frame_support::{assert_ok, traits::Currency};\n        use sp_runtime::traits::AccountIdConversion;\n        use sp_runtime::Permill;\n        use sp_runtime::{FixedPointNumber, FixedU128};\n\n        struct RemoveLiquidityOneCoinTestContext {\n            alice: AccountId,\n            bob: AccountId,\n            swap: AccountId,\n            pool: PoolId,\n            pool_token: AssetId,\n            coins: Vec\u003cAssetId\u003e,\n            n_coins: usize,\n            base_amount: Balance,\n            initial_amounts: Vec\u003cBalance\u003e,\n        }\n\n        fn init_remove_liquidity_one_coin_test() -\u003e RemoveLiquidityOneCoinTestContext {\n            let alice = ALICE_ID;\n            let bob = BOB_ID;\n            let swap: u64 = CurveAmmModuleId::get().into_account();\n\n            let pool = TEST_POOL_ID;\n\n            let base_eq_amount: Balance = 100_000_000;\n\n            let base_amount: Balance = 1_000_000;\n\n            // Create pool tokens\n            let coin0 = TestAssets::create_asset().unwrap();\n            let coin1 = TestAssets::create_asset().unwrap();\n\n            assert_eq!(coin0, 0);\n            assert_eq!(coin1, 1);\n\n            let coins = vec![coin0, coin1];\n            let n_coins = coins.len();\n\n            let initial_amounts = coins\n                .iter()\n                .map(|_| base_amount * BALANCE_ONE)\n                .collect::\u003cVec\u003c_\u003e\u003e();\n\n            // Mint Alice\n            let _ = Balances::deposit_creating(\u0026alice, base_eq_amount);\n\n            for (\u0026coin, \u0026amount) in coins.iter().zip(initial_amounts.iter()) {\n                assert_ok!(TestAssets::mint(coin, \u0026alice, amount));\n            }\n\n            // Create pool\n            assert_ok!(CurveAmm::create_pool(\n                Origin::signed(alice),\n                vec![coin0, coin1],\n                FixedU128::saturating_from_integer(360),\n                Permill::zero(),\n                Permill::zero(),\n            ));\n\n            let pool_token = 2;\n\n            // add_initial_liquidity\n            assert_ok!(CurveAmm::add_liquidity(\n                Origin::signed(alice),\n                pool,\n                initial_amounts.clone(),\n                0\n            ));\n\n            RemoveLiquidityOneCoinTestContext {\n                alice,\n                bob,\n                swap,\n                pool,\n                pool_token,\n                coins,\n                n_coins,\n                base_amount,\n                initial_amounts,\n            }\n        }\n\n        macro_rules! amount_received_tests {\n            ($($name:ident: $value:expr,)*) =\u003e {\n                $(\n                    #[test]\n                    fn $name() {\n                        new_test_ext().execute_with(|| {\n                            let RemoveLiquidityOneCoinTestContext {\n                                alice,\n                                swap,\n                                pool,\n                                pool_token,\n                                coins,\n                                n_coins,\n                                base_amount,\n                                initial_amounts,\n                                ..\n                            } = init_remove_liquidity_one_coin_test();\n\n                            let idx: usize = $value;\n\n                            let rate_mod = (100_001, 100_000);\n\n                            assert_ok!(CurveAmm::remove_liquidity_one_coin(\n                                            Origin::signed(alice),\n                                            pool,\n                                            BALANCE_ONE, idx as PoolTokenIndex, 0,\n                                        ));\n\n                            let balance = TestAssets::balance(coins[idx], \u0026alice);\n\n                            assert!(BALANCE_ONE * rate_mod.1 / rate_mod.0 \u003c= balance);\n                            assert!(balance \u003c= BALANCE_ONE);\n                        });\n                    }\n                )*\n            }\n        }\n\n        amount_received_tests! {\n            test_amount_received_0: 0,\n            test_amount_received_1: 1,\n        }\n    }\n}\n","traces":[{"line":9,"address":[5042720,5042777],"length":1,"stats":{"Line":3},"fn_name":"create_pool_successful"},{"line":10,"address":[5042727],"length":1,"stats":{"Line":2},"fn_name":null},{"line":11,"address":[5182919],"length":1,"stats":{"Line":1},"fn_name":null},{"line":12,"address":[5183108,5183183],"length":1,"stats":{"Line":2},"fn_name":null},{"line":13,"address":[5182976],"length":1,"stats":{"Line":1},"fn_name":null},{"line":14,"address":[5183012],"length":1,"stats":{"Line":1},"fn_name":null},{"line":15,"address":[5183063],"length":1,"stats":{"Line":1},"fn_name":null},{"line":16,"address":[5183093],"length":1,"stats":{"Line":1},"fn_name":null},{"line":22,"address":[5042873,5042816],"length":1,"stats":{"Line":3},"fn_name":"create_pool_assets_must_be_nonempty"},{"line":23,"address":[5042823],"length":1,"stats":{"Line":2},"fn_name":null},{"line":24,"address":[5183591],"length":1,"stats":{"Line":1},"fn_name":null},{"line":26,"address":[5184170,5183874,5183824],"length":1,"stats":{"Line":2},"fn_name":null},{"line":27,"address":[5183746],"length":1,"stats":{"Line":1},"fn_name":null},{"line":28,"address":[5183648],"length":1,"stats":{"Line":1},"fn_name":null},{"line":29,"address":[5183674],"length":1,"stats":{"Line":1},"fn_name":null},{"line":30,"address":[5183693],"length":1,"stats":{"Line":1},"fn_name":null},{"line":31,"address":[5183731],"length":1,"stats":{"Line":1},"fn_name":null},{"line":33,"address":[5183866],"length":1,"stats":{"Line":1},"fn_name":null},{"line":39,"address":[5042969,5042912],"length":1,"stats":{"Line":3},"fn_name":"create_pool_balance_must_be_more_than_fee"},{"line":40,"address":[5042919],"length":1,"stats":{"Line":2},"fn_name":null},{"line":41,"address":[5184745,5185085,5184519,5184792],"length":1,"stats":{"Line":3},"fn_name":null},{"line":42,"address":[5184667],"length":1,"stats":{"Line":1},"fn_name":null},{"line":43,"address":[5184535],"length":1,"stats":{"Line":1},"fn_name":null},{"line":44,"address":[5184571],"length":1,"stats":{"Line":1},"fn_name":null},{"line":45,"address":[5184622],"length":1,"stats":{"Line":1},"fn_name":null},{"line":46,"address":[5184652],"length":1,"stats":{"Line":1},"fn_name":null},{"line":48,"address":[5184784],"length":1,"stats":{"Line":1},"fn_name":null},{"line":54,"address":[5043065,5043008],"length":1,"stats":{"Line":3},"fn_name":"create_pool_correct_pool_count"},{"line":55,"address":[5043015],"length":1,"stats":{"Line":2},"fn_name":null},{"line":56,"address":[5185383,5185708],"length":1,"stats":{"Line":1},"fn_name":null},{"line":57,"address":[5185651,5185859],"length":1,"stats":{"Line":2},"fn_name":null},{"line":58,"address":[5186004,5186082],"length":1,"stats":{"Line":2},"fn_name":null},{"line":59,"address":[5185872],"length":1,"stats":{"Line":1},"fn_name":null},{"line":60,"address":[5185908],"length":1,"stats":{"Line":1},"fn_name":null},{"line":61,"address":[5185959],"length":1,"stats":{"Line":1},"fn_name":null},{"line":62,"address":[5185989],"length":1,"stats":{"Line":1},"fn_name":null},{"line":64,"address":[5186537,5186289],"length":1,"stats":{"Line":1},"fn_name":null},{"line":69,"address":[5043161,5043104],"length":1,"stats":{"Line":3},"fn_name":"create_pool_pool_saved_to_storage"},{"line":70,"address":[5043111],"length":1,"stats":{"Line":2},"fn_name":null},{"line":71,"address":[5187148,5186823],"length":1,"stats":{"Line":1},"fn_name":null},{"line":72,"address":[5187305,5187091],"length":1,"stats":{"Line":2},"fn_name":null},{"line":73,"address":[5187459,5187546],"length":1,"stats":{"Line":2},"fn_name":null},{"line":74,"address":[5187318],"length":1,"stats":{"Line":1},"fn_name":null},{"line":75,"address":[5187354],"length":1,"stats":{"Line":1},"fn_name":null},{"line":76,"address":[5187405],"length":1,"stats":{"Line":1},"fn_name":null},{"line":77,"address":[5187441],"length":1,"stats":{"Line":1},"fn_name":null},{"line":79,"address":[5188043,5188520,5188491],"length":1,"stats":{"Line":1},"fn_name":null},{"line":80,"address":[5187779],"length":1,"stats":{"Line":1},"fn_name":null},{"line":81,"address":[5187890],"length":1,"stats":{"Line":1},"fn_name":null},{"line":83,"address":[5187802],"length":1,"stats":{"Line":1},"fn_name":null},{"line":84,"address":[5187845],"length":1,"stats":{"Line":1},"fn_name":null},{"line":85,"address":[5187875],"length":1,"stats":{"Line":1},"fn_name":null},{"line":92,"address":[5043200,5043257],"length":1,"stats":{"Line":3},"fn_name":"create_pool_fee_withdrawn"},{"line":93,"address":[5043207],"length":1,"stats":{"Line":2},"fn_name":null},{"line":94,"address":[5188743],"length":1,"stats":{"Line":1},"fn_name":null},{"line":95,"address":[5188783],"length":1,"stats":{"Line":1},"fn_name":null},{"line":96,"address":[5188974,5189061],"length":1,"stats":{"Line":2},"fn_name":null},{"line":97,"address":[5188833],"length":1,"stats":{"Line":1},"fn_name":null},{"line":98,"address":[5188869],"length":1,"stats":{"Line":1},"fn_name":null},{"line":99,"address":[5188920],"length":1,"stats":{"Line":1},"fn_name":null},{"line":100,"address":[5188956],"length":1,"stats":{"Line":1},"fn_name":null},{"line":102,"address":[5189274],"length":1,"stats":{"Line":1},"fn_name":null},{"line":103,"address":[5189921,5189891,5189648,5189330],"length":1,"stats":{"Line":1},"fn_name":null},{"line":108,"address":[5043353,5043296],"length":1,"stats":{"Line":3},"fn_name":"create_pool_on_unbalanced_called"},{"line":109,"address":[5043303],"length":1,"stats":{"Line":2},"fn_name":null},{"line":110,"address":[5189975],"length":1,"stats":{"Line":1},"fn_name":null},{"line":111,"address":[5190015],"length":1,"stats":{"Line":1},"fn_name":null},{"line":112,"address":[5190293,5190206],"length":1,"stats":{"Line":2},"fn_name":null},{"line":113,"address":[5190065],"length":1,"stats":{"Line":1},"fn_name":null},{"line":114,"address":[5190101],"length":1,"stats":{"Line":1},"fn_name":null},{"line":115,"address":[5190152],"length":1,"stats":{"Line":1},"fn_name":null},{"line":116,"address":[5190188],"length":1,"stats":{"Line":1},"fn_name":null},{"line":118,"address":[5190506],"length":1,"stats":{"Line":1},"fn_name":null},{"line":119,"address":[5190562,5190880,5191153,5191123],"length":1,"stats":{"Line":1},"fn_name":null}],"covered":74,"coverable":74},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","runtime","build.rs"],"content":"use substrate_wasm_builder::WasmBuilder;\n\nfn main() {\n    WasmBuilder::new()\n        .with_current_project()\n        .export_heap_base()\n        .import_memory()\n        .build()\n}\n","traces":[],"covered":0,"coverable":0},{"path":["/","home","rotor","work","src","polka","equilibrium-curve-amm","runtime","src","lib.rs"],"content":"#![cfg_attr(not(feature = \"std\"), no_std)]\n// `construct_runtime!` does a lot of recursion and requires us to increase the limit to 256.\n#![recursion_limit = \"256\"]\n\n// Make the WASM binary available.\n#[cfg(feature = \"std\")]\ninclude!(concat!(env!(\"OUT_DIR\"), \"/wasm_binary.rs\"));\n\nuse pallet_grandpa::fg_primitives;\nuse pallet_grandpa::{AuthorityId as GrandpaId, AuthorityList as GrandpaAuthorityList};\nuse sp_api::impl_runtime_apis;\nuse sp_consensus_aura::sr25519::AuthorityId as AuraId;\nuse sp_core::{crypto::KeyTypeId, OpaqueMetadata};\nuse sp_runtime::traits::Convert;\nuse sp_runtime::traits::{\n    AccountIdLookup, BlakeTwo256, Block as BlockT, IdentifyAccount, NumberFor, Verify,\n};\nuse sp_runtime::{\n    create_runtime_str, generic, impl_opaque_keys,\n    transaction_validity::{TransactionSource, TransactionValidity},\n    ApplyExtrinsicResult, ModuleId, MultiSignature,\n};\nuse sp_runtime::{FixedPointNumber, FixedU128};\nuse sp_std::convert::TryFrom;\nuse sp_std::prelude::*;\n#[cfg(feature = \"std\")]\nuse sp_version::NativeVersion;\nuse sp_version::RuntimeVersion;\n\nuse frame_system::RawOrigin;\nuse pallet_assets::Call as AssetsCall;\nuse sp_runtime::traits::AccountIdConversion;\nuse sp_runtime::traits::Dispatchable;\nuse sp_runtime::MultiAddress;\n\n// A few exports that help ease life for downstream crates.\npub use frame_support::{\n    construct_runtime,\n    dispatch::{DispatchError, DispatchResult},\n    parameter_types,\n    traits::{Currency, EnsureOrigin, KeyOwnerProofSystem, OnUnbalanced, Randomness},\n    weights::{\n        constants::{BlockExecutionWeight, ExtrinsicBaseWeight, RocksDbWeight, WEIGHT_PER_SECOND},\n        IdentityFee, Weight,\n    },\n    StorageValue,\n};\npub use pallet_balances::Call as BalancesCall;\npub use pallet_timestamp::Call as TimestampCall;\nuse pallet_transaction_payment::CurrencyAdapter;\n#[cfg(any(feature = \"std\", test))]\npub use sp_runtime::BuildStorage;\npub use sp_runtime::{Perbill, Permill};\n\n/// Import the equilibrium_curve_amm pallet.\npub use equilibrium_curve_amm;\n\n/// An index to a block.\npub type BlockNumber = u32;\n\n/// Alias to 512-bit hash when used in the context of a transaction signature on the chain.\npub type Signature = MultiSignature;\n\n/// Some way of identifying an account on the chain. We intentionally make it equivalent\n/// to the public key of our transaction signing scheme.\npub type AccountId = \u003c\u003cSignature as Verify\u003e::Signer as IdentifyAccount\u003e::AccountId;\n\n/// The type for looking up accounts. We don't expect more than 4 billion of them, but you\n/// never know...\npub type AccountIndex = u32;\n\n/// Balance of an account.\npub type Balance = u128;\n\n/// Index of a transaction in the chain.\npub type Index = u32;\n\n/// A hash of some data used by the chain.\npub type Hash = sp_core::H256;\n\n/// Digest item type.\npub type DigestItem = generic::DigestItem\u003cHash\u003e;\n\n/// Opaque types. These are used by the CLI to instantiate machinery that don't need to know\n/// the specifics of the runtime. They can then be made to be agnostic over specific formats\n/// of data like extrinsics, allowing for them to continue syncing the network through upgrades\n/// to even the core data structures.\npub mod opaque {\n    use super::*;\n\n    pub use sp_runtime::OpaqueExtrinsic as UncheckedExtrinsic;\n\n    /// Opaque block header type.\n    pub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// Opaque block type.\n    pub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n    /// Opaque block identifier type.\n    pub type BlockId = generic::BlockId\u003cBlock\u003e;\n\n    impl_opaque_keys! {\n        pub struct SessionKeys {\n            pub aura: Aura,\n            pub grandpa: Grandpa,\n        }\n    }\n}\n\npub const VERSION: RuntimeVersion = RuntimeVersion {\n    spec_name: create_runtime_str!(\"node\"),\n    impl_name: create_runtime_str!(\"node\"),\n    authoring_version: 1,\n    spec_version: 1,\n    impl_version: 1,\n    apis: RUNTIME_API_VERSIONS,\n    transaction_version: 1,\n};\n\n/// This determines the average expected block time that we are targetting.\n/// Blocks will be produced at a minimum duration defined by `SLOT_DURATION`.\n/// `SLOT_DURATION` is picked up by `pallet_timestamp` which is in turn picked\n/// up by `pallet_aura` to implement `fn slot_duration()`.\n///\n/// Change this to adjust the block time.\npub const MILLISECS_PER_BLOCK: u64 = 6000;\n\npub const SLOT_DURATION: u64 = MILLISECS_PER_BLOCK;\n\n// Time is measured by number of blocks.\npub const MINUTES: BlockNumber = 60_000 / (MILLISECS_PER_BLOCK as BlockNumber);\npub const HOURS: BlockNumber = MINUTES * 60;\npub const DAYS: BlockNumber = HOURS * 24;\n\n/// The version information used to identify this runtime when compiled natively.\n#[cfg(feature = \"std\")]\npub fn native_version() -\u003e NativeVersion {\n    NativeVersion {\n        runtime_version: VERSION,\n        can_author_with: Default::default(),\n    }\n}\n\nconst NORMAL_DISPATCH_RATIO: Perbill = Perbill::from_percent(75);\n\nparameter_types! {\n    pub const Version: RuntimeVersion = VERSION;\n    pub const BlockHashCount: BlockNumber = 2400;\n    /// We allow for 2 seconds of compute with a 6 second average block time.\n    pub BlockWeights: frame_system::limits::BlockWeights = frame_system::limits::BlockWeights\n        ::with_sensible_defaults(2 * WEIGHT_PER_SECOND, NORMAL_DISPATCH_RATIO);\n    pub BlockLength: frame_system::limits::BlockLength = frame_system::limits::BlockLength\n        ::max_with_normal_ratio(5 * 1024 * 1024, NORMAL_DISPATCH_RATIO);\n    pub const SS58Prefix: u8 = 42;\n}\n\n// Configure FRAME pallets to include in runtime.\n\nimpl frame_system::Config for Runtime {\n    /// The basic call filter to use in dispatchable.\n    type BaseCallFilter = ();\n    /// Block \u0026 extrinsics weights: base values and limits.\n    type BlockWeights = BlockWeights;\n    /// The maximum length of a block (in bytes).\n    type BlockLength = BlockLength;\n    /// The identifier used to distinguish between accounts.\n    type AccountId = AccountId;\n    /// The aggregated dispatch type that is available for extrinsics.\n    type Call = Call;\n    /// The lookup mechanism to get account ID from whatever is passed in dispatchers.\n    type Lookup = AccountIdLookup\u003cAccountId, ()\u003e;\n    /// The index type for storing how many extrinsics an account has signed.\n    type Index = Index;\n    /// The index type for blocks.\n    type BlockNumber = BlockNumber;\n    /// The type for hashing blocks and tries.\n    type Hash = Hash;\n    /// The hashing algorithm used.\n    type Hashing = BlakeTwo256;\n    /// The header type.\n    type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n    /// The ubiquitous event type.\n    type Event = Event;\n    /// The ubiquitous origin type.\n    type Origin = Origin;\n    /// Maximum number of block number to block hash mappings to keep (oldest pruned first).\n    type BlockHashCount = BlockHashCount;\n    /// The weight of database operations that the runtime can invoke.\n    type DbWeight = RocksDbWeight;\n    /// Version of the runtime.\n    type Version = Version;\n    /// Converts a module to the index of the module in `construct_runtime!`.\n    ///\n    /// This type is being generated by `construct_runtime!`.\n    type PalletInfo = PalletInfo;\n    /// What to do if a new account is created.\n    type OnNewAccount = ();\n    /// What to do if an account is fully reaped from the system.\n    type OnKilledAccount = ();\n    /// The data to be stored in an account.\n    type AccountData = pallet_balances::AccountData\u003cBalance\u003e;\n    /// Weight information for the extrinsics of this pallet.\n    type SystemWeightInfo = ();\n    /// This is used as an identifier of the chain. 42 is the generic substrate prefix.\n    type SS58Prefix = SS58Prefix;\n}\n\nimpl pallet_aura::Config for Runtime {\n    type AuthorityId = AuraId;\n}\n\nimpl pallet_grandpa::Config for Runtime {\n    type Event = Event;\n    type Call = Call;\n\n    type KeyOwnerProofSystem = ();\n\n    type KeyOwnerProof =\n        \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(KeyTypeId, GrandpaId)\u003e\u003e::Proof;\n\n    type KeyOwnerIdentification = \u003cSelf::KeyOwnerProofSystem as KeyOwnerProofSystem\u003c(\n        KeyTypeId,\n        GrandpaId,\n    )\u003e\u003e::IdentificationTuple;\n\n    type HandleEquivocation = ();\n\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const MinimumPeriod: u64 = SLOT_DURATION / 2;\n}\n\nimpl pallet_timestamp::Config for Runtime {\n    /// A timestamp: milliseconds since the unix epoch.\n    type Moment = u64;\n    type OnTimestampSet = Aura;\n    type MinimumPeriod = MinimumPeriod;\n    type WeightInfo = ();\n}\n\nparameter_types! {\n    pub const ExistentialDeposit: u128 = 500;\n    pub const MaxLocks: u32 = 50;\n}\n\nimpl pallet_balances::Config for Runtime {\n    type MaxLocks = MaxLocks;\n    /// The type for recording an account's balance.\n    type Balance = Balance;\n    /// The ubiquitous event type.\n    type Event = Event;\n    type DustRemoval = ();\n    type ExistentialDeposit = ExistentialDeposit;\n    type AccountStore = System;\n    type WeightInfo = pallet_balances::weights::SubstrateWeight\u003cRuntime\u003e;\n}\n\nparameter_types! {\n    pub const TransactionByteFee: Balance = 1;\n}\n\nimpl pallet_transaction_payment::Config for Runtime {\n    type OnChargeTransaction = CurrencyAdapter\u003cBalances, ()\u003e;\n    type TransactionByteFee = TransactionByteFee;\n    type WeightToFee = IdentityFee\u003cBalance\u003e;\n    type FeeMultiplierUpdate = ();\n}\n\nimpl pallet_sudo::Config for Runtime {\n    type Event = Event;\n    type Call = Call;\n}\n\ntype AssetId = u32;\n\nparameter_types! {\n    pub const AssetDepositBase: Balance = 1;\n    pub const AssetDepositPerZombie: Balance = 1;\n    pub const StringLimit: u32 = 50;\n    pub const MetadataDepositBase: Balance = 1;\n    pub const MetadataDepositPerByte: Balance = 1;\n}\n\npub struct EnsureCurveAmm;\nimpl EnsureOrigin\u003cOrigin\u003e for EnsureCurveAmm {\n    type Success = AccountId;\n    fn try_origin(o: Origin) -\u003e Result\u003cSelf::Success, Origin\u003e {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n\n        let result: Result\u003cRawOrigin\u003cAccountId\u003e, Origin\u003e = o.into();\n\n        result.and_then(|o| match o {\n            RawOrigin::Signed(id) if id == account_id =\u003e Ok(id),\n            r =\u003e Err(Origin::from(r)),\n        })\n    }\n\n    #[cfg(feature = \"runtime-benchmarks\")]\n    fn successful_origin() -\u003e Origin {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        Origin::from(RawOrigin::Signed(account_id))\n    }\n}\n\nimpl pallet_assets::Config for Runtime {\n    type Event = Event;\n    type Balance = Balance;\n    type AssetId = AssetId;\n    type Currency = Balances;\n    type ForceOrigin = EnsureCurveAmm;\n    type AssetDepositBase = AssetDepositBase;\n    type AssetDepositPerZombie = AssetDepositPerZombie;\n    type StringLimit = StringLimit;\n    type MetadataDepositBase = MetadataDepositBase;\n    type MetadataDepositPerByte = MetadataDepositPerByte;\n    type WeightInfo = pallet_assets::weights::SubstrateWeight\u003cRuntime\u003e;\n}\n\nparameter_types! {\n    pub const CreationFee: Balance = 999;\n    pub const CurveAmmModuleId: ModuleId = ModuleId(*b\"eq/crvam\");\n    pub Precision: FixedU128 = FixedU128::saturating_from_rational(1, 1_000_000);\n}\n\ntype Number = FixedU128;\n\npub struct EmptyUnbalanceHandler;\n\nimpl OnUnbalanced\u003c\u003cpallet_balances::Pallet\u003cRuntime\u003e as Currency\u003cAccountId\u003e\u003e::NegativeImbalance\u003e\n    for EmptyUnbalanceHandler\n{\n}\n\npub struct FixedU128Convert;\n\nimpl Convert\u003cPermill, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Permill) -\u003e FixedU128 {\n        a.into()\n    }\n}\n\nimpl Convert\u003cBalance, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: Balance) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl Convert\u003cu8, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: u8) -\u003e FixedU128 {\n        FixedU128::saturating_from_integer(a)\n    }\n}\n\nimpl equilibrium_curve_amm::traits::CheckedConvert\u003cusize, FixedU128\u003e for FixedU128Convert {\n    fn convert(a: usize) -\u003e Option\u003cFixedU128\u003e {\n        Some(FixedU128::saturating_from_integer(u128::try_from(a).ok()?))\n    }\n}\n\nimpl Convert\u003cFixedU128, Balance\u003e for FixedU128Convert {\n    fn convert(a: FixedU128) -\u003e Balance {\n        a.into_inner() / FixedU128::accuracy()\n    }\n}\n\npub struct FrameAssets;\n\n/// NOTE: Please do not use this implementation in production.\n/// It has some major issues. But it is a great example on the other hand.\n/// Trait `equilibrium_curve_amm::traits::Assets` expects that implementation\n/// will generate asset id for the new asset on it's own. But `pallet-assets` in contrast\n/// expects that asset id will be provided by the caller. The only thing we can do here\n/// is to guess asset id and hope that it is not in use.\nimpl equilibrium_curve_amm::traits::Assets\u003cAssetId, Balance, AccountId\u003e for FrameAssets {\n    fn create_asset() -\u003e Result\u003cAssetId, DispatchError\u003e {\n        fn random_u32_seed() -\u003e u32 {\n            let seed = RandomnessCollectiveFlip::random_seed();\n            let seed_bytes = seed.as_fixed_bytes();\n            let small_seed_bytes = [seed_bytes[0], seed_bytes[1], seed_bytes[2], seed_bytes[3]];\n            let small_seed: u32 = u32::from_le_bytes(small_seed_bytes);\n\n            small_seed\n        }\n\n        /// See https://en.wikipedia.org/wiki/Linear_congruential_generator\n        fn lcg(seed: u32) -\u003e u32 {\n            const A: u32 = 1664525;\n            const C: u32 = 1013904223;\n\n            A.overflowing_mul(seed).0.overflowing_add(C).0\n        }\n\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(account_id);\n\n        // Guessing unused asset id\n        let mut seed = random_u32_seed();\n        for _ in 0..10 {\n            seed = lcg(seed);\n\n            let call = Call::Assets(AssetsCall::force_create(seed, multi_address.clone(), 0, 1));\n            if call.dispatch(origin.clone()).map_err(|x| x.error).is_ok() {\n                return Ok(seed);\n            }\n        }\n\n        Err(DispatchError::Other(\u0026\"Out of luck\"))\n    }\n\n    fn mint(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::mint(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn burn(asset: AssetId, dest: \u0026AccountId, amount: Balance) -\u003e DispatchResult {\n        let module_id = CurveAmmModuleId::get();\n        let account_id: AccountId = module_id.into_account();\n        let raw_origin = RawOrigin::Signed(account_id.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::burn(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn transfer(\n        asset: AssetId,\n        source: \u0026AccountId,\n        dest: \u0026AccountId,\n        amount: Balance,\n    ) -\u003e DispatchResult {\n        let raw_origin = RawOrigin::Signed(source.clone());\n        let origin: Origin = raw_origin.into();\n\n        let multi_address: MultiAddress\u003cAccountId, ()\u003e = MultiAddress::Id(dest.clone());\n\n        let call = Call::Assets(AssetsCall::transfer(asset, multi_address, amount));\n        call.dispatch(origin.clone()).map_err(|x| x.error)?;\n\n        Ok(())\n    }\n\n    fn balance(asset: AssetId, who: \u0026AccountId) -\u003e Balance {\n        Assets::balance(asset, who.clone())\n    }\n\n    fn total_issuance(asset: AssetId) -\u003e Balance {\n        Assets::total_supply(asset)\n    }\n}\n\n/// Configure the pallet equilibrium_curve_amm in pallets/equilibrium_curve_amm.\nimpl equilibrium_curve_amm::Config for Runtime {\n    type Event = Event;\n    type AssetId = AssetId;\n    type Balance = Balance;\n    type Currency = pallet_balances::Pallet\u003cRuntime\u003e;\n    type CreationFee = CreationFee;\n    type Assets = FrameAssets;\n    type OnUnbalanced = EmptyUnbalanceHandler;\n    type ModuleId = CurveAmmModuleId;\n\n    type Number = Number;\n    type Precision = Precision;\n    type Convert = FixedU128Convert;\n}\n\n// Create the runtime by composing the FRAME pallets that were previously configured.\nconstruct_runtime!(\n    pub enum Runtime where\n        Block = Block,\n        NodeBlock = opaque::Block,\n        UncheckedExtrinsic = UncheckedExtrinsic\n    {\n        System: frame_system::{Module, Call, Config, Storage, Event\u003cT\u003e},\n        RandomnessCollectiveFlip: pallet_randomness_collective_flip::{Module, Call, Storage},\n        Timestamp: pallet_timestamp::{Module, Call, Storage, Inherent},\n        Aura: pallet_aura::{Module, Config\u003cT\u003e},\n        Grandpa: pallet_grandpa::{Module, Call, Storage, Config, Event},\n        Assets: pallet_assets::{Module, Call, Storage, Event\u003cT\u003e},\n        Balances: pallet_balances::{Module, Call, Storage, Config\u003cT\u003e, Event\u003cT\u003e},\n        TransactionPayment: pallet_transaction_payment::{Module, Storage},\n        Sudo: pallet_sudo::{Module, Call, Config\u003cT\u003e, Storage, Event\u003cT\u003e},\n        // Include the custom logic from the equilibrium_curve_amm pallet in the runtime.\n        CurveAmm: equilibrium_curve_amm::{Module, Call, Storage, Event\u003cT\u003e},\n    }\n);\n\n/// The address format for describing accounts.\npub type Address = sp_runtime::MultiAddress\u003cAccountId, ()\u003e;\n/// Block header type as expected by this runtime.\npub type Header = generic::Header\u003cBlockNumber, BlakeTwo256\u003e;\n/// Block type as expected by this runtime.\npub type Block = generic::Block\u003cHeader, UncheckedExtrinsic\u003e;\n/// A Block signed with a Justification\npub type SignedBlock = generic::SignedBlock\u003cBlock\u003e;\n/// BlockId type as expected by this runtime.\npub type BlockId = generic::BlockId\u003cBlock\u003e;\n/// The SignedExtension to the basic transaction logic.\npub type SignedExtra = (\n    frame_system::CheckSpecVersion\u003cRuntime\u003e,\n    frame_system::CheckTxVersion\u003cRuntime\u003e,\n    frame_system::CheckGenesis\u003cRuntime\u003e,\n    frame_system::CheckEra\u003cRuntime\u003e,\n    frame_system::CheckNonce\u003cRuntime\u003e,\n    frame_system::CheckWeight\u003cRuntime\u003e,\n    pallet_transaction_payment::ChargeTransactionPayment\u003cRuntime\u003e,\n);\n/// Unchecked extrinsic type as expected by this runtime.\npub type UncheckedExtrinsic = generic::UncheckedExtrinsic\u003cAddress, Call, Signature, SignedExtra\u003e;\n/// Extrinsic type that has already been checked.\npub type CheckedExtrinsic = generic::CheckedExtrinsic\u003cAccountId, Call, SignedExtra\u003e;\n/// Executive: handles dispatch to the various modules.\npub type Executive = frame_executive::Executive\u003c\n    Runtime,\n    Block,\n    frame_system::ChainContext\u003cRuntime\u003e,\n    Runtime,\n    AllModules,\n\u003e;\n\nimpl_runtime_apis! {\n    impl sp_api::Core\u003cBlock\u003e for Runtime {\n        fn version() -\u003e RuntimeVersion {\n            VERSION\n        }\n\n        fn execute_block(block: Block) {\n            Executive::execute_block(block)\n        }\n\n        fn initialize_block(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::initialize_block(header)\n        }\n    }\n\n    impl sp_api::Metadata\u003cBlock\u003e for Runtime {\n        fn metadata() -\u003e OpaqueMetadata {\n            Runtime::metadata().into()\n        }\n    }\n\n    impl sp_block_builder::BlockBuilder\u003cBlock\u003e for Runtime {\n        fn apply_extrinsic(extrinsic: \u003cBlock as BlockT\u003e::Extrinsic) -\u003e ApplyExtrinsicResult {\n            Executive::apply_extrinsic(extrinsic)\n        }\n\n        fn finalize_block() -\u003e \u003cBlock as BlockT\u003e::Header {\n            Executive::finalize_block()\n        }\n\n        fn inherent_extrinsics(data: sp_inherents::InherentData) -\u003e Vec\u003c\u003cBlock as BlockT\u003e::Extrinsic\u003e {\n            data.create_extrinsics()\n        }\n\n        fn check_inherents(\n            block: Block,\n            data: sp_inherents::InherentData,\n        ) -\u003e sp_inherents::CheckInherentsResult {\n            data.check_extrinsics(\u0026block)\n        }\n\n        fn random_seed() -\u003e \u003cBlock as BlockT\u003e::Hash {\n            RandomnessCollectiveFlip::random_seed()\n        }\n    }\n\n    impl sp_transaction_pool::runtime_api::TaggedTransactionQueue\u003cBlock\u003e for Runtime {\n        fn validate_transaction(\n            source: TransactionSource,\n            tx: \u003cBlock as BlockT\u003e::Extrinsic,\n        ) -\u003e TransactionValidity {\n            Executive::validate_transaction(source, tx)\n        }\n    }\n\n    impl sp_offchain::OffchainWorkerApi\u003cBlock\u003e for Runtime {\n        fn offchain_worker(header: \u0026\u003cBlock as BlockT\u003e::Header) {\n            Executive::offchain_worker(header)\n        }\n    }\n\n    impl sp_consensus_aura::AuraApi\u003cBlock, AuraId\u003e for Runtime {\n        fn slot_duration() -\u003e u64 {\n            Aura::slot_duration()\n        }\n\n        fn authorities() -\u003e Vec\u003cAuraId\u003e {\n            Aura::authorities()\n        }\n    }\n\n    impl sp_session::SessionKeys\u003cBlock\u003e for Runtime {\n        fn generate_session_keys(seed: Option\u003cVec\u003cu8\u003e\u003e) -\u003e Vec\u003cu8\u003e {\n            opaque::SessionKeys::generate(seed)\n        }\n\n        fn decode_session_keys(\n            encoded: Vec\u003cu8\u003e,\n        ) -\u003e Option\u003cVec\u003c(Vec\u003cu8\u003e, KeyTypeId)\u003e\u003e {\n            opaque::SessionKeys::decode_into_raw_public_keys(\u0026encoded)\n        }\n    }\n\n    impl fg_primitives::GrandpaApi\u003cBlock\u003e for Runtime {\n        fn grandpa_authorities() -\u003e GrandpaAuthorityList {\n            Grandpa::grandpa_authorities()\n        }\n\n        fn submit_report_equivocation_unsigned_extrinsic(\n            _equivocation_proof: fg_primitives::EquivocationProof\u003c\n                \u003cBlock as BlockT\u003e::Hash,\n                NumberFor\u003cBlock\u003e,\n            \u003e,\n            _key_owner_proof: fg_primitives::OpaqueKeyOwnershipProof,\n        ) -\u003e Option\u003c()\u003e {\n            None\n        }\n\n        fn generate_key_ownership_proof(\n            _set_id: fg_primitives::SetId,\n            _authority_id: GrandpaId,\n        ) -\u003e Option\u003cfg_primitives::OpaqueKeyOwnershipProof\u003e {\n            // NOTE: this is the only implementation possible since we've\n            // defined our key owner proof type as a bottom type (i.e. a type\n            // with no values).\n            None\n        }\n    }\n\n    impl frame_system_rpc_runtime_api::AccountNonceApi\u003cBlock, AccountId, Index\u003e for Runtime {\n        fn account_nonce(account: AccountId) -\u003e Index {\n            System::account_nonce(account)\n        }\n    }\n\n    impl pallet_transaction_payment_rpc_runtime_api::TransactionPaymentApi\u003cBlock, Balance\u003e for Runtime {\n        fn query_info(\n            uxt: \u003cBlock as BlockT\u003e::Extrinsic,\n            len: u32,\n        ) -\u003e pallet_transaction_payment_rpc_runtime_api::RuntimeDispatchInfo\u003cBalance\u003e {\n            TransactionPayment::query_info(uxt, len)\n        }\n        fn query_fee_details(\n            uxt: \u003cBlock as BlockT\u003e::Extrinsic,\n            len: u32,\n        ) -\u003e pallet_transaction_payment::FeeDetails\u003cBalance\u003e {\n            TransactionPayment::query_fee_details(uxt, len)\n        }\n    }\n\n    #[cfg(feature = \"runtime-benchmarks\")]\n    impl frame_benchmarking::Benchmark\u003cBlock\u003e for Runtime {\n        fn dispatch_benchmark(\n            config: frame_benchmarking::BenchmarkConfig\n        ) -\u003e Result\u003cVec\u003cframe_benchmarking::BenchmarkBatch\u003e, sp_runtime::RuntimeString\u003e {\n            use frame_benchmarking::{Benchmarking, BenchmarkBatch, add_benchmark, TrackedStorageKey};\n\n            use frame_system_benchmarking::Module as SystemBench;\n            impl frame_system_benchmarking::Config for Runtime {}\n\n            let whitelist: Vec\u003cTrackedStorageKey\u003e = vec![\n                // Block Number\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef702a5c1b19ab7a04f536c519aca4983ac\").to_vec().into(),\n                // Total Issuance\n                hex_literal::hex!(\"c2261276cc9d1f8598ea4b6a74b15c2f57c875e4cff74148e4628f264b974c80\").to_vec().into(),\n                // Execution Phase\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef7ff553b5a9862a516939d82b3d3d8661a\").to_vec().into(),\n                // Event Count\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef70a98fdbe9ce6c55837576c60c7af3850\").to_vec().into(),\n                // System Events\n                hex_literal::hex!(\"26aa394eea5630e07c48ae0c9558cef780d41e5e16056765bc8461851072c9d7\").to_vec().into(),\n            ];\n\n            let mut batches = Vec::\u003cBenchmarkBatch\u003e::new();\n            let params = (\u0026config, \u0026whitelist);\n\n            add_benchmark!(params, batches, frame_system, SystemBench::\u003cRuntime\u003e);\n            add_benchmark!(params, batches, pallet_balances, Balances);\n            add_benchmark!(params, batches, pallet_timestamp, Timestamp);\n\n            if batches.is_empty() { return Err(\"Benchmark not found for this pallet.\".into()) }\n            Ok(batches)\n        }\n    }\n}\n","traces":[{"line":91,"address":[4379030,4378327,4379055,4379134,4379110,4378114,4378821,4378501,4378295,4378651],"length":1,"stats":{"Line":0},"fn_name":null},{"line":126,"address":[5727904],"length":1,"stats":{"Line":0},"fn_name":"native_version"},{"line":129,"address":[5727911],"length":1,"stats":{"Line":0},"fn_name":null},{"line":136,"address":[5728183],"length":1,"stats":{"Line":0},"fn_name":null},{"line":139,"address":[5728247],"length":1,"stats":{"Line":1},"fn_name":null},{"line":141,"address":[5728292],"length":1,"stats":{"Line":0},"fn_name":null},{"line":267,"address":[4330036],"length":1,"stats":{"Line":0},"fn_name":null},{"line":276,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":280,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":281,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":284,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":285,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":288,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":294,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":297,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":298,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":301,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":302,"address":[],"length":0,"stats":{"Line":0},"fn_name":null},{"line":328,"address":[4337473,4331028,4335152,4335711,4343808,4331996,4340155,4331388,4339418,4333410,4331270,4344363,4344480,4331450,4336225,4341736,4342671,4336256,4337508,4338532,4334788,4333280,4337778,4337973,4336530,4332486,4338769,4344000,4338597,4331698,4332182,4337089,4333729,4339364,4332306,4343883,4344054,4336163,4333760,4338721,4330544,4344468,4334593,4333136,4336101,4331878,4337154,4331574,4343046,4337284,4336465,4333475,4336335,4337648,4344228,4335012,4330358,4330096,4336260,4342274,4338272,4336880,4330966,4342975,4337713,4343748,4335539,4344348,4334723,4335971,4336660,4341406,4344042,4335087,4344096,4339310,4331924,4336884,4336849,4340726,4337504,4339788,4332976,4332852,4339536,4333904,4339754,4331920,4338942,4338884,4337349,4336036,4338659,4334528,4334977,4334384,4338128,4331312,4330296,4332790,4343868,4333345,4330420,4332120,4334291,4334853,4330172,4344423,4334353,4339644,4335347,4343943,4340375,4333540,4332368,4333764,4331152,4333215,4331819,4339610,4334229,4339137,4338402,4335636,4335282,4333969,4338467,4343988,4331211,4330780,4339050,4342142,4332427,4332666,4339680,4335412,4336725,4332728,4341604,4344288,4332532,4338207,4334034,4336595,4339964,4341006,4338035,4330234,4333667,4332058,4336959,4338097,4342791,4342482,4343928,4336787,4334388,4338337,4330704,4334164,4333035,4331090,4335601,4335841,4339252,4340518,4335477,4341198,4337411,4337583,4332604,4334099,4337219,4343277,4341111,4331316,4335906,4330842,4331636,4338996,4344129,4337843,4344408,4334915,4343157,4331512,4330603,4330662,4337908,4335217,4330100,4332528,4332914,4344576,4333605,4333094,4333140,4330482,4330708,4338132,4336400,4344534,4341944,4335776,4334658,4344243,4343763,4337024,4343649,4331760,4330904,4334463,4343823,4333839,4344522,4335008,4332244,4335632,4344303],"length":1,"stats":{"Line":4},"fn_name":"index\u003cpallet_sudo::Module\u003cnode_runtime::Runtime\u003e\u003e"},{"line":334,"address":[4339742,4338869,4339237,4339598],"length":1,"stats":{"Line":0},"fn_name":null},{"line":338,"address":[4338926,4339294],"length":1,"stats":{"Line":0},"fn_name":null},{"line":339,"address":[4338984,4339352],"length":1,"stats":{"Line":0},"fn_name":null},{"line":341,"address":[4339406,4339038],"length":1,"stats":{"Line":0},"fn_name":null},{"line":343,"address":[4339092,4339460],"length":1,"stats":{"Line":0},"fn_name":null},{"line":380,"address":[5676765,5663849,5662848,5664447,5671057,5670402,5669294,5666932,5660400,5671404,5672795,5668519,5671707,5672236,5665699,5668582,5665107,5666286,5675858,5670973,5673042,5667164,5670749,5675113,5673878,5660509,5668279,5666349,5667248,5664883,5666046,5673564,5674291,5671644,5663072,5662420,5675337,5676056],"length":1,"stats":{"Line":0},"fn_name":"dispatch"},{"line":382,"address":[5745184],"length":1,"stats":{"Line":0},"fn_name":"version"},{"line":383,"address":[5745191],"length":1,"stats":{"Line":0},"fn_name":null},{"line":386,"address":[5662770],"length":1,"stats":{"Line":0},"fn_name":null},{"line":387,"address":[5745239],"length":1,"stats":{"Line":0},"fn_name":null},{"line":390,"address":[5745296],"length":1,"stats":{"Line":0},"fn_name":"initialize_block"},{"line":391,"address":[5745304],"length":1,"stats":{"Line":0},"fn_name":null},{"line":396,"address":[5745312],"length":1,"stats":{"Line":0},"fn_name":"metadata"},{"line":397,"address":[5745319],"length":1,"stats":{"Line":0},"fn_name":null},{"line":402,"address":[5664797],"length":1,"stats":{"Line":0},"fn_name":null},{"line":403,"address":[5745386],"length":1,"stats":{"Line":0},"fn_name":null},{"line":406,"address":[5745456],"length":1,"stats":{"Line":0},"fn_name":"finalize_block"},{"line":407,"address":[5745467],"length":1,"stats":{"Line":0},"fn_name":null},{"line":410,"address":[5665990],"length":1,"stats":{"Line":0},"fn_name":null},{"line":411,"address":[5745505],"length":1,"stats":{"Line":0},"fn_name":null},{"line":414,"address":[5745568,5745663],"length":1,"stats":{"Line":0},"fn_name":"check_inherents"},{"line":415,"address":[5666798,5666691],"length":1,"stats":{"Line":0},"fn_name":null},{"line":416,"address":[5666758,5666860],"length":1,"stats":{"Line":0},"fn_name":null},{"line":418,"address":[5745580],"length":1,"stats":{"Line":0},"fn_name":null},{"line":421,"address":[5745712],"length":1,"stats":{"Line":0},"fn_name":"random_seed"},{"line":422,"address":[5745723],"length":1,"stats":{"Line":0},"fn_name":null},{"line":427,"address":[5745744],"length":1,"stats":{"Line":0},"fn_name":"validate_transaction"},{"line":428,"address":[5668100],"length":1,"stats":{"Line":0},"fn_name":null},{"line":429,"address":[5668111],"length":1,"stats":{"Line":0},"fn_name":null},{"line":431,"address":[5745762],"length":1,"stats":{"Line":0},"fn_name":null},{"line":436,"address":[5745856],"length":1,"stats":{"Line":0},"fn_name":"offchain_worker"},{"line":437,"address":[5745864],"length":1,"stats":{"Line":0},"fn_name":null},{"line":442,"address":[5745872],"length":1,"stats":{"Line":0},"fn_name":"slot_duration"},{"line":443,"address":[5745876],"length":1,"stats":{"Line":0},"fn_name":null},{"line":446,"address":[5745904],"length":1,"stats":{"Line":0},"fn_name":"authorities"},{"line":447,"address":[5745915],"length":1,"stats":{"Line":0},"fn_name":null},{"line":452,"address":[5670693],"length":1,"stats":{"Line":0},"fn_name":null},{"line":453,"address":[5745943],"length":1,"stats":{"Line":0},"fn_name":null},{"line":456,"address":[5746098,5746000],"length":1,"stats":{"Line":0},"fn_name":"decode_session_keys"},{"line":457,"address":[5671348],"length":1,"stats":{"Line":0},"fn_name":null},{"line":459,"address":[5746007],"length":1,"stats":{"Line":0},"fn_name":null},{"line":464,"address":[5746128],"length":1,"stats":{"Line":0},"fn_name":"grandpa_authorities"},{"line":465,"address":[5746139],"length":1,"stats":{"Line":0},"fn_name":null},{"line":468,"address":[5746160],"length":1,"stats":{"Line":0},"fn_name":"submit_report_equivocation_unsigned_extrinsic"},{"line":469,"address":[5672591,5672685],"length":1,"stats":{"Line":0},"fn_name":null},{"line":473,"address":[5672731,5672637],"length":1,"stats":{"Line":0},"fn_name":null},{"line":475,"address":[5746164],"length":1,"stats":{"Line":0},"fn_name":null},{"line":478,"address":[5746208],"length":1,"stats":{"Line":0},"fn_name":"generate_key_ownership_proof"},{"line":479,"address":[5673420],"length":1,"stats":{"Line":0},"fn_name":null},{"line":480,"address":[5673436],"length":1,"stats":{"Line":0},"fn_name":null},{"line":485,"address":[5746216],"length":1,"stats":{"Line":0},"fn_name":null},{"line":490,"address":[5674227],"length":1,"stats":{"Line":0},"fn_name":null},{"line":491,"address":[5746228],"length":1,"stats":{"Line":0},"fn_name":null},{"line":496,"address":[5746288],"length":1,"stats":{"Line":0},"fn_name":"query_info"},{"line":497,"address":[5674929,5675012],"length":1,"stats":{"Line":0},"fn_name":null},{"line":498,"address":[5674996],"length":1,"stats":{"Line":0},"fn_name":null},{"line":500,"address":[5746305],"length":1,"stats":{"Line":0},"fn_name":null},{"line":502,"address":[5746384],"length":1,"stats":{"Line":0},"fn_name":"query_fee_details"},{"line":503,"address":[5675784,5675716],"length":1,"stats":{"Line":0},"fn_name":null},{"line":504,"address":[5675768],"length":1,"stats":{"Line":0},"fn_name":null},{"line":506,"address":[5746401],"length":1,"stats":{"Line":0},"fn_name":null}],"covered":2,"coverable":80}]};
    </script>
    <script crossorigin>/** @license React v16.13.1
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
'use strict';(function(d,r){"object"===typeof exports&&"undefined"!==typeof module?r(exports):"function"===typeof define&&define.amd?define(["exports"],r):(d=d||self,r(d.React={}))})(this,function(d){function r(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function w(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function da(){}function L(a,b,c){this.props=a;this.context=b;this.refs=ba;this.updater=c||ca}function ea(a,b,c){var g,e={},fa=null,d=null;if(null!=b)for(g in void 0!==b.ref&&(d=b.ref),void 0!==b.key&&(fa=""+b.key),b)ha.call(b,g)&&!ia.hasOwnProperty(g)&&(e[g]=b[g]);var h=arguments.length-2;if(1===h)e.children=c;else if(1<h){for(var k=Array(h),f=0;f<h;f++)k[f]=arguments[f+2];e.children=k}if(a&&a.defaultProps)for(g in h=a.defaultProps,
h)void 0===e[g]&&(e[g]=h[g]);return{$$typeof:x,type:a,key:fa,ref:d,props:e,_owner:M.current}}function va(a,b){return{$$typeof:x,type:a.type,key:b,ref:a.ref,props:a.props,_owner:a._owner}}function N(a){return"object"===typeof a&&null!==a&&a.$$typeof===x}function wa(a){var b={"=":"=0",":":"=2"};return"$"+(""+a).replace(/[=:]/g,function(a){return b[a]})}function ja(a,b,c,g){if(C.length){var e=C.pop();e.result=a;e.keyPrefix=b;e.func=c;e.context=g;e.count=0;return e}return{result:a,keyPrefix:b,func:c,
context:g,count:0}}function ka(a){a.result=null;a.keyPrefix=null;a.func=null;a.context=null;a.count=0;10>C.length&&C.push(a)}function O(a,b,c,g){var e=typeof a;if("undefined"===e||"boolean"===e)a=null;var d=!1;if(null===a)d=!0;else switch(e){case "string":case "number":d=!0;break;case "object":switch(a.$$typeof){case x:case xa:d=!0}}if(d)return c(g,a,""===b?"."+P(a,0):b),1;d=0;b=""===b?".":b+":";if(Array.isArray(a))for(var f=0;f<a.length;f++){e=a[f];var h=b+P(e,f);d+=O(e,h,c,g)}else if(null===a||
"object"!==typeof a?h=null:(h=la&&a[la]||a["@@iterator"],h="function"===typeof h?h:null),"function"===typeof h)for(a=h.call(a),f=0;!(e=a.next()).done;)e=e.value,h=b+P(e,f++),d+=O(e,h,c,g);else if("object"===e)throw c=""+a,Error(r(31,"[object Object]"===c?"object with keys {"+Object.keys(a).join(", ")+"}":c,""));return d}function Q(a,b,c){return null==a?0:O(a,"",b,c)}function P(a,b){return"object"===typeof a&&null!==a&&null!=a.key?wa(a.key):b.toString(36)}function ya(a,b,c){a.func.call(a.context,b,
a.count++)}function za(a,b,c){var g=a.result,e=a.keyPrefix;a=a.func.call(a.context,b,a.count++);Array.isArray(a)?R(a,g,c,function(a){return a}):null!=a&&(N(a)&&(a=va(a,e+(!a.key||b&&b.key===a.key?"":(""+a.key).replace(ma,"$&/")+"/")+c)),g.push(a))}function R(a,b,c,g,e){var d="";null!=c&&(d=(""+c).replace(ma,"$&/")+"/");b=ja(b,d,g,e);Q(a,za,b);ka(b)}function t(){var a=na.current;if(null===a)throw Error(r(321));return a}function S(a,b){var c=a.length;a.push(b);a:for(;;){var g=c-1>>>1,e=a[g];if(void 0!==
e&&0<D(e,b))a[g]=b,a[c]=e,c=g;else break a}}function n(a){a=a[0];return void 0===a?null:a}function E(a){var b=a[0];if(void 0!==b){var c=a.pop();if(c!==b){a[0]=c;a:for(var g=0,e=a.length;g<e;){var d=2*(g+1)-1,f=a[d],h=d+1,k=a[h];if(void 0!==f&&0>D(f,c))void 0!==k&&0>D(k,f)?(a[g]=k,a[h]=c,g=h):(a[g]=f,a[d]=c,g=d);else if(void 0!==k&&0>D(k,c))a[g]=k,a[h]=c,g=h;else break a}}return b}return null}function D(a,b){var c=a.sortIndex-b.sortIndex;return 0!==c?c:a.id-b.id}function F(a){for(var b=n(u);null!==
b;){if(null===b.callback)E(u);else if(b.startTime<=a)E(u),b.sortIndex=b.expirationTime,S(p,b);else break;b=n(u)}}function T(a){y=!1;F(a);if(!v)if(null!==n(p))v=!0,z(U);else{var b=n(u);null!==b&&G(T,b.startTime-a)}}function U(a,b){v=!1;y&&(y=!1,V());H=!0;var c=m;try{F(b);for(l=n(p);null!==l&&(!(l.expirationTime>b)||a&&!W());){var g=l.callback;if(null!==g){l.callback=null;m=l.priorityLevel;var e=g(l.expirationTime<=b);b=q();"function"===typeof e?l.callback=e:l===n(p)&&E(p);F(b)}else E(p);l=n(p)}if(null!==
l)var d=!0;else{var f=n(u);null!==f&&G(T,f.startTime-b);d=!1}return d}finally{l=null,m=c,H=!1}}function oa(a){switch(a){case 1:return-1;case 2:return 250;case 5:return 1073741823;case 4:return 1E4;default:return 5E3}}var f="function"===typeof Symbol&&Symbol.for,x=f?Symbol.for("react.element"):60103,xa=f?Symbol.for("react.portal"):60106,Aa=f?Symbol.for("react.fragment"):60107,Ba=f?Symbol.for("react.strict_mode"):60108,Ca=f?Symbol.for("react.profiler"):60114,Da=f?Symbol.for("react.provider"):60109,
Ea=f?Symbol.for("react.context"):60110,Fa=f?Symbol.for("react.forward_ref"):60112,Ga=f?Symbol.for("react.suspense"):60113,Ha=f?Symbol.for("react.memo"):60115,Ia=f?Symbol.for("react.lazy"):60116,la="function"===typeof Symbol&&Symbol.iterator,pa=Object.getOwnPropertySymbols,Ja=Object.prototype.hasOwnProperty,Ka=Object.prototype.propertyIsEnumerable,I=function(){try{if(!Object.assign)return!1;var a=new String("abc");a[5]="de";if("5"===Object.getOwnPropertyNames(a)[0])return!1;var b={};for(a=0;10>a;a++)b["_"+
String.fromCharCode(a)]=a;if("0123456789"!==Object.getOwnPropertyNames(b).map(function(a){return b[a]}).join(""))return!1;var c={};"abcdefghijklmnopqrst".split("").forEach(function(a){c[a]=a});return"abcdefghijklmnopqrst"!==Object.keys(Object.assign({},c)).join("")?!1:!0}catch(g){return!1}}()?Object.assign:function(a,b){if(null===a||void 0===a)throw new TypeError("Object.assign cannot be called with null or undefined");var c=Object(a);for(var g,e=1;e<arguments.length;e++){var d=Object(arguments[e]);
for(var f in d)Ja.call(d,f)&&(c[f]=d[f]);if(pa){g=pa(d);for(var h=0;h<g.length;h++)Ka.call(d,g[h])&&(c[g[h]]=d[g[h]])}}return c},ca={isMounted:function(a){return!1},enqueueForceUpdate:function(a,b,c){},enqueueReplaceState:function(a,b,c,d){},enqueueSetState:function(a,b,c,d){}},ba={};w.prototype.isReactComponent={};w.prototype.setState=function(a,b){if("object"!==typeof a&&"function"!==typeof a&&null!=a)throw Error(r(85));this.updater.enqueueSetState(this,a,b,"setState")};w.prototype.forceUpdate=
function(a){this.updater.enqueueForceUpdate(this,a,"forceUpdate")};da.prototype=w.prototype;f=L.prototype=new da;f.constructor=L;I(f,w.prototype);f.isPureReactComponent=!0;var M={current:null},ha=Object.prototype.hasOwnProperty,ia={key:!0,ref:!0,__self:!0,__source:!0},ma=/\/+/g,C=[],na={current:null},X;if("undefined"===typeof window||"function"!==typeof MessageChannel){var A=null,qa=null,ra=function(){if(null!==A)try{var a=q();A(!0,a);A=null}catch(b){throw setTimeout(ra,0),b;}},La=Date.now();var q=
function(){return Date.now()-La};var z=function(a){null!==A?setTimeout(z,0,a):(A=a,setTimeout(ra,0))};var G=function(a,b){qa=setTimeout(a,b)};var V=function(){clearTimeout(qa)};var W=function(){return!1};f=X=function(){}}else{var Y=window.performance,sa=window.Date,Ma=window.setTimeout,Na=window.clearTimeout;"undefined"!==typeof console&&(f=window.cancelAnimationFrame,"function"!==typeof window.requestAnimationFrame&&console.error("This browser doesn't support requestAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"),
"function"!==typeof f&&console.error("This browser doesn't support cancelAnimationFrame. Make sure that you load a polyfill in older browsers. https://fb.me/react-polyfills"));if("object"===typeof Y&&"function"===typeof Y.now)q=function(){return Y.now()};else{var Oa=sa.now();q=function(){return sa.now()-Oa}}var J=!1,K=null,Z=-1,ta=5,ua=0;W=function(){return q()>=ua};f=function(){};X=function(a){0>a||125<a?console.error("forceFrameRate takes a positive int between 0 and 125, forcing framerates higher than 125 fps is not unsupported"):
ta=0<a?Math.floor(1E3/a):5};var B=new MessageChannel,aa=B.port2;B.port1.onmessage=function(){if(null!==K){var a=q();ua=a+ta;try{K(!0,a)?aa.postMessage(null):(J=!1,K=null)}catch(b){throw aa.postMessage(null),b;}}else J=!1};z=function(a){K=a;J||(J=!0,aa.postMessage(null))};G=function(a,b){Z=Ma(function(){a(q())},b)};V=function(){Na(Z);Z=-1}}var p=[],u=[],Pa=1,l=null,m=3,H=!1,v=!1,y=!1,Qa=0;B={ReactCurrentDispatcher:na,ReactCurrentOwner:M,IsSomeRendererActing:{current:!1},assign:I};I(B,{Scheduler:{__proto__:null,
unstable_ImmediatePriority:1,unstable_UserBlockingPriority:2,unstable_NormalPriority:3,unstable_IdlePriority:5,unstable_LowPriority:4,unstable_runWithPriority:function(a,b){switch(a){case 1:case 2:case 3:case 4:case 5:break;default:a=3}var c=m;m=a;try{return b()}finally{m=c}},unstable_next:function(a){switch(m){case 1:case 2:case 3:var b=3;break;default:b=m}var c=m;m=b;try{return a()}finally{m=c}},unstable_scheduleCallback:function(a,b,c){var d=q();if("object"===typeof c&&null!==c){var e=c.delay;
e="number"===typeof e&&0<e?d+e:d;c="number"===typeof c.timeout?c.timeout:oa(a)}else c=oa(a),e=d;c=e+c;a={id:Pa++,callback:b,priorityLevel:a,startTime:e,expirationTime:c,sortIndex:-1};e>d?(a.sortIndex=e,S(u,a),null===n(p)&&a===n(u)&&(y?V():y=!0,G(T,e-d))):(a.sortIndex=c,S(p,a),v||H||(v=!0,z(U)));return a},unstable_cancelCallback:function(a){a.callback=null},unstable_wrapCallback:function(a){var b=m;return function(){var c=m;m=b;try{return a.apply(this,arguments)}finally{m=c}}},unstable_getCurrentPriorityLevel:function(){return m},
unstable_shouldYield:function(){var a=q();F(a);var b=n(p);return b!==l&&null!==l&&null!==b&&null!==b.callback&&b.startTime<=a&&b.expirationTime<l.expirationTime||W()},unstable_requestPaint:f,unstable_continueExecution:function(){v||H||(v=!0,z(U))},unstable_pauseExecution:function(){},unstable_getFirstCallbackNode:function(){return n(p)},get unstable_now(){return q},get unstable_forceFrameRate(){return X},unstable_Profiling:null},SchedulerTracing:{__proto__:null,__interactionsRef:null,__subscriberRef:null,
unstable_clear:function(a){return a()},unstable_getCurrent:function(){return null},unstable_getThreadID:function(){return++Qa},unstable_trace:function(a,b,c){return c()},unstable_wrap:function(a){return a},unstable_subscribe:function(a){},unstable_unsubscribe:function(a){}}});d.Children={map:function(a,b,c){if(null==a)return a;var d=[];R(a,d,null,b,c);return d},forEach:function(a,b,c){if(null==a)return a;b=ja(null,null,b,c);Q(a,ya,b);ka(b)},count:function(a){return Q(a,function(){return null},null)},
toArray:function(a){var b=[];R(a,b,null,function(a){return a});return b},only:function(a){if(!N(a))throw Error(r(143));return a}};d.Component=w;d.Fragment=Aa;d.Profiler=Ca;d.PureComponent=L;d.StrictMode=Ba;d.Suspense=Ga;d.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=B;d.cloneElement=function(a,b,c){if(null===a||void 0===a)throw Error(r(267,a));var d=I({},a.props),e=a.key,f=a.ref,m=a._owner;if(null!=b){void 0!==b.ref&&(f=b.ref,m=M.current);void 0!==b.key&&(e=""+b.key);if(a.type&&a.type.defaultProps)var h=
a.type.defaultProps;for(k in b)ha.call(b,k)&&!ia.hasOwnProperty(k)&&(d[k]=void 0===b[k]&&void 0!==h?h[k]:b[k])}var k=arguments.length-2;if(1===k)d.children=c;else if(1<k){h=Array(k);for(var l=0;l<k;l++)h[l]=arguments[l+2];d.children=h}return{$$typeof:x,type:a.type,key:e,ref:f,props:d,_owner:m}};d.createContext=function(a,b){void 0===b&&(b=null);a={$$typeof:Ea,_calculateChangedBits:b,_currentValue:a,_currentValue2:a,_threadCount:0,Provider:null,Consumer:null};a.Provider={$$typeof:Da,_context:a};return a.Consumer=
a};d.createElement=ea;d.createFactory=function(a){var b=ea.bind(null,a);b.type=a;return b};d.createRef=function(){return{current:null}};d.forwardRef=function(a){return{$$typeof:Fa,render:a}};d.isValidElement=N;d.lazy=function(a){return{$$typeof:Ia,_ctor:a,_status:-1,_result:null}};d.memo=function(a,b){return{$$typeof:Ha,type:a,compare:void 0===b?null:b}};d.useCallback=function(a,b){return t().useCallback(a,b)};d.useContext=function(a,b){return t().useContext(a,b)};d.useDebugValue=function(a,b){};
d.useEffect=function(a,b){return t().useEffect(a,b)};d.useImperativeHandle=function(a,b,c){return t().useImperativeHandle(a,b,c)};d.useLayoutEffect=function(a,b){return t().useLayoutEffect(a,b)};d.useMemo=function(a,b){return t().useMemo(a,b)};d.useReducer=function(a,b,c){return t().useReducer(a,b,c)};d.useRef=function(a){return t().useRef(a)};d.useState=function(a){return t().useState(a)};d.version="16.13.1"});
</script>
    <script crossorigin>/** @license React v16.13.1
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */
/*
 Modernizr 3.0.0pre (Custom Build) | MIT
*/
'use strict';(function(I,ea){"object"===typeof exports&&"undefined"!==typeof module?ea(exports,require("react")):"function"===typeof define&&define.amd?define(["exports","react"],ea):(I=I||self,ea(I.ReactDOM={},I.React))})(this,function(I,ea){function k(a){for(var b="https://reactjs.org/docs/error-decoder.html?invariant="+a,c=1;c<arguments.length;c++)b+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+a+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}
function ji(a,b,c,d,e,f,g,h,m){yb=!1;gc=null;ki.apply(li,arguments)}function mi(a,b,c,d,e,f,g,h,m){ji.apply(this,arguments);if(yb){if(yb){var n=gc;yb=!1;gc=null}else throw Error(k(198));hc||(hc=!0,pd=n)}}function lf(a,b,c){var d=a.type||"unknown-event";a.currentTarget=mf(c);mi(d,b,void 0,a);a.currentTarget=null}function nf(){if(ic)for(var a in cb){var b=cb[a],c=ic.indexOf(a);if(!(-1<c))throw Error(k(96,a));if(!jc[c]){if(!b.extractEvents)throw Error(k(97,a));jc[c]=b;c=b.eventTypes;for(var d in c){var e=
void 0;var f=c[d],g=b,h=d;if(qd.hasOwnProperty(h))throw Error(k(99,h));qd[h]=f;var m=f.phasedRegistrationNames;if(m){for(e in m)m.hasOwnProperty(e)&&of(m[e],g,h);e=!0}else f.registrationName?(of(f.registrationName,g,h),e=!0):e=!1;if(!e)throw Error(k(98,d,a));}}}}function of(a,b,c){if(db[a])throw Error(k(100,a));db[a]=b;rd[a]=b.eventTypes[c].dependencies}function pf(a){var b=!1,c;for(c in a)if(a.hasOwnProperty(c)){var d=a[c];if(!cb.hasOwnProperty(c)||cb[c]!==d){if(cb[c])throw Error(k(102,c));cb[c]=
d;b=!0}}b&&nf()}function qf(a){if(a=rf(a)){if("function"!==typeof sd)throw Error(k(280));var b=a.stateNode;b&&(b=td(b),sd(a.stateNode,a.type,b))}}function sf(a){eb?fb?fb.push(a):fb=[a]:eb=a}function tf(){if(eb){var a=eb,b=fb;fb=eb=null;qf(a);if(b)for(a=0;a<b.length;a++)qf(b[a])}}function ud(){if(null!==eb||null!==fb)vd(),tf()}function uf(a,b,c){if(wd)return a(b,c);wd=!0;try{return vf(a,b,c)}finally{wd=!1,ud()}}function ni(a){if(wf.call(xf,a))return!0;if(wf.call(yf,a))return!1;if(oi.test(a))return xf[a]=
!0;yf[a]=!0;return!1}function pi(a,b,c,d){if(null!==c&&0===c.type)return!1;switch(typeof b){case "function":case "symbol":return!0;case "boolean":if(d)return!1;if(null!==c)return!c.acceptsBooleans;a=a.toLowerCase().slice(0,5);return"data-"!==a&&"aria-"!==a;default:return!1}}function qi(a,b,c,d){if(null===b||"undefined"===typeof b||pi(a,b,c,d))return!0;if(d)return!1;if(null!==c)switch(c.type){case 3:return!b;case 4:return!1===b;case 5:return isNaN(b);case 6:return isNaN(b)||1>b}return!1}function L(a,
b,c,d,e,f){this.acceptsBooleans=2===b||3===b||4===b;this.attributeName=d;this.attributeNamespace=e;this.mustUseProperty=c;this.propertyName=a;this.type=b;this.sanitizeURL=f}function xd(a,b,c,d){var e=E.hasOwnProperty(b)?E[b]:null;var f=null!==e?0===e.type:d?!1:!(2<b.length)||"o"!==b[0]&&"O"!==b[0]||"n"!==b[1]&&"N"!==b[1]?!1:!0;f||(qi(b,c,e,d)&&(c=null),d||null===e?ni(b)&&(null===c?a.removeAttribute(b):a.setAttribute(b,""+c)):e.mustUseProperty?a[e.propertyName]=null===c?3===e.type?!1:"":c:(b=e.attributeName,
d=e.attributeNamespace,null===c?a.removeAttribute(b):(e=e.type,c=3===e||4===e&&!0===c?"":""+c,d?a.setAttributeNS(d,b,c):a.setAttribute(b,c))))}function zb(a){if(null===a||"object"!==typeof a)return null;a=zf&&a[zf]||a["@@iterator"];return"function"===typeof a?a:null}function ri(a){if(-1===a._status){a._status=0;var b=a._ctor;b=b();a._result=b;b.then(function(b){0===a._status&&(b=b.default,a._status=1,a._result=b)},function(b){0===a._status&&(a._status=2,a._result=b)})}}function na(a){if(null==a)return null;
if("function"===typeof a)return a.displayName||a.name||null;if("string"===typeof a)return a;switch(a){case Ma:return"Fragment";case gb:return"Portal";case kc:return"Profiler";case Af:return"StrictMode";case lc:return"Suspense";case yd:return"SuspenseList"}if("object"===typeof a)switch(a.$$typeof){case Bf:return"Context.Consumer";case Cf:return"Context.Provider";case zd:var b=a.render;b=b.displayName||b.name||"";return a.displayName||(""!==b?"ForwardRef("+b+")":"ForwardRef");case Ad:return na(a.type);
case Df:return na(a.render);case Ef:if(a=1===a._status?a._result:null)return na(a)}return null}function Bd(a){var b="";do{a:switch(a.tag){case 3:case 4:case 6:case 7:case 10:case 9:var c="";break a;default:var d=a._debugOwner,e=a._debugSource,f=na(a.type);c=null;d&&(c=na(d.type));d=f;f="";e?f=" (at "+e.fileName.replace(si,"")+":"+e.lineNumber+")":c&&(f=" (created by "+c+")");c="\n    in "+(d||"Unknown")+f}b+=c;a=a.return}while(a);return b}function va(a){switch(typeof a){case "boolean":case "number":case "object":case "string":case "undefined":return a;
default:return""}}function Ff(a){var b=a.type;return(a=a.nodeName)&&"input"===a.toLowerCase()&&("checkbox"===b||"radio"===b)}function ti(a){var b=Ff(a)?"checked":"value",c=Object.getOwnPropertyDescriptor(a.constructor.prototype,b),d=""+a[b];if(!a.hasOwnProperty(b)&&"undefined"!==typeof c&&"function"===typeof c.get&&"function"===typeof c.set){var e=c.get,f=c.set;Object.defineProperty(a,b,{configurable:!0,get:function(){return e.call(this)},set:function(a){d=""+a;f.call(this,a)}});Object.defineProperty(a,
b,{enumerable:c.enumerable});return{getValue:function(){return d},setValue:function(a){d=""+a},stopTracking:function(){a._valueTracker=null;delete a[b]}}}}function mc(a){a._valueTracker||(a._valueTracker=ti(a))}function Gf(a){if(!a)return!1;var b=a._valueTracker;if(!b)return!0;var c=b.getValue();var d="";a&&(d=Ff(a)?a.checked?"true":"false":a.value);a=d;return a!==c?(b.setValue(a),!0):!1}function Cd(a,b){var c=b.checked;return M({},b,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=
c?c:a._wrapperState.initialChecked})}function Hf(a,b){var c=null==b.defaultValue?"":b.defaultValue,d=null!=b.checked?b.checked:b.defaultChecked;c=va(null!=b.value?b.value:c);a._wrapperState={initialChecked:d,initialValue:c,controlled:"checkbox"===b.type||"radio"===b.type?null!=b.checked:null!=b.value}}function If(a,b){b=b.checked;null!=b&&xd(a,"checked",b,!1)}function Dd(a,b){If(a,b);var c=va(b.value),d=b.type;if(null!=c)if("number"===d){if(0===c&&""===a.value||a.value!=c)a.value=""+c}else a.value!==
""+c&&(a.value=""+c);else if("submit"===d||"reset"===d){a.removeAttribute("value");return}b.hasOwnProperty("value")?Ed(a,b.type,c):b.hasOwnProperty("defaultValue")&&Ed(a,b.type,va(b.defaultValue));null==b.checked&&null!=b.defaultChecked&&(a.defaultChecked=!!b.defaultChecked)}function Jf(a,b,c){if(b.hasOwnProperty("value")||b.hasOwnProperty("defaultValue")){var d=b.type;if(!("submit"!==d&&"reset"!==d||void 0!==b.value&&null!==b.value))return;b=""+a._wrapperState.initialValue;c||b===a.value||(a.value=
b);a.defaultValue=b}c=a.name;""!==c&&(a.name="");a.defaultChecked=!!a._wrapperState.initialChecked;""!==c&&(a.name=c)}function Ed(a,b,c){if("number"!==b||a.ownerDocument.activeElement!==a)null==c?a.defaultValue=""+a._wrapperState.initialValue:a.defaultValue!==""+c&&(a.defaultValue=""+c)}function ui(a){var b="";ea.Children.forEach(a,function(a){null!=a&&(b+=a)});return b}function Fd(a,b){a=M({children:void 0},b);if(b=ui(b.children))a.children=b;return a}function hb(a,b,c,d){a=a.options;if(b){b={};
for(var e=0;e<c.length;e++)b["$"+c[e]]=!0;for(c=0;c<a.length;c++)e=b.hasOwnProperty("$"+a[c].value),a[c].selected!==e&&(a[c].selected=e),e&&d&&(a[c].defaultSelected=!0)}else{c=""+va(c);b=null;for(e=0;e<a.length;e++){if(a[e].value===c){a[e].selected=!0;d&&(a[e].defaultSelected=!0);return}null!==b||a[e].disabled||(b=a[e])}null!==b&&(b.selected=!0)}}function Gd(a,b){if(null!=b.dangerouslySetInnerHTML)throw Error(k(91));return M({},b,{value:void 0,defaultValue:void 0,children:""+a._wrapperState.initialValue})}
function Kf(a,b){var c=b.value;if(null==c){c=b.children;b=b.defaultValue;if(null!=c){if(null!=b)throw Error(k(92));if(Array.isArray(c)){if(!(1>=c.length))throw Error(k(93));c=c[0]}b=c}null==b&&(b="");c=b}a._wrapperState={initialValue:va(c)}}function Lf(a,b){var c=va(b.value),d=va(b.defaultValue);null!=c&&(c=""+c,c!==a.value&&(a.value=c),null==b.defaultValue&&a.defaultValue!==c&&(a.defaultValue=c));null!=d&&(a.defaultValue=""+d)}function Mf(a,b){b=a.textContent;b===a._wrapperState.initialValue&&""!==
b&&null!==b&&(a.value=b)}function Nf(a){switch(a){case "svg":return"http://www.w3.org/2000/svg";case "math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Hd(a,b){return null==a||"http://www.w3.org/1999/xhtml"===a?Nf(b):"http://www.w3.org/2000/svg"===a&&"foreignObject"===b?"http://www.w3.org/1999/xhtml":a}function nc(a,b){var c={};c[a.toLowerCase()]=b.toLowerCase();c["Webkit"+a]="webkit"+b;c["Moz"+a]="moz"+b;return c}function oc(a){if(Id[a])return Id[a];
if(!ib[a])return a;var b=ib[a],c;for(c in b)if(b.hasOwnProperty(c)&&c in Of)return Id[a]=b[c];return a}function Jd(a){var b=Pf.get(a);void 0===b&&(b=new Map,Pf.set(a,b));return b}function Na(a){var b=a,c=a;if(a.alternate)for(;b.return;)b=b.return;else{a=b;do b=a,0!==(b.effectTag&1026)&&(c=b.return),a=b.return;while(a)}return 3===b.tag?c:null}function Qf(a){if(13===a.tag){var b=a.memoizedState;null===b&&(a=a.alternate,null!==a&&(b=a.memoizedState));if(null!==b)return b.dehydrated}return null}function Rf(a){if(Na(a)!==
a)throw Error(k(188));}function vi(a){var b=a.alternate;if(!b){b=Na(a);if(null===b)throw Error(k(188));return b!==a?null:a}for(var c=a,d=b;;){var e=c.return;if(null===e)break;var f=e.alternate;if(null===f){d=e.return;if(null!==d){c=d;continue}break}if(e.child===f.child){for(f=e.child;f;){if(f===c)return Rf(e),a;if(f===d)return Rf(e),b;f=f.sibling}throw Error(k(188));}if(c.return!==d.return)c=e,d=f;else{for(var g=!1,h=e.child;h;){if(h===c){g=!0;c=e;d=f;break}if(h===d){g=!0;d=e;c=f;break}h=h.sibling}if(!g){for(h=
f.child;h;){if(h===c){g=!0;c=f;d=e;break}if(h===d){g=!0;d=f;c=e;break}h=h.sibling}if(!g)throw Error(k(189));}}if(c.alternate!==d)throw Error(k(190));}if(3!==c.tag)throw Error(k(188));return c.stateNode.current===c?a:b}function Sf(a){a=vi(a);if(!a)return null;for(var b=a;;){if(5===b.tag||6===b.tag)return b;if(b.child)b.child.return=b,b=b.child;else{if(b===a)break;for(;!b.sibling;){if(!b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}}return null}function jb(a,b){if(null==
b)throw Error(k(30));if(null==a)return b;if(Array.isArray(a)){if(Array.isArray(b))return a.push.apply(a,b),a;a.push(b);return a}return Array.isArray(b)?[a].concat(b):[a,b]}function Kd(a,b,c){Array.isArray(a)?a.forEach(b,c):a&&b.call(c,a)}function pc(a){null!==a&&(Ab=jb(Ab,a));a=Ab;Ab=null;if(a){Kd(a,wi);if(Ab)throw Error(k(95));if(hc)throw a=pd,hc=!1,pd=null,a;}}function Ld(a){a=a.target||a.srcElement||window;a.correspondingUseElement&&(a=a.correspondingUseElement);return 3===a.nodeType?a.parentNode:
a}function Tf(a){if(!wa)return!1;a="on"+a;var b=a in document;b||(b=document.createElement("div"),b.setAttribute(a,"return;"),b="function"===typeof b[a]);return b}function Uf(a){a.topLevelType=null;a.nativeEvent=null;a.targetInst=null;a.ancestors.length=0;10>qc.length&&qc.push(a)}function Vf(a,b,c,d){if(qc.length){var e=qc.pop();e.topLevelType=a;e.eventSystemFlags=d;e.nativeEvent=b;e.targetInst=c;return e}return{topLevelType:a,eventSystemFlags:d,nativeEvent:b,targetInst:c,ancestors:[]}}function Wf(a){var b=
a.targetInst,c=b;do{if(!c){a.ancestors.push(c);break}var d=c;if(3===d.tag)d=d.stateNode.containerInfo;else{for(;d.return;)d=d.return;d=3!==d.tag?null:d.stateNode.containerInfo}if(!d)break;b=c.tag;5!==b&&6!==b||a.ancestors.push(c);c=Bb(d)}while(c);for(c=0;c<a.ancestors.length;c++){b=a.ancestors[c];var e=Ld(a.nativeEvent);d=a.topLevelType;var f=a.nativeEvent,g=a.eventSystemFlags;0===c&&(g|=64);for(var h=null,m=0;m<jc.length;m++){var n=jc[m];n&&(n=n.extractEvents(d,b,f,e,g))&&(h=jb(h,n))}pc(h)}}function Md(a,
b,c){if(!c.has(a)){switch(a){case "scroll":Cb(b,"scroll",!0);break;case "focus":case "blur":Cb(b,"focus",!0);Cb(b,"blur",!0);c.set("blur",null);c.set("focus",null);break;case "cancel":case "close":Tf(a)&&Cb(b,a,!0);break;case "invalid":case "submit":case "reset":break;default:-1===Db.indexOf(a)&&w(a,b)}c.set(a,null)}}function xi(a,b){var c=Jd(b);Nd.forEach(function(a){Md(a,b,c)});yi.forEach(function(a){Md(a,b,c)})}function Od(a,b,c,d,e){return{blockedOn:a,topLevelType:b,eventSystemFlags:c|32,nativeEvent:e,
container:d}}function Xf(a,b){switch(a){case "focus":case "blur":xa=null;break;case "dragenter":case "dragleave":ya=null;break;case "mouseover":case "mouseout":za=null;break;case "pointerover":case "pointerout":Eb.delete(b.pointerId);break;case "gotpointercapture":case "lostpointercapture":Fb.delete(b.pointerId)}}function Gb(a,b,c,d,e,f){if(null===a||a.nativeEvent!==f)return a=Od(b,c,d,e,f),null!==b&&(b=Hb(b),null!==b&&Yf(b)),a;a.eventSystemFlags|=d;return a}function zi(a,b,c,d,e){switch(b){case "focus":return xa=
Gb(xa,a,b,c,d,e),!0;case "dragenter":return ya=Gb(ya,a,b,c,d,e),!0;case "mouseover":return za=Gb(za,a,b,c,d,e),!0;case "pointerover":var f=e.pointerId;Eb.set(f,Gb(Eb.get(f)||null,a,b,c,d,e));return!0;case "gotpointercapture":return f=e.pointerId,Fb.set(f,Gb(Fb.get(f)||null,a,b,c,d,e)),!0}return!1}function Ai(a){var b=Bb(a.target);if(null!==b){var c=Na(b);if(null!==c)if(b=c.tag,13===b){if(b=Qf(c),null!==b){a.blockedOn=b;Pd(a.priority,function(){Bi(c)});return}}else if(3===b&&c.stateNode.hydrate){a.blockedOn=
3===c.tag?c.stateNode.containerInfo:null;return}}a.blockedOn=null}function rc(a){if(null!==a.blockedOn)return!1;var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);if(null!==b){var c=Hb(b);null!==c&&Yf(c);a.blockedOn=b;return!1}return!0}function Zf(a,b,c){rc(a)&&c.delete(b)}function Ci(){for(Rd=!1;0<fa.length;){var a=fa[0];if(null!==a.blockedOn){a=Hb(a.blockedOn);null!==a&&Di(a);break}var b=Qd(a.topLevelType,a.eventSystemFlags,a.container,a.nativeEvent);null!==b?a.blockedOn=b:fa.shift()}null!==
xa&&rc(xa)&&(xa=null);null!==ya&&rc(ya)&&(ya=null);null!==za&&rc(za)&&(za=null);Eb.forEach(Zf);Fb.forEach(Zf)}function Ib(a,b){a.blockedOn===b&&(a.blockedOn=null,Rd||(Rd=!0,$f(ag,Ci)))}function bg(a){if(0<fa.length){Ib(fa[0],a);for(var b=1;b<fa.length;b++){var c=fa[b];c.blockedOn===a&&(c.blockedOn=null)}}null!==xa&&Ib(xa,a);null!==ya&&Ib(ya,a);null!==za&&Ib(za,a);b=function(b){return Ib(b,a)};Eb.forEach(b);Fb.forEach(b);for(b=0;b<Jb.length;b++)c=Jb[b],c.blockedOn===a&&(c.blockedOn=null);for(;0<Jb.length&&
(b=Jb[0],null===b.blockedOn);)Ai(b),null===b.blockedOn&&Jb.shift()}function Sd(a,b){for(var c=0;c<a.length;c+=2){var d=a[c],e=a[c+1],f="on"+(e[0].toUpperCase()+e.slice(1));f={phasedRegistrationNames:{bubbled:f,captured:f+"Capture"},dependencies:[d],eventPriority:b};Td.set(d,b);cg.set(d,f);dg[e]=f}}function w(a,b){Cb(b,a,!1)}function Cb(a,b,c){var d=Td.get(b);switch(void 0===d?2:d){case 0:d=Ei.bind(null,b,1,a);break;case 1:d=Fi.bind(null,b,1,a);break;default:d=sc.bind(null,b,1,a)}c?a.addEventListener(b,
d,!0):a.addEventListener(b,d,!1)}function Ei(a,b,c,d){Oa||vd();var e=sc,f=Oa;Oa=!0;try{eg(e,a,b,c,d)}finally{(Oa=f)||ud()}}function Fi(a,b,c,d){Gi(Hi,sc.bind(null,a,b,c,d))}function sc(a,b,c,d){if(tc)if(0<fa.length&&-1<Nd.indexOf(a))a=Od(null,a,b,c,d),fa.push(a);else{var e=Qd(a,b,c,d);if(null===e)Xf(a,d);else if(-1<Nd.indexOf(a))a=Od(e,a,b,c,d),fa.push(a);else if(!zi(e,a,b,c,d)){Xf(a,d);a=Vf(a,d,null,b);try{uf(Wf,a)}finally{Uf(a)}}}}function Qd(a,b,c,d){c=Ld(d);c=Bb(c);if(null!==c){var e=Na(c);if(null===
e)c=null;else{var f=e.tag;if(13===f){c=Qf(e);if(null!==c)return c;c=null}else if(3===f){if(e.stateNode.hydrate)return 3===e.tag?e.stateNode.containerInfo:null;c=null}else e!==c&&(c=null)}}a=Vf(a,d,c,b);try{uf(Wf,a)}finally{Uf(a)}return null}function fg(a,b,c){return null==b||"boolean"===typeof b||""===b?"":c||"number"!==typeof b||0===b||Kb.hasOwnProperty(a)&&Kb[a]?(""+b).trim():b+"px"}function gg(a,b){a=a.style;for(var c in b)if(b.hasOwnProperty(c)){var d=0===c.indexOf("--"),e=fg(c,b[c],d);"float"===
c&&(c="cssFloat");d?a.setProperty(c,e):a[c]=e}}function Ud(a,b){if(b){if(Ii[a]&&(null!=b.children||null!=b.dangerouslySetInnerHTML))throw Error(k(137,a,""));if(null!=b.dangerouslySetInnerHTML){if(null!=b.children)throw Error(k(60));if(!("object"===typeof b.dangerouslySetInnerHTML&&"__html"in b.dangerouslySetInnerHTML))throw Error(k(61));}if(null!=b.style&&"object"!==typeof b.style)throw Error(k(62,""));}}function Vd(a,b){if(-1===a.indexOf("-"))return"string"===typeof b.is;switch(a){case "annotation-xml":case "color-profile":case "font-face":case "font-face-src":case "font-face-uri":case "font-face-format":case "font-face-name":case "missing-glyph":return!1;
default:return!0}}function oa(a,b){a=9===a.nodeType||11===a.nodeType?a:a.ownerDocument;var c=Jd(a);b=rd[b];for(var d=0;d<b.length;d++)Md(b[d],a,c)}function uc(){}function Wd(a){a=a||("undefined"!==typeof document?document:void 0);if("undefined"===typeof a)return null;try{return a.activeElement||a.body}catch(b){return a.body}}function hg(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function ig(a,b){var c=hg(a);a=0;for(var d;c;){if(3===c.nodeType){d=a+c.textContent.length;if(a<=b&&d>=b)return{node:c,
offset:b-a};a=d}a:{for(;c;){if(c.nextSibling){c=c.nextSibling;break a}c=c.parentNode}c=void 0}c=hg(c)}}function jg(a,b){return a&&b?a===b?!0:a&&3===a.nodeType?!1:b&&3===b.nodeType?jg(a,b.parentNode):"contains"in a?a.contains(b):a.compareDocumentPosition?!!(a.compareDocumentPosition(b)&16):!1:!1}function kg(){for(var a=window,b=Wd();b instanceof a.HTMLIFrameElement;){try{var c="string"===typeof b.contentWindow.location.href}catch(d){c=!1}if(c)a=b.contentWindow;else break;b=Wd(a.document)}return b}
function Xd(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return b&&("input"===b&&("text"===a.type||"search"===a.type||"tel"===a.type||"url"===a.type||"password"===a.type)||"textarea"===b||"true"===a.contentEditable)}function lg(a,b){switch(a){case "button":case "input":case "select":case "textarea":return!!b.autoFocus}return!1}function Yd(a,b){return"textarea"===a||"option"===a||"noscript"===a||"string"===typeof b.children||"number"===typeof b.children||"object"===typeof b.dangerouslySetInnerHTML&&
null!==b.dangerouslySetInnerHTML&&null!=b.dangerouslySetInnerHTML.__html}function kb(a){for(;null!=a;a=a.nextSibling){var b=a.nodeType;if(1===b||3===b)break}return a}function mg(a){a=a.previousSibling;for(var b=0;a;){if(8===a.nodeType){var c=a.data;if(c===ng||c===Zd||c===$d){if(0===b)return a;b--}else c===og&&b++}a=a.previousSibling}return null}function Bb(a){var b=a[Aa];if(b)return b;for(var c=a.parentNode;c;){if(b=c[Lb]||c[Aa]){c=b.alternate;if(null!==b.child||null!==c&&null!==c.child)for(a=mg(a);null!==
a;){if(c=a[Aa])return c;a=mg(a)}return b}a=c;c=a.parentNode}return null}function Hb(a){a=a[Aa]||a[Lb];return!a||5!==a.tag&&6!==a.tag&&13!==a.tag&&3!==a.tag?null:a}function Pa(a){if(5===a.tag||6===a.tag)return a.stateNode;throw Error(k(33));}function ae(a){return a[vc]||null}function pa(a){do a=a.return;while(a&&5!==a.tag);return a?a:null}function pg(a,b){var c=a.stateNode;if(!c)return null;var d=td(c);if(!d)return null;c=d[b];a:switch(b){case "onClick":case "onClickCapture":case "onDoubleClick":case "onDoubleClickCapture":case "onMouseDown":case "onMouseDownCapture":case "onMouseMove":case "onMouseMoveCapture":case "onMouseUp":case "onMouseUpCapture":case "onMouseEnter":(d=
!d.disabled)||(a=a.type,d=!("button"===a||"input"===a||"select"===a||"textarea"===a));a=!d;break a;default:a=!1}if(a)return null;if(c&&"function"!==typeof c)throw Error(k(231,b,typeof c));return c}function qg(a,b,c){if(b=pg(a,c.dispatchConfig.phasedRegistrationNames[b]))c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a)}function Ji(a){if(a&&a.dispatchConfig.phasedRegistrationNames){for(var b=a._targetInst,c=[];b;)c.push(b),b=pa(b);for(b=c.length;0<b--;)qg(c[b],
"captured",a);for(b=0;b<c.length;b++)qg(c[b],"bubbled",a)}}function be(a,b,c){a&&c&&c.dispatchConfig.registrationName&&(b=pg(a,c.dispatchConfig.registrationName))&&(c._dispatchListeners=jb(c._dispatchListeners,b),c._dispatchInstances=jb(c._dispatchInstances,a))}function Ki(a){a&&a.dispatchConfig.registrationName&&be(a._targetInst,null,a)}function lb(a){Kd(a,Ji)}function rg(){if(wc)return wc;var a,b=ce,c=b.length,d,e="value"in Ba?Ba.value:Ba.textContent,f=e.length;for(a=0;a<c&&b[a]===e[a];a++);var g=
c-a;for(d=1;d<=g&&b[c-d]===e[f-d];d++);return wc=e.slice(a,1<d?1-d:void 0)}function xc(){return!0}function yc(){return!1}function R(a,b,c,d){this.dispatchConfig=a;this._targetInst=b;this.nativeEvent=c;a=this.constructor.Interface;for(var e in a)a.hasOwnProperty(e)&&((b=a[e])?this[e]=b(c):"target"===e?this.target=d:this[e]=c[e]);this.isDefaultPrevented=(null!=c.defaultPrevented?c.defaultPrevented:!1===c.returnValue)?xc:yc;this.isPropagationStopped=yc;return this}function Li(a,b,c,d){if(this.eventPool.length){var e=
this.eventPool.pop();this.call(e,a,b,c,d);return e}return new this(a,b,c,d)}function Mi(a){if(!(a instanceof this))throw Error(k(279));a.destructor();10>this.eventPool.length&&this.eventPool.push(a)}function sg(a){a.eventPool=[];a.getPooled=Li;a.release=Mi}function tg(a,b){switch(a){case "keyup":return-1!==Ni.indexOf(b.keyCode);case "keydown":return 229!==b.keyCode;case "keypress":case "mousedown":case "blur":return!0;default:return!1}}function ug(a){a=a.detail;return"object"===typeof a&&"data"in
a?a.data:null}function Oi(a,b){switch(a){case "compositionend":return ug(b);case "keypress":if(32!==b.which)return null;vg=!0;return wg;case "textInput":return a=b.data,a===wg&&vg?null:a;default:return null}}function Pi(a,b){if(mb)return"compositionend"===a||!de&&tg(a,b)?(a=rg(),wc=ce=Ba=null,mb=!1,a):null;switch(a){case "paste":return null;case "keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;
case "compositionend":return xg&&"ko"!==b.locale?null:b.data;default:return null}}function yg(a){var b=a&&a.nodeName&&a.nodeName.toLowerCase();return"input"===b?!!Qi[a.type]:"textarea"===b?!0:!1}function zg(a,b,c){a=R.getPooled(Ag.change,a,b,c);a.type="change";sf(c);lb(a);return a}function Ri(a){pc(a)}function zc(a){var b=Pa(a);if(Gf(b))return a}function Si(a,b){if("change"===a)return b}function Bg(){Mb&&(Mb.detachEvent("onpropertychange",Cg),Nb=Mb=null)}function Cg(a){if("value"===a.propertyName&&
zc(Nb))if(a=zg(Nb,a,Ld(a)),Oa)pc(a);else{Oa=!0;try{ee(Ri,a)}finally{Oa=!1,ud()}}}function Ti(a,b,c){"focus"===a?(Bg(),Mb=b,Nb=c,Mb.attachEvent("onpropertychange",Cg)):"blur"===a&&Bg()}function Ui(a,b){if("selectionchange"===a||"keyup"===a||"keydown"===a)return zc(Nb)}function Vi(a,b){if("click"===a)return zc(b)}function Wi(a,b){if("input"===a||"change"===a)return zc(b)}function Xi(a){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(a):(a=Yi[a])?!!b[a]:!1}function fe(a){return Xi}
function Zi(a,b){return a===b&&(0!==a||1/a===1/b)||a!==a&&b!==b}function Ob(a,b){if(Qa(a,b))return!0;if("object"!==typeof a||null===a||"object"!==typeof b||null===b)return!1;var c=Object.keys(a),d=Object.keys(b);if(c.length!==d.length)return!1;for(d=0;d<c.length;d++)if(!$i.call(b,c[d])||!Qa(a[c[d]],b[c[d]]))return!1;return!0}function Dg(a,b){var c=b.window===b?b.document:9===b.nodeType?b:b.ownerDocument;if(ge||null==nb||nb!==Wd(c))return null;c=nb;"selectionStart"in c&&Xd(c)?c={start:c.selectionStart,
end:c.selectionEnd}:(c=(c.ownerDocument&&c.ownerDocument.defaultView||window).getSelection(),c={anchorNode:c.anchorNode,anchorOffset:c.anchorOffset,focusNode:c.focusNode,focusOffset:c.focusOffset});return Pb&&Ob(Pb,c)?null:(Pb=c,a=R.getPooled(Eg.select,he,a,b),a.type="select",a.target=nb,lb(a),a)}function Ac(a){var b=a.keyCode;"charCode"in a?(a=a.charCode,0===a&&13===b&&(a=13)):a=b;10===a&&(a=13);return 32<=a||13===a?a:0}function q(a,b){0>ob||(a.current=ie[ob],ie[ob]=null,ob--)}function y(a,b,c){ob++;
ie[ob]=a.current;a.current=b}function pb(a,b){var c=a.type.contextTypes;if(!c)return Ca;var d=a.stateNode;if(d&&d.__reactInternalMemoizedUnmaskedChildContext===b)return d.__reactInternalMemoizedMaskedChildContext;var e={},f;for(f in c)e[f]=b[f];d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=b,a.__reactInternalMemoizedMaskedChildContext=e);return e}function N(a){a=a.childContextTypes;return null!==a&&void 0!==a}function Fg(a,b,c){if(B.current!==Ca)throw Error(k(168));y(B,b);y(G,c)}
function Gg(a,b,c){var d=a.stateNode;a=b.childContextTypes;if("function"!==typeof d.getChildContext)return c;d=d.getChildContext();for(var e in d)if(!(e in a))throw Error(k(108,na(b)||"Unknown",e));return M({},c,{},d)}function Bc(a){a=(a=a.stateNode)&&a.__reactInternalMemoizedMergedChildContext||Ca;Ra=B.current;y(B,a);y(G,G.current);return!0}function Hg(a,b,c){var d=a.stateNode;if(!d)throw Error(k(169));c?(a=Gg(a,b,Ra),d.__reactInternalMemoizedMergedChildContext=a,q(G),q(B),y(B,a)):q(G);y(G,c)}function Cc(){switch(aj()){case Dc:return 99;
case Ig:return 98;case Jg:return 97;case Kg:return 96;case Lg:return 95;default:throw Error(k(332));}}function Mg(a){switch(a){case 99:return Dc;case 98:return Ig;case 97:return Jg;case 96:return Kg;case 95:return Lg;default:throw Error(k(332));}}function Da(a,b){a=Mg(a);return bj(a,b)}function Ng(a,b,c){a=Mg(a);return je(a,b,c)}function Og(a){null===qa?(qa=[a],Ec=je(Dc,Pg)):qa.push(a);return Qg}function ha(){if(null!==Ec){var a=Ec;Ec=null;Rg(a)}Pg()}function Pg(){if(!ke&&null!==qa){ke=!0;var a=0;
try{var b=qa;Da(99,function(){for(;a<b.length;a++){var c=b[a];do c=c(!0);while(null!==c)}});qa=null}catch(c){throw null!==qa&&(qa=qa.slice(a+1)),je(Dc,ha),c;}finally{ke=!1}}}function Fc(a,b,c){c/=10;return 1073741821-(((1073741821-a+b/10)/c|0)+1)*c}function aa(a,b){if(a&&a.defaultProps){b=M({},b);a=a.defaultProps;for(var c in a)void 0===b[c]&&(b[c]=a[c])}return b}function le(){Gc=qb=Hc=null}function me(a){var b=Ic.current;q(Ic);a.type._context._currentValue=b}function Sg(a,b){for(;null!==a;){var c=
a.alternate;if(a.childExpirationTime<b)a.childExpirationTime=b,null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);else if(null!==c&&c.childExpirationTime<b)c.childExpirationTime=b;else break;a=a.return}}function rb(a,b){Hc=a;Gc=qb=null;a=a.dependencies;null!==a&&null!==a.firstContext&&(a.expirationTime>=b&&(ia=!0),a.firstContext=null)}function W(a,b){if(Gc!==a&&!1!==b&&0!==b){if("number"!==typeof b||1073741823===b)Gc=a,b=1073741823;b={context:a,observedBits:b,next:null};if(null===qb){if(null===
Hc)throw Error(k(308));qb=b;Hc.dependencies={expirationTime:0,firstContext:b,responders:null}}else qb=qb.next=b}return a._currentValue}function ne(a){a.updateQueue={baseState:a.memoizedState,baseQueue:null,shared:{pending:null},effects:null}}function oe(a,b){a=a.updateQueue;b.updateQueue===a&&(b.updateQueue={baseState:a.baseState,baseQueue:a.baseQueue,shared:a.shared,effects:a.effects})}function Ea(a,b){a={expirationTime:a,suspenseConfig:b,tag:Tg,payload:null,callback:null,next:null};return a.next=
a}function Fa(a,b){a=a.updateQueue;if(null!==a){a=a.shared;var c=a.pending;null===c?b.next=b:(b.next=c.next,c.next=b);a.pending=b}}function Ug(a,b){var c=a.alternate;null!==c&&oe(c,a);a=a.updateQueue;c=a.baseQueue;null===c?(a.baseQueue=b.next=b,b.next=b):(b.next=c.next,c.next=b)}function Qb(a,b,c,d){var e=a.updateQueue;Ga=!1;var f=e.baseQueue,g=e.shared.pending;if(null!==g){if(null!==f){var h=f.next;f.next=g.next;g.next=h}f=g;e.shared.pending=null;h=a.alternate;null!==h&&(h=h.updateQueue,null!==h&&
(h.baseQueue=g))}if(null!==f){h=f.next;var m=e.baseState,n=0,k=null,ba=null,l=null;if(null!==h){var p=h;do{g=p.expirationTime;if(g<d){var t={expirationTime:p.expirationTime,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null};null===l?(ba=l=t,k=m):l=l.next=t;g>n&&(n=g)}else{null!==l&&(l=l.next={expirationTime:1073741823,suspenseConfig:p.suspenseConfig,tag:p.tag,payload:p.payload,callback:p.callback,next:null});Vg(g,p.suspenseConfig);a:{var q=a,r=p;g=b;t=c;switch(r.tag){case 1:q=
r.payload;if("function"===typeof q){m=q.call(t,m,g);break a}m=q;break a;case 3:q.effectTag=q.effectTag&-4097|64;case Tg:q=r.payload;g="function"===typeof q?q.call(t,m,g):q;if(null===g||void 0===g)break a;m=M({},m,g);break a;case Jc:Ga=!0}}null!==p.callback&&(a.effectTag|=32,g=e.effects,null===g?e.effects=[p]:g.push(p))}p=p.next;if(null===p||p===h)if(g=e.shared.pending,null===g)break;else p=f.next=g.next,g.next=h,e.baseQueue=f=g,e.shared.pending=null}while(1)}null===l?k=m:l.next=ba;e.baseState=k;e.baseQueue=
l;Kc(n);a.expirationTime=n;a.memoizedState=m}}function Wg(a,b,c){a=b.effects;b.effects=null;if(null!==a)for(b=0;b<a.length;b++){var d=a[b],e=d.callback;if(null!==e){d.callback=null;d=e;e=c;if("function"!==typeof d)throw Error(k(191,d));d.call(e)}}}function Lc(a,b,c,d){b=a.memoizedState;c=c(d,b);c=null===c||void 0===c?b:M({},b,c);a.memoizedState=c;0===a.expirationTime&&(a.updateQueue.baseState=c)}function Xg(a,b,c,d,e,f,g){a=a.stateNode;return"function"===typeof a.shouldComponentUpdate?a.shouldComponentUpdate(d,
f,g):b.prototype&&b.prototype.isPureReactComponent?!Ob(c,d)||!Ob(e,f):!0}function Yg(a,b,c){var d=!1,e=Ca;var f=b.contextType;"object"===typeof f&&null!==f?f=W(f):(e=N(b)?Ra:B.current,d=b.contextTypes,f=(d=null!==d&&void 0!==d)?pb(a,e):Ca);b=new b(c,f);a.memoizedState=null!==b.state&&void 0!==b.state?b.state:null;b.updater=Mc;a.stateNode=b;b._reactInternalFiber=a;d&&(a=a.stateNode,a.__reactInternalMemoizedUnmaskedChildContext=e,a.__reactInternalMemoizedMaskedChildContext=f);return b}function Zg(a,
b,c,d){a=b.state;"function"===typeof b.componentWillReceiveProps&&b.componentWillReceiveProps(c,d);"function"===typeof b.UNSAFE_componentWillReceiveProps&&b.UNSAFE_componentWillReceiveProps(c,d);b.state!==a&&Mc.enqueueReplaceState(b,b.state,null)}function pe(a,b,c,d){var e=a.stateNode;e.props=c;e.state=a.memoizedState;e.refs=$g;ne(a);var f=b.contextType;"object"===typeof f&&null!==f?e.context=W(f):(f=N(b)?Ra:B.current,e.context=pb(a,f));Qb(a,c,e,d);e.state=a.memoizedState;f=b.getDerivedStateFromProps;
"function"===typeof f&&(Lc(a,b,f,c),e.state=a.memoizedState);"function"===typeof b.getDerivedStateFromProps||"function"===typeof e.getSnapshotBeforeUpdate||"function"!==typeof e.UNSAFE_componentWillMount&&"function"!==typeof e.componentWillMount||(b=e.state,"function"===typeof e.componentWillMount&&e.componentWillMount(),"function"===typeof e.UNSAFE_componentWillMount&&e.UNSAFE_componentWillMount(),b!==e.state&&Mc.enqueueReplaceState(e,e.state,null),Qb(a,c,e,d),e.state=a.memoizedState);"function"===
typeof e.componentDidMount&&(a.effectTag|=4)}function Rb(a,b,c){a=c.ref;if(null!==a&&"function"!==typeof a&&"object"!==typeof a){if(c._owner){c=c._owner;if(c){if(1!==c.tag)throw Error(k(309));var d=c.stateNode}if(!d)throw Error(k(147,a));var e=""+a;if(null!==b&&null!==b.ref&&"function"===typeof b.ref&&b.ref._stringRef===e)return b.ref;b=function(a){var b=d.refs;b===$g&&(b=d.refs={});null===a?delete b[e]:b[e]=a};b._stringRef=e;return b}if("string"!==typeof a)throw Error(k(284));if(!c._owner)throw Error(k(290,
a));}return a}function Nc(a,b){if("textarea"!==a.type)throw Error(k(31,"[object Object]"===Object.prototype.toString.call(b)?"object with keys {"+Object.keys(b).join(", ")+"}":b,""));}function ah(a){function b(b,c){if(a){var d=b.lastEffect;null!==d?(d.nextEffect=c,b.lastEffect=c):b.firstEffect=b.lastEffect=c;c.nextEffect=null;c.effectTag=8}}function c(c,d){if(!a)return null;for(;null!==d;)b(c,d),d=d.sibling;return null}function d(a,b){for(a=new Map;null!==b;)null!==b.key?a.set(b.key,b):a.set(b.index,
b),b=b.sibling;return a}function e(a,b){a=Sa(a,b);a.index=0;a.sibling=null;return a}function f(b,c,d){b.index=d;if(!a)return c;d=b.alternate;if(null!==d)return d=d.index,d<c?(b.effectTag=2,c):d;b.effectTag=2;return c}function g(b){a&&null===b.alternate&&(b.effectTag=2);return b}function h(a,b,c,d){if(null===b||6!==b.tag)return b=qe(c,a.mode,d),b.return=a,b;b=e(b,c);b.return=a;return b}function m(a,b,c,d){if(null!==b&&b.elementType===c.type)return d=e(b,c.props),d.ref=Rb(a,b,c),d.return=a,d;d=Oc(c.type,
c.key,c.props,null,a.mode,d);d.ref=Rb(a,b,c);d.return=a;return d}function n(a,b,c,d){if(null===b||4!==b.tag||b.stateNode.containerInfo!==c.containerInfo||b.stateNode.implementation!==c.implementation)return b=re(c,a.mode,d),b.return=a,b;b=e(b,c.children||[]);b.return=a;return b}function l(a,b,c,d,f){if(null===b||7!==b.tag)return b=Ha(c,a.mode,d,f),b.return=a,b;b=e(b,c);b.return=a;return b}function ba(a,b,c){if("string"===typeof b||"number"===typeof b)return b=qe(""+b,a.mode,c),b.return=a,b;if("object"===
typeof b&&null!==b){switch(b.$$typeof){case Pc:return c=Oc(b.type,b.key,b.props,null,a.mode,c),c.ref=Rb(a,null,b),c.return=a,c;case gb:return b=re(b,a.mode,c),b.return=a,b}if(Qc(b)||zb(b))return b=Ha(b,a.mode,c,null),b.return=a,b;Nc(a,b)}return null}function p(a,b,c,d){var e=null!==b?b.key:null;if("string"===typeof c||"number"===typeof c)return null!==e?null:h(a,b,""+c,d);if("object"===typeof c&&null!==c){switch(c.$$typeof){case Pc:return c.key===e?c.type===Ma?l(a,b,c.props.children,d,e):m(a,b,c,
d):null;case gb:return c.key===e?n(a,b,c,d):null}if(Qc(c)||zb(c))return null!==e?null:l(a,b,c,d,null);Nc(a,c)}return null}function t(a,b,c,d,e){if("string"===typeof d||"number"===typeof d)return a=a.get(c)||null,h(b,a,""+d,e);if("object"===typeof d&&null!==d){switch(d.$$typeof){case Pc:return a=a.get(null===d.key?c:d.key)||null,d.type===Ma?l(b,a,d.props.children,e,d.key):m(b,a,d,e);case gb:return a=a.get(null===d.key?c:d.key)||null,n(b,a,d,e)}if(Qc(d)||zb(d))return a=a.get(c)||null,l(b,a,d,e,null);
Nc(b,d)}return null}function q(e,g,h,m){for(var n=null,k=null,l=g,r=g=0,C=null;null!==l&&r<h.length;r++){l.index>r?(C=l,l=null):C=l.sibling;var O=p(e,l,h[r],m);if(null===O){null===l&&(l=C);break}a&&l&&null===O.alternate&&b(e,l);g=f(O,g,r);null===k?n=O:k.sibling=O;k=O;l=C}if(r===h.length)return c(e,l),n;if(null===l){for(;r<h.length;r++)l=ba(e,h[r],m),null!==l&&(g=f(l,g,r),null===k?n=l:k.sibling=l,k=l);return n}for(l=d(e,l);r<h.length;r++)C=t(l,e,r,h[r],m),null!==C&&(a&&null!==C.alternate&&l.delete(null===
C.key?r:C.key),g=f(C,g,r),null===k?n=C:k.sibling=C,k=C);a&&l.forEach(function(a){return b(e,a)});return n}function w(e,g,h,n){var m=zb(h);if("function"!==typeof m)throw Error(k(150));h=m.call(h);if(null==h)throw Error(k(151));for(var l=m=null,r=g,C=g=0,O=null,v=h.next();null!==r&&!v.done;C++,v=h.next()){r.index>C?(O=r,r=null):O=r.sibling;var q=p(e,r,v.value,n);if(null===q){null===r&&(r=O);break}a&&r&&null===q.alternate&&b(e,r);g=f(q,g,C);null===l?m=q:l.sibling=q;l=q;r=O}if(v.done)return c(e,r),m;
if(null===r){for(;!v.done;C++,v=h.next())v=ba(e,v.value,n),null!==v&&(g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);return m}for(r=d(e,r);!v.done;C++,v=h.next())v=t(r,e,C,v.value,n),null!==v&&(a&&null!==v.alternate&&r.delete(null===v.key?C:v.key),g=f(v,g,C),null===l?m=v:l.sibling=v,l=v);a&&r.forEach(function(a){return b(e,a)});return m}return function(a,d,f,h){var m="object"===typeof f&&null!==f&&f.type===Ma&&null===f.key;m&&(f=f.props.children);var n="object"===typeof f&&null!==f;if(n)switch(f.$$typeof){case Pc:a:{n=
f.key;for(m=d;null!==m;){if(m.key===n){switch(m.tag){case 7:if(f.type===Ma){c(a,m.sibling);d=e(m,f.props.children);d.return=a;a=d;break a}break;default:if(m.elementType===f.type){c(a,m.sibling);d=e(m,f.props);d.ref=Rb(a,m,f);d.return=a;a=d;break a}}c(a,m);break}else b(a,m);m=m.sibling}f.type===Ma?(d=Ha(f.props.children,a.mode,h,f.key),d.return=a,a=d):(h=Oc(f.type,f.key,f.props,null,a.mode,h),h.ref=Rb(a,d,f),h.return=a,a=h)}return g(a);case gb:a:{for(m=f.key;null!==d;){if(d.key===m)if(4===d.tag&&d.stateNode.containerInfo===
f.containerInfo&&d.stateNode.implementation===f.implementation){c(a,d.sibling);d=e(d,f.children||[]);d.return=a;a=d;break a}else{c(a,d);break}else b(a,d);d=d.sibling}d=re(f,a.mode,h);d.return=a;a=d}return g(a)}if("string"===typeof f||"number"===typeof f)return f=""+f,null!==d&&6===d.tag?(c(a,d.sibling),d=e(d,f),d.return=a,a=d):(c(a,d),d=qe(f,a.mode,h),d.return=a,a=d),g(a);if(Qc(f))return q(a,d,f,h);if(zb(f))return w(a,d,f,h);n&&Nc(a,f);if("undefined"===typeof f&&!m)switch(a.tag){case 1:case 0:throw a=
a.type,Error(k(152,a.displayName||a.name||"Component"));}return c(a,d)}}function Ta(a){if(a===Sb)throw Error(k(174));return a}function se(a,b){y(Tb,b);y(Ub,a);y(ja,Sb);a=b.nodeType;switch(a){case 9:case 11:b=(b=b.documentElement)?b.namespaceURI:Hd(null,"");break;default:a=8===a?b.parentNode:b,b=a.namespaceURI||null,a=a.tagName,b=Hd(b,a)}q(ja);y(ja,b)}function tb(a){q(ja);q(Ub);q(Tb)}function bh(a){Ta(Tb.current);var b=Ta(ja.current);var c=Hd(b,a.type);b!==c&&(y(Ub,a),y(ja,c))}function te(a){Ub.current===
a&&(q(ja),q(Ub))}function Rc(a){for(var b=a;null!==b;){if(13===b.tag){var c=b.memoizedState;if(null!==c&&(c=c.dehydrated,null===c||c.data===$d||c.data===Zd))return b}else if(19===b.tag&&void 0!==b.memoizedProps.revealOrder){if(0!==(b.effectTag&64))return b}else if(null!==b.child){b.child.return=b;b=b.child;continue}if(b===a)break;for(;null===b.sibling;){if(null===b.return||b.return===a)return null;b=b.return}b.sibling.return=b.return;b=b.sibling}return null}function ue(a,b){return{responder:a,props:b}}
function S(){throw Error(k(321));}function ve(a,b){if(null===b)return!1;for(var c=0;c<b.length&&c<a.length;c++)if(!Qa(a[c],b[c]))return!1;return!0}function we(a,b,c,d,e,f){Ia=f;z=b;b.memoizedState=null;b.updateQueue=null;b.expirationTime=0;Sc.current=null===a||null===a.memoizedState?dj:ej;a=c(d,e);if(b.expirationTime===Ia){f=0;do{b.expirationTime=0;if(!(25>f))throw Error(k(301));f+=1;J=K=null;b.updateQueue=null;Sc.current=fj;a=c(d,e)}while(b.expirationTime===Ia)}Sc.current=Tc;b=null!==K&&null!==K.next;
Ia=0;J=K=z=null;Uc=!1;if(b)throw Error(k(300));return a}function ub(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};null===J?z.memoizedState=J=a:J=J.next=a;return J}function vb(){if(null===K){var a=z.alternate;a=null!==a?a.memoizedState:null}else a=K.next;var b=null===J?z.memoizedState:J.next;if(null!==b)J=b,K=a;else{if(null===a)throw Error(k(310));K=a;a={memoizedState:K.memoizedState,baseState:K.baseState,baseQueue:K.baseQueue,queue:K.queue,next:null};null===J?z.memoizedState=
J=a:J=J.next=a}return J}function Ua(a,b){return"function"===typeof b?b(a):b}function Vc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=K,e=d.baseQueue,f=c.pending;if(null!==f){if(null!==e){var g=e.next;e.next=f.next;f.next=g}d.baseQueue=e=f;c.pending=null}if(null!==e){e=e.next;d=d.baseState;var h=g=f=null,m=e;do{var n=m.expirationTime;if(n<Ia){var l={expirationTime:m.expirationTime,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,
next:null};null===h?(g=h=l,f=d):h=h.next=l;n>z.expirationTime&&(z.expirationTime=n,Kc(n))}else null!==h&&(h=h.next={expirationTime:1073741823,suspenseConfig:m.suspenseConfig,action:m.action,eagerReducer:m.eagerReducer,eagerState:m.eagerState,next:null}),Vg(n,m.suspenseConfig),d=m.eagerReducer===a?m.eagerState:a(d,m.action);m=m.next}while(null!==m&&m!==e);null===h?f=d:h.next=g;Qa(d,b.memoizedState)||(ia=!0);b.memoizedState=d;b.baseState=f;b.baseQueue=h;c.lastRenderedState=d}return[b.memoizedState,
c.dispatch]}function Wc(a,b,c){b=vb();c=b.queue;if(null===c)throw Error(k(311));c.lastRenderedReducer=a;var d=c.dispatch,e=c.pending,f=b.memoizedState;if(null!==e){c.pending=null;var g=e=e.next;do f=a(f,g.action),g=g.next;while(g!==e);Qa(f,b.memoizedState)||(ia=!0);b.memoizedState=f;null===b.baseQueue&&(b.baseState=f);c.lastRenderedState=f}return[f,d]}function xe(a){var b=ub();"function"===typeof a&&(a=a());b.memoizedState=b.baseState=a;a=b.queue={pending:null,dispatch:null,lastRenderedReducer:Ua,
lastRenderedState:a};a=a.dispatch=ch.bind(null,z,a);return[b.memoizedState,a]}function ye(a,b,c,d){a={tag:a,create:b,destroy:c,deps:d,next:null};b=z.updateQueue;null===b?(b={lastEffect:null},z.updateQueue=b,b.lastEffect=a.next=a):(c=b.lastEffect,null===c?b.lastEffect=a.next=a:(d=c.next,c.next=a,a.next=d,b.lastEffect=a));return a}function dh(a){return vb().memoizedState}function ze(a,b,c,d){var e=ub();z.effectTag|=a;e.memoizedState=ye(1|b,c,void 0,void 0===d?null:d)}function Ae(a,b,c,d){var e=vb();
d=void 0===d?null:d;var f=void 0;if(null!==K){var g=K.memoizedState;f=g.destroy;if(null!==d&&ve(d,g.deps)){ye(b,c,f,d);return}}z.effectTag|=a;e.memoizedState=ye(1|b,c,f,d)}function eh(a,b){return ze(516,4,a,b)}function Xc(a,b){return Ae(516,4,a,b)}function fh(a,b){return Ae(4,2,a,b)}function gh(a,b){if("function"===typeof b)return a=a(),b(a),function(){b(null)};if(null!==b&&void 0!==b)return a=a(),b.current=a,function(){b.current=null}}function hh(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;
return Ae(4,2,gh.bind(null,b,a),c)}function Be(a,b){}function ih(a,b){ub().memoizedState=[a,void 0===b?null:b];return a}function Yc(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];c.memoizedState=[a,b];return a}function jh(a,b){var c=vb();b=void 0===b?null:b;var d=c.memoizedState;if(null!==d&&null!==b&&ve(b,d[1]))return d[0];a=a();c.memoizedState=[a,b];return a}function Ce(a,b,c){var d=Cc();Da(98>d?98:d,function(){a(!0)});Da(97<d?97:d,function(){var d=
X.suspense;X.suspense=void 0===b?null:b;try{a(!1),c()}finally{X.suspense=d}})}function ch(a,b,c){var d=ka(),e=Vb.suspense;d=Va(d,a,e);e={expirationTime:d,suspenseConfig:e,action:c,eagerReducer:null,eagerState:null,next:null};var f=b.pending;null===f?e.next=e:(e.next=f.next,f.next=e);b.pending=e;f=a.alternate;if(a===z||null!==f&&f===z)Uc=!0,e.expirationTime=Ia,z.expirationTime=Ia;else{if(0===a.expirationTime&&(null===f||0===f.expirationTime)&&(f=b.lastRenderedReducer,null!==f))try{var g=b.lastRenderedState,
h=f(g,c);e.eagerReducer=f;e.eagerState=h;if(Qa(h,g))return}catch(m){}finally{}Ja(a,d)}}function kh(a,b){var c=la(5,null,null,0);c.elementType="DELETED";c.type="DELETED";c.stateNode=b;c.return=a;c.effectTag=8;null!==a.lastEffect?(a.lastEffect.nextEffect=c,a.lastEffect=c):a.firstEffect=a.lastEffect=c}function lh(a,b){switch(a.tag){case 5:var c=a.type;b=1!==b.nodeType||c.toLowerCase()!==b.nodeName.toLowerCase()?null:b;return null!==b?(a.stateNode=b,!0):!1;case 6:return b=""===a.pendingProps||3!==b.nodeType?
null:b,null!==b?(a.stateNode=b,!0):!1;case 13:return!1;default:return!1}}function De(a){if(Wa){var b=Ka;if(b){var c=b;if(!lh(a,b)){b=kb(c.nextSibling);if(!b||!lh(a,b)){a.effectTag=a.effectTag&-1025|2;Wa=!1;ra=a;return}kh(ra,c)}ra=a;Ka=kb(b.firstChild)}else a.effectTag=a.effectTag&-1025|2,Wa=!1,ra=a}}function mh(a){for(a=a.return;null!==a&&5!==a.tag&&3!==a.tag&&13!==a.tag;)a=a.return;ra=a}function Zc(a){if(a!==ra)return!1;if(!Wa)return mh(a),Wa=!0,!1;var b=a.type;if(5!==a.tag||"head"!==b&&"body"!==
b&&!Yd(b,a.memoizedProps))for(b=Ka;b;)kh(a,b),b=kb(b.nextSibling);mh(a);if(13===a.tag){a=a.memoizedState;a=null!==a?a.dehydrated:null;if(!a)throw Error(k(317));a:{a=a.nextSibling;for(b=0;a;){if(8===a.nodeType){var c=a.data;if(c===og){if(0===b){Ka=kb(a.nextSibling);break a}b--}else c!==ng&&c!==Zd&&c!==$d||b++}a=a.nextSibling}Ka=null}}else Ka=ra?kb(a.stateNode.nextSibling):null;return!0}function Ee(){Ka=ra=null;Wa=!1}function T(a,b,c,d){b.child=null===a?Fe(b,null,c,d):wb(b,a.child,c,d)}function nh(a,
b,c,d,e){c=c.render;var f=b.ref;rb(b,e);d=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,d,e);return b.child}function oh(a,b,c,d,e,f){if(null===a){var g=c.type;if("function"===typeof g&&!Ge(g)&&void 0===g.defaultProps&&null===c.compare&&void 0===c.defaultProps)return b.tag=15,b.type=g,ph(a,b,g,d,e,f);a=Oc(c.type,null,d,null,b.mode,f);a.ref=b.ref;a.return=b;return b.child=a}g=a.child;if(e<
f&&(e=g.memoizedProps,c=c.compare,c=null!==c?c:Ob,c(e,d)&&a.ref===b.ref))return sa(a,b,f);b.effectTag|=1;a=Sa(g,d);a.ref=b.ref;a.return=b;return b.child=a}function ph(a,b,c,d,e,f){return null!==a&&Ob(a.memoizedProps,d)&&a.ref===b.ref&&(ia=!1,e<f)?(b.expirationTime=a.expirationTime,sa(a,b,f)):He(a,b,c,d,f)}function qh(a,b){var c=b.ref;if(null===a&&null!==c||null!==a&&a.ref!==c)b.effectTag|=128}function He(a,b,c,d,e){var f=N(c)?Ra:B.current;f=pb(b,f);rb(b,e);c=we(a,b,c,d,f,e);if(null!==a&&!ia)return b.updateQueue=
a.updateQueue,b.effectTag&=-517,a.expirationTime<=e&&(a.expirationTime=0),sa(a,b,e);b.effectTag|=1;T(a,b,c,e);return b.child}function rh(a,b,c,d,e){if(N(c)){var f=!0;Bc(b)}else f=!1;rb(b,e);if(null===b.stateNode)null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),Yg(b,c,d),pe(b,c,d,e),d=!0;else if(null===a){var g=b.stateNode,h=b.memoizedProps;g.props=h;var m=g.context,n=c.contextType;"object"===typeof n&&null!==n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n));var l=c.getDerivedStateFromProps,k="function"===
typeof l||"function"===typeof g.getSnapshotBeforeUpdate;k||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n);Ga=!1;var p=b.memoizedState;g.state=p;Qb(b,d,g,e);m=b.memoizedState;h!==d||p!==m||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),m=b.memoizedState),(h=Ga||Xg(b,c,h,d,p,m,n))?(k||"function"!==typeof g.UNSAFE_componentWillMount&&"function"!==typeof g.componentWillMount||("function"===typeof g.componentWillMount&&
g.componentWillMount(),"function"===typeof g.UNSAFE_componentWillMount&&g.UNSAFE_componentWillMount()),"function"===typeof g.componentDidMount&&(b.effectTag|=4)):("function"===typeof g.componentDidMount&&(b.effectTag|=4),b.memoizedProps=d,b.memoizedState=m),g.props=d,g.state=m,g.context=n,d=h):("function"===typeof g.componentDidMount&&(b.effectTag|=4),d=!1)}else g=b.stateNode,oe(a,b),h=b.memoizedProps,g.props=b.type===b.elementType?h:aa(b.type,h),m=g.context,n=c.contextType,"object"===typeof n&&null!==
n?n=W(n):(n=N(c)?Ra:B.current,n=pb(b,n)),l=c.getDerivedStateFromProps,(k="function"===typeof l||"function"===typeof g.getSnapshotBeforeUpdate)||"function"!==typeof g.UNSAFE_componentWillReceiveProps&&"function"!==typeof g.componentWillReceiveProps||(h!==d||m!==n)&&Zg(b,g,d,n),Ga=!1,m=b.memoizedState,g.state=m,Qb(b,d,g,e),p=b.memoizedState,h!==d||m!==p||G.current||Ga?("function"===typeof l&&(Lc(b,c,l,d),p=b.memoizedState),(l=Ga||Xg(b,c,h,d,m,p,n))?(k||"function"!==typeof g.UNSAFE_componentWillUpdate&&
"function"!==typeof g.componentWillUpdate||("function"===typeof g.componentWillUpdate&&g.componentWillUpdate(d,p,n),"function"===typeof g.UNSAFE_componentWillUpdate&&g.UNSAFE_componentWillUpdate(d,p,n)),"function"===typeof g.componentDidUpdate&&(b.effectTag|=4),"function"===typeof g.getSnapshotBeforeUpdate&&(b.effectTag|=256)):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===
a.memoizedState||(b.effectTag|=256),b.memoizedProps=d,b.memoizedState=p),g.props=d,g.state=p,g.context=n,d=l):("function"!==typeof g.componentDidUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=4),"function"!==typeof g.getSnapshotBeforeUpdate||h===a.memoizedProps&&m===a.memoizedState||(b.effectTag|=256),d=!1);return Ie(a,b,c,d,f,e)}function Ie(a,b,c,d,e,f){qh(a,b);var g=0!==(b.effectTag&64);if(!d&&!g)return e&&Hg(b,c,!1),sa(a,b,f);d=b.stateNode;gj.current=b;var h=g&&"function"!==typeof c.getDerivedStateFromError?
null:d.render();b.effectTag|=1;null!==a&&g?(b.child=wb(b,a.child,null,f),b.child=wb(b,null,h,f)):T(a,b,h,f);b.memoizedState=d.state;e&&Hg(b,c,!0);return b.child}function sh(a){var b=a.stateNode;b.pendingContext?Fg(a,b.pendingContext,b.pendingContext!==b.context):b.context&&Fg(a,b.context,!1);se(a,b.containerInfo)}function th(a,b,c){var d=b.mode,e=b.pendingProps,f=D.current,g=!1,h;(h=0!==(b.effectTag&64))||(h=0!==(f&2)&&(null===a||null!==a.memoizedState));h?(g=!0,b.effectTag&=-65):null!==a&&null===
a.memoizedState||void 0===e.fallback||!0===e.unstable_avoidThisFallback||(f|=1);y(D,f&1);if(null===a){void 0!==e.fallback&&De(b);if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;b.memoizedState=Je;b.child=e;return c}d=e.children;b.memoizedState=null;return b.child=Fe(b,null,d,c)}if(null!==a.memoizedState){a=a.child;d=a.sibling;if(g){e=e.fallback;
c=Sa(a,a.pendingProps);c.return=b;if(0===(b.mode&2)&&(g=null!==b.memoizedState?b.child.child:b.child,g!==a.child))for(c.child=g;null!==g;)g.return=c,g=g.sibling;d=Sa(d,e);d.return=b;c.sibling=d;c.childExpirationTime=0;b.memoizedState=Je;b.child=c;return d}c=wb(b,a.child,e.children,c);b.memoizedState=null;return b.child=c}a=a.child;if(g){g=e.fallback;e=Ha(null,d,0,null);e.return=b;e.child=a;null!==a&&(a.return=e);if(0===(b.mode&2))for(a=null!==b.memoizedState?b.child.child:b.child,e.child=a;null!==
a;)a.return=e,a=a.sibling;c=Ha(g,d,c,null);c.return=b;e.sibling=c;c.effectTag|=2;e.childExpirationTime=0;b.memoizedState=Je;b.child=e;return c}b.memoizedState=null;return b.child=wb(b,a,e.children,c)}function uh(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);Sg(a.return,b)}function Ke(a,b,c,d,e,f){var g=a.memoizedState;null===g?a.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:d,tail:c,tailExpiration:0,tailMode:e,
lastEffect:f}:(g.isBackwards=b,g.rendering=null,g.renderingStartTime=0,g.last=d,g.tail=c,g.tailExpiration=0,g.tailMode=e,g.lastEffect=f)}function vh(a,b,c){var d=b.pendingProps,e=d.revealOrder,f=d.tail;T(a,b,d.children,c);d=D.current;if(0!==(d&2))d=d&1|2,b.effectTag|=64;else{if(null!==a&&0!==(a.effectTag&64))a:for(a=b.child;null!==a;){if(13===a.tag)null!==a.memoizedState&&uh(a,c);else if(19===a.tag)uh(a,c);else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===b)break a;for(;null===a.sibling;){if(null===
a.return||a.return===b)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}d&=1}y(D,d);if(0===(b.mode&2))b.memoizedState=null;else switch(e){case "forwards":c=b.child;for(e=null;null!==c;)a=c.alternate,null!==a&&null===Rc(a)&&(e=c),c=c.sibling;c=e;null===c?(e=b.child,b.child=null):(e=c.sibling,c.sibling=null);Ke(b,!1,e,c,f,b.lastEffect);break;case "backwards":c=null;e=b.child;for(b.child=null;null!==e;){a=e.alternate;if(null!==a&&null===Rc(a)){b.child=e;break}a=e.sibling;e.sibling=c;c=e;e=a}Ke(b,
!0,c,null,f,b.lastEffect);break;case "together":Ke(b,!1,null,null,void 0,b.lastEffect);break;default:b.memoizedState=null}return b.child}function sa(a,b,c){null!==a&&(b.dependencies=a.dependencies);var d=b.expirationTime;0!==d&&Kc(d);if(b.childExpirationTime<c)return null;if(null!==a&&b.child!==a.child)throw Error(k(153));if(null!==b.child){a=b.child;c=Sa(a,a.pendingProps);b.child=c;for(c.return=b;null!==a.sibling;)a=a.sibling,c=c.sibling=Sa(a,a.pendingProps),c.return=b;c.sibling=null}return b.child}
function $c(a,b){switch(a.tailMode){case "hidden":b=a.tail;for(var c=null;null!==b;)null!==b.alternate&&(c=b),b=b.sibling;null===c?a.tail=null:c.sibling=null;break;case "collapsed":c=a.tail;for(var d=null;null!==c;)null!==c.alternate&&(d=c),c=c.sibling;null===d?b||null===a.tail?a.tail=null:a.tail.sibling=null:d.sibling=null}}function hj(a,b,c){var d=b.pendingProps;switch(b.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return null;case 1:return N(b.type)&&(q(G),q(B)),
null;case 3:return tb(),q(G),q(B),c=b.stateNode,c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),null!==a&&null!==a.child||!Zc(b)||(b.effectTag|=4),wh(b),null;case 5:te(b);c=Ta(Tb.current);var e=b.type;if(null!==a&&null!=b.stateNode)ij(a,b,e,d,c),a.ref!==b.ref&&(b.effectTag|=128);else{if(!d){if(null===b.stateNode)throw Error(k(166));return null}a=Ta(ja.current);if(Zc(b)){d=b.stateNode;e=b.type;var f=b.memoizedProps;d[Aa]=b;d[vc]=f;switch(e){case "iframe":case "object":case "embed":w("load",
d);break;case "video":case "audio":for(a=0;a<Db.length;a++)w(Db[a],d);break;case "source":w("error",d);break;case "img":case "image":case "link":w("error",d);w("load",d);break;case "form":w("reset",d);w("submit",d);break;case "details":w("toggle",d);break;case "input":Hf(d,f);w("invalid",d);oa(c,"onChange");break;case "select":d._wrapperState={wasMultiple:!!f.multiple};w("invalid",d);oa(c,"onChange");break;case "textarea":Kf(d,f),w("invalid",d),oa(c,"onChange")}Ud(e,f);a=null;for(var g in f)if(f.hasOwnProperty(g)){var h=
f[g];"children"===g?"string"===typeof h?d.textContent!==h&&(a=["children",h]):"number"===typeof h&&d.textContent!==""+h&&(a=["children",""+h]):db.hasOwnProperty(g)&&null!=h&&oa(c,g)}switch(e){case "input":mc(d);Jf(d,f,!0);break;case "textarea":mc(d);Mf(d);break;case "select":case "option":break;default:"function"===typeof f.onClick&&(d.onclick=uc)}c=a;b.updateQueue=c;null!==c&&(b.effectTag|=4)}else{g=9===c.nodeType?c:c.ownerDocument;"http://www.w3.org/1999/xhtml"===a&&(a=Nf(e));"http://www.w3.org/1999/xhtml"===
a?"script"===e?(a=g.createElement("div"),a.innerHTML="<script>\x3c/script>",a=a.removeChild(a.firstChild)):"string"===typeof d.is?a=g.createElement(e,{is:d.is}):(a=g.createElement(e),"select"===e&&(g=a,d.multiple?g.multiple=!0:d.size&&(g.size=d.size))):a=g.createElementNS(a,e);a[Aa]=b;a[vc]=d;jj(a,b,!1,!1);b.stateNode=a;g=Vd(e,d);switch(e){case "iframe":case "object":case "embed":w("load",a);h=d;break;case "video":case "audio":for(h=0;h<Db.length;h++)w(Db[h],a);h=d;break;case "source":w("error",a);
h=d;break;case "img":case "image":case "link":w("error",a);w("load",a);h=d;break;case "form":w("reset",a);w("submit",a);h=d;break;case "details":w("toggle",a);h=d;break;case "input":Hf(a,d);h=Cd(a,d);w("invalid",a);oa(c,"onChange");break;case "option":h=Fd(a,d);break;case "select":a._wrapperState={wasMultiple:!!d.multiple};h=M({},d,{value:void 0});w("invalid",a);oa(c,"onChange");break;case "textarea":Kf(a,d);h=Gd(a,d);w("invalid",a);oa(c,"onChange");break;default:h=d}Ud(e,h);var m=h;for(f in m)if(m.hasOwnProperty(f)){var n=
m[f];"style"===f?gg(a,n):"dangerouslySetInnerHTML"===f?(n=n?n.__html:void 0,null!=n&&xh(a,n)):"children"===f?"string"===typeof n?("textarea"!==e||""!==n)&&Wb(a,n):"number"===typeof n&&Wb(a,""+n):"suppressContentEditableWarning"!==f&&"suppressHydrationWarning"!==f&&"autoFocus"!==f&&(db.hasOwnProperty(f)?null!=n&&oa(c,f):null!=n&&xd(a,f,n,g))}switch(e){case "input":mc(a);Jf(a,d,!1);break;case "textarea":mc(a);Mf(a);break;case "option":null!=d.value&&a.setAttribute("value",""+va(d.value));break;case "select":a.multiple=
!!d.multiple;c=d.value;null!=c?hb(a,!!d.multiple,c,!1):null!=d.defaultValue&&hb(a,!!d.multiple,d.defaultValue,!0);break;default:"function"===typeof h.onClick&&(a.onclick=uc)}lg(e,d)&&(b.effectTag|=4)}null!==b.ref&&(b.effectTag|=128)}return null;case 6:if(a&&null!=b.stateNode)kj(a,b,a.memoizedProps,d);else{if("string"!==typeof d&&null===b.stateNode)throw Error(k(166));c=Ta(Tb.current);Ta(ja.current);Zc(b)?(c=b.stateNode,d=b.memoizedProps,c[Aa]=b,c.nodeValue!==d&&(b.effectTag|=4)):(c=(9===c.nodeType?
c:c.ownerDocument).createTextNode(d),c[Aa]=b,b.stateNode=c)}return null;case 13:q(D);d=b.memoizedState;if(0!==(b.effectTag&64))return b.expirationTime=c,b;c=null!==d;d=!1;null===a?void 0!==b.memoizedProps.fallback&&Zc(b):(e=a.memoizedState,d=null!==e,c||null===e||(e=a.child.sibling,null!==e&&(f=b.firstEffect,null!==f?(b.firstEffect=e,e.nextEffect=f):(b.firstEffect=b.lastEffect=e,e.nextEffect=null),e.effectTag=8)));if(c&&!d&&0!==(b.mode&2))if(null===a&&!0!==b.memoizedProps.unstable_avoidThisFallback||
0!==(D.current&1))F===Xa&&(F=ad);else{if(F===Xa||F===ad)F=bd;0!==Xb&&null!==U&&(Ya(U,P),yh(U,Xb))}if(c||d)b.effectTag|=4;return null;case 4:return tb(),wh(b),null;case 10:return me(b),null;case 17:return N(b.type)&&(q(G),q(B)),null;case 19:q(D);d=b.memoizedState;if(null===d)return null;e=0!==(b.effectTag&64);f=d.rendering;if(null===f)if(e)$c(d,!1);else{if(F!==Xa||null!==a&&0!==(a.effectTag&64))for(f=b.child;null!==f;){a=Rc(f);if(null!==a){b.effectTag|=64;$c(d,!1);e=a.updateQueue;null!==e&&(b.updateQueue=
e,b.effectTag|=4);null===d.lastEffect&&(b.firstEffect=null);b.lastEffect=d.lastEffect;for(d=b.child;null!==d;)e=d,f=c,e.effectTag&=2,e.nextEffect=null,e.firstEffect=null,e.lastEffect=null,a=e.alternate,null===a?(e.childExpirationTime=0,e.expirationTime=f,e.child=null,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null):(e.childExpirationTime=a.childExpirationTime,e.expirationTime=a.expirationTime,e.child=a.child,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,
e.updateQueue=a.updateQueue,f=a.dependencies,e.dependencies=null===f?null:{expirationTime:f.expirationTime,firstContext:f.firstContext,responders:f.responders}),d=d.sibling;y(D,D.current&1|2);return b.child}f=f.sibling}}else{if(!e)if(a=Rc(f),null!==a){if(b.effectTag|=64,e=!0,c=a.updateQueue,null!==c&&(b.updateQueue=c,b.effectTag|=4),$c(d,!0),null===d.tail&&"hidden"===d.tailMode&&!f.alternate)return b=b.lastEffect=d.lastEffect,null!==b&&(b.nextEffect=null),null}else 2*Y()-d.renderingStartTime>d.tailExpiration&&
1<c&&(b.effectTag|=64,e=!0,$c(d,!1),b.expirationTime=b.childExpirationTime=c-1);d.isBackwards?(f.sibling=b.child,b.child=f):(c=d.last,null!==c?c.sibling=f:b.child=f,d.last=f)}return null!==d.tail?(0===d.tailExpiration&&(d.tailExpiration=Y()+500),c=d.tail,d.rendering=c,d.tail=c.sibling,d.lastEffect=b.lastEffect,d.renderingStartTime=Y(),c.sibling=null,b=D.current,y(D,e?b&1|2:b&1),c):null}throw Error(k(156,b.tag));}function lj(a,b){switch(a.tag){case 1:return N(a.type)&&(q(G),q(B)),b=a.effectTag,b&4096?
(a.effectTag=b&-4097|64,a):null;case 3:tb();q(G);q(B);b=a.effectTag;if(0!==(b&64))throw Error(k(285));a.effectTag=b&-4097|64;return a;case 5:return te(a),null;case 13:return q(D),b=a.effectTag,b&4096?(a.effectTag=b&-4097|64,a):null;case 19:return q(D),null;case 4:return tb(),null;case 10:return me(a),null;default:return null}}function Le(a,b){return{value:a,source:b,stack:Bd(b)}}function Me(a,b){var c=b.source,d=b.stack;null===d&&null!==c&&(d=Bd(c));null!==c&&na(c.type);b=b.value;null!==a&&1===a.tag&&
na(a.type);try{console.error(b)}catch(e){setTimeout(function(){throw e;})}}function mj(a,b){try{b.props=a.memoizedProps,b.state=a.memoizedState,b.componentWillUnmount()}catch(c){Za(a,c)}}function zh(a){var b=a.ref;if(null!==b)if("function"===typeof b)try{b(null)}catch(c){Za(a,c)}else b.current=null}function nj(a,b){switch(b.tag){case 0:case 11:case 15:case 22:return;case 1:if(b.effectTag&256&&null!==a){var c=a.memoizedProps,d=a.memoizedState;a=b.stateNode;b=a.getSnapshotBeforeUpdate(b.elementType===
b.type?c:aa(b.type,c),d);a.__reactInternalSnapshotBeforeUpdate=b}return;case 3:case 5:case 6:case 4:case 17:return}throw Error(k(163));}function Ah(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.destroy;c.destroy=void 0;void 0!==d&&d()}c=c.next}while(c!==b)}}function Bh(a,b){b=b.updateQueue;b=null!==b?b.lastEffect:null;if(null!==b){var c=b=b.next;do{if((c.tag&a)===a){var d=c.create;c.destroy=d()}c=c.next}while(c!==b)}}function oj(a,b,c,d){switch(c.tag){case 0:case 11:case 15:case 22:Bh(3,
c);return;case 1:a=c.stateNode;c.effectTag&4&&(null===b?a.componentDidMount():(d=c.elementType===c.type?b.memoizedProps:aa(c.type,b.memoizedProps),a.componentDidUpdate(d,b.memoizedState,a.__reactInternalSnapshotBeforeUpdate)));b=c.updateQueue;null!==b&&Wg(c,b,a);return;case 3:b=c.updateQueue;if(null!==b){a=null;if(null!==c.child)switch(c.child.tag){case 5:a=c.child.stateNode;break;case 1:a=c.child.stateNode}Wg(c,b,a)}return;case 5:a=c.stateNode;null===b&&c.effectTag&4&&lg(c.type,c.memoizedProps)&&
a.focus();return;case 6:return;case 4:return;case 12:return;case 13:null===c.memoizedState&&(c=c.alternate,null!==c&&(c=c.memoizedState,null!==c&&(c=c.dehydrated,null!==c&&bg(c))));return;case 19:case 17:case 20:case 21:return}throw Error(k(163));}function Ch(a,b,c){"function"===typeof Ne&&Ne(b);switch(b.tag){case 0:case 11:case 14:case 15:case 22:a=b.updateQueue;if(null!==a&&(a=a.lastEffect,null!==a)){var d=a.next;Da(97<c?97:c,function(){var a=d;do{var c=a.destroy;if(void 0!==c){var g=b;try{c()}catch(h){Za(g,
h)}}a=a.next}while(a!==d)})}break;case 1:zh(b);c=b.stateNode;"function"===typeof c.componentWillUnmount&&mj(b,c);break;case 5:zh(b);break;case 4:Dh(a,b,c)}}function Eh(a){var b=a.alternate;a.return=null;a.child=null;a.memoizedState=null;a.updateQueue=null;a.dependencies=null;a.alternate=null;a.firstEffect=null;a.lastEffect=null;a.pendingProps=null;a.memoizedProps=null;a.stateNode=null;null!==b&&Eh(b)}function Fh(a){return 5===a.tag||3===a.tag||4===a.tag}function Gh(a){a:{for(var b=a.return;null!==
b;){if(Fh(b)){var c=b;break a}b=b.return}throw Error(k(160));}b=c.stateNode;switch(c.tag){case 5:var d=!1;break;case 3:b=b.containerInfo;d=!0;break;case 4:b=b.containerInfo;d=!0;break;default:throw Error(k(161));}c.effectTag&16&&(Wb(b,""),c.effectTag&=-17);a:b:for(c=a;;){for(;null===c.sibling;){if(null===c.return||Fh(c.return)){c=null;break a}c=c.return}c.sibling.return=c.return;for(c=c.sibling;5!==c.tag&&6!==c.tag&&18!==c.tag;){if(c.effectTag&2)continue b;if(null===c.child||4===c.tag)continue b;
else c.child.return=c,c=c.child}if(!(c.effectTag&2)){c=c.stateNode;break a}}d?Oe(a,c,b):Pe(a,c,b)}function Oe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?8===c.nodeType?c.parentNode.insertBefore(a,b):c.insertBefore(a,b):(8===c.nodeType?(b=c.parentNode,b.insertBefore(a,c)):(b=c,b.appendChild(a)),c=c._reactRootContainer,null!==c&&void 0!==c||null!==b.onclick||(b.onclick=uc));else if(4!==d&&(a=a.child,null!==a))for(Oe(a,b,c),a=a.sibling;null!==a;)Oe(a,b,c),a=a.sibling}
function Pe(a,b,c){var d=a.tag,e=5===d||6===d;if(e)a=e?a.stateNode:a.stateNode.instance,b?c.insertBefore(a,b):c.appendChild(a);else if(4!==d&&(a=a.child,null!==a))for(Pe(a,b,c),a=a.sibling;null!==a;)Pe(a,b,c),a=a.sibling}function Dh(a,b,c){for(var d=b,e=!1,f,g;;){if(!e){e=d.return;a:for(;;){if(null===e)throw Error(k(160));f=e.stateNode;switch(e.tag){case 5:g=!1;break a;case 3:f=f.containerInfo;g=!0;break a;case 4:f=f.containerInfo;g=!0;break a}e=e.return}e=!0}if(5===d.tag||6===d.tag){a:for(var h=
a,m=d,n=c,l=m;;)if(Ch(h,l,n),null!==l.child&&4!==l.tag)l.child.return=l,l=l.child;else{if(l===m)break a;for(;null===l.sibling;){if(null===l.return||l.return===m)break a;l=l.return}l.sibling.return=l.return;l=l.sibling}g?(h=f,m=d.stateNode,8===h.nodeType?h.parentNode.removeChild(m):h.removeChild(m)):f.removeChild(d.stateNode)}else if(4===d.tag){if(null!==d.child){f=d.stateNode.containerInfo;g=!0;d.child.return=d;d=d.child;continue}}else if(Ch(a,d,c),null!==d.child){d.child.return=d;d=d.child;continue}if(d===
b)break;for(;null===d.sibling;){if(null===d.return||d.return===b)return;d=d.return;4===d.tag&&(e=!1)}d.sibling.return=d.return;d=d.sibling}}function Qe(a,b){switch(b.tag){case 0:case 11:case 14:case 15:case 22:Ah(3,b);return;case 1:return;case 5:var c=b.stateNode;if(null!=c){var d=b.memoizedProps,e=null!==a?a.memoizedProps:d;a=b.type;var f=b.updateQueue;b.updateQueue=null;if(null!==f){c[vc]=d;"input"===a&&"radio"===d.type&&null!=d.name&&If(c,d);Vd(a,e);b=Vd(a,d);for(e=0;e<f.length;e+=2){var g=f[e],
h=f[e+1];"style"===g?gg(c,h):"dangerouslySetInnerHTML"===g?xh(c,h):"children"===g?Wb(c,h):xd(c,g,h,b)}switch(a){case "input":Dd(c,d);break;case "textarea":Lf(c,d);break;case "select":b=c._wrapperState.wasMultiple,c._wrapperState.wasMultiple=!!d.multiple,a=d.value,null!=a?hb(c,!!d.multiple,a,!1):b!==!!d.multiple&&(null!=d.defaultValue?hb(c,!!d.multiple,d.defaultValue,!0):hb(c,!!d.multiple,d.multiple?[]:"",!1))}}}return;case 6:if(null===b.stateNode)throw Error(k(162));b.stateNode.nodeValue=b.memoizedProps;
return;case 3:b=b.stateNode;b.hydrate&&(b.hydrate=!1,bg(b.containerInfo));return;case 12:return;case 13:c=b;null===b.memoizedState?d=!1:(d=!0,c=b.child,Re=Y());if(null!==c)a:for(a=c;;){if(5===a.tag)f=a.stateNode,d?(f=f.style,"function"===typeof f.setProperty?f.setProperty("display","none","important"):f.display="none"):(f=a.stateNode,e=a.memoizedProps.style,e=void 0!==e&&null!==e&&e.hasOwnProperty("display")?e.display:null,f.style.display=fg("display",e));else if(6===a.tag)a.stateNode.nodeValue=d?
"":a.memoizedProps;else if(13===a.tag&&null!==a.memoizedState&&null===a.memoizedState.dehydrated){f=a.child.sibling;f.return=a;a=f;continue}else if(null!==a.child){a.child.return=a;a=a.child;continue}if(a===c)break;for(;null===a.sibling;){if(null===a.return||a.return===c)break a;a=a.return}a.sibling.return=a.return;a=a.sibling}Hh(b);return;case 19:Hh(b);return;case 17:return}throw Error(k(163));}function Hh(a){var b=a.updateQueue;if(null!==b){a.updateQueue=null;var c=a.stateNode;null===c&&(c=a.stateNode=
new pj);b.forEach(function(b){var d=qj.bind(null,a,b);c.has(b)||(c.add(b),b.then(d,d))})}}function Ih(a,b,c){c=Ea(c,null);c.tag=3;c.payload={element:null};var d=b.value;c.callback=function(){cd||(cd=!0,Se=d);Me(a,b)};return c}function Jh(a,b,c){c=Ea(c,null);c.tag=3;var d=a.type.getDerivedStateFromError;if("function"===typeof d){var e=b.value;c.payload=function(){Me(a,b);return d(e)}}var f=a.stateNode;null!==f&&"function"===typeof f.componentDidCatch&&(c.callback=function(){"function"!==typeof d&&
(null===La?La=new Set([this]):La.add(this),Me(a,b));var c=b.stack;this.componentDidCatch(b.value,{componentStack:null!==c?c:""})});return c}function ka(){return(p&(ca|ma))!==H?1073741821-(Y()/10|0):0!==dd?dd:dd=1073741821-(Y()/10|0)}function Va(a,b,c){b=b.mode;if(0===(b&2))return 1073741823;var d=Cc();if(0===(b&4))return 99===d?1073741823:1073741822;if((p&ca)!==H)return P;if(null!==c)a=Fc(a,c.timeoutMs|0||5E3,250);else switch(d){case 99:a=1073741823;break;case 98:a=Fc(a,150,100);break;case 97:case 96:a=
Fc(a,5E3,250);break;case 95:a=2;break;default:throw Error(k(326));}null!==U&&a===P&&--a;return a}function ed(a,b){a.expirationTime<b&&(a.expirationTime=b);var c=a.alternate;null!==c&&c.expirationTime<b&&(c.expirationTime=b);var d=a.return,e=null;if(null===d&&3===a.tag)e=a.stateNode;else for(;null!==d;){c=d.alternate;d.childExpirationTime<b&&(d.childExpirationTime=b);null!==c&&c.childExpirationTime<b&&(c.childExpirationTime=b);if(null===d.return&&3===d.tag){e=d.stateNode;break}d=d.return}null!==e&&
(U===e&&(Kc(b),F===bd&&Ya(e,P)),yh(e,b));return e}function fd(a){var b=a.lastExpiredTime;if(0!==b)return b;b=a.firstPendingTime;if(!Kh(a,b))return b;var c=a.lastPingedTime;a=a.nextKnownPendingLevel;a=c>a?c:a;return 2>=a&&b!==a?0:a}function V(a){if(0!==a.lastExpiredTime)a.callbackExpirationTime=1073741823,a.callbackPriority=99,a.callbackNode=Og(Te.bind(null,a));else{var b=fd(a),c=a.callbackNode;if(0===b)null!==c&&(a.callbackNode=null,a.callbackExpirationTime=0,a.callbackPriority=90);else{var d=ka();
1073741823===b?d=99:1===b||2===b?d=95:(d=10*(1073741821-b)-10*(1073741821-d),d=0>=d?99:250>=d?98:5250>=d?97:95);if(null!==c){var e=a.callbackPriority;if(a.callbackExpirationTime===b&&e>=d)return;c!==Qg&&Rg(c)}a.callbackExpirationTime=b;a.callbackPriority=d;b=1073741823===b?Og(Te.bind(null,a)):Ng(d,Lh.bind(null,a),{timeout:10*(1073741821-b)-Y()});a.callbackNode=b}}}function Lh(a,b){dd=0;if(b)return b=ka(),Ue(a,b),V(a),null;var c=fd(a);if(0!==c){b=a.callbackNode;if((p&(ca|ma))!==H)throw Error(k(327));
xb();a===U&&c===P||$a(a,c);if(null!==t){var d=p;p|=ca;var e=Mh();do try{rj();break}catch(h){Nh(a,h)}while(1);le();p=d;gd.current=e;if(F===hd)throw b=id,$a(a,c),Ya(a,c),V(a),b;if(null===t)switch(e=a.finishedWork=a.current.alternate,a.finishedExpirationTime=c,d=F,U=null,d){case Xa:case hd:throw Error(k(345));case Oh:Ue(a,2<c?2:c);break;case ad:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(1073741823===ta&&(e=Re+Ph-Y(),10<e)){if(jd){var f=a.lastPingedTime;if(0===f||f>=c){a.lastPingedTime=
c;$a(a,c);break}}f=fd(a);if(0!==f&&f!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}a.timeoutHandle=We(ab.bind(null,a),e);break}ab(a);break;case bd:Ya(a,c);d=a.lastSuspendedTime;c===d&&(a.nextKnownPendingLevel=Ve(e));if(jd&&(e=a.lastPingedTime,0===e||e>=c)){a.lastPingedTime=c;$a(a,c);break}e=fd(a);if(0!==e&&e!==c)break;if(0!==d&&d!==c){a.lastPingedTime=d;break}1073741823!==Yb?d=10*(1073741821-Yb)-Y():1073741823===ta?d=0:(d=10*(1073741821-ta)-5E3,e=Y(),c=10*(1073741821-c)-e,d=e-d,0>d&&(d=0),d=
(120>d?120:480>d?480:1080>d?1080:1920>d?1920:3E3>d?3E3:4320>d?4320:1960*sj(d/1960))-d,c<d&&(d=c));if(10<d){a.timeoutHandle=We(ab.bind(null,a),d);break}ab(a);break;case Xe:if(1073741823!==ta&&null!==kd){f=ta;var g=kd;d=g.busyMinDurationMs|0;0>=d?d=0:(e=g.busyDelayMs|0,f=Y()-(10*(1073741821-f)-(g.timeoutMs|0||5E3)),d=f<=e?0:e+d-f);if(10<d){Ya(a,c);a.timeoutHandle=We(ab.bind(null,a),d);break}}ab(a);break;default:throw Error(k(329));}V(a);if(a.callbackNode===b)return Lh.bind(null,a)}}return null}function Te(a){var b=
a.lastExpiredTime;b=0!==b?b:1073741823;if((p&(ca|ma))!==H)throw Error(k(327));xb();a===U&&b===P||$a(a,b);if(null!==t){var c=p;p|=ca;var d=Mh();do try{tj();break}catch(e){Nh(a,e)}while(1);le();p=c;gd.current=d;if(F===hd)throw c=id,$a(a,b),Ya(a,b),V(a),c;if(null!==t)throw Error(k(261));a.finishedWork=a.current.alternate;a.finishedExpirationTime=b;U=null;ab(a);V(a)}return null}function uj(){if(null!==bb){var a=bb;bb=null;a.forEach(function(a,c){Ue(c,a);V(c)});ha()}}function Qh(a,b){var c=p;p|=1;try{return a(b)}finally{p=
c,p===H&&ha()}}function Rh(a,b){var c=p;p&=-2;p|=Ye;try{return a(b)}finally{p=c,p===H&&ha()}}function $a(a,b){a.finishedWork=null;a.finishedExpirationTime=0;var c=a.timeoutHandle;-1!==c&&(a.timeoutHandle=-1,vj(c));if(null!==t)for(c=t.return;null!==c;){var d=c;switch(d.tag){case 1:d=d.type.childContextTypes;null!==d&&void 0!==d&&(q(G),q(B));break;case 3:tb();q(G);q(B);break;case 5:te(d);break;case 4:tb();break;case 13:q(D);break;case 19:q(D);break;case 10:me(d)}c=c.return}U=a;t=Sa(a.current,null);
P=b;F=Xa;id=null;Yb=ta=1073741823;kd=null;Xb=0;jd=!1}function Nh(a,b){do{try{le();Sc.current=Tc;if(Uc)for(var c=z.memoizedState;null!==c;){var d=c.queue;null!==d&&(d.pending=null);c=c.next}Ia=0;J=K=z=null;Uc=!1;if(null===t||null===t.return)return F=hd,id=b,t=null;a:{var e=a,f=t.return,g=t,h=b;b=P;g.effectTag|=2048;g.firstEffect=g.lastEffect=null;if(null!==h&&"object"===typeof h&&"function"===typeof h.then){var m=h;if(0===(g.mode&2)){var n=g.alternate;n?(g.updateQueue=n.updateQueue,g.memoizedState=
n.memoizedState,g.expirationTime=n.expirationTime):(g.updateQueue=null,g.memoizedState=null)}var l=0!==(D.current&1),k=f;do{var p;if(p=13===k.tag){var q=k.memoizedState;if(null!==q)p=null!==q.dehydrated?!0:!1;else{var w=k.memoizedProps;p=void 0===w.fallback?!1:!0!==w.unstable_avoidThisFallback?!0:l?!1:!0}}if(p){var y=k.updateQueue;if(null===y){var r=new Set;r.add(m);k.updateQueue=r}else y.add(m);if(0===(k.mode&2)){k.effectTag|=64;g.effectTag&=-2981;if(1===g.tag)if(null===g.alternate)g.tag=17;else{var O=
Ea(1073741823,null);O.tag=Jc;Fa(g,O)}g.expirationTime=1073741823;break a}h=void 0;g=b;var v=e.pingCache;null===v?(v=e.pingCache=new wj,h=new Set,v.set(m,h)):(h=v.get(m),void 0===h&&(h=new Set,v.set(m,h)));if(!h.has(g)){h.add(g);var x=xj.bind(null,e,m,g);m.then(x,x)}k.effectTag|=4096;k.expirationTime=b;break a}k=k.return}while(null!==k);h=Error((na(g.type)||"A React component")+" suspended while rendering, but no fallback UI was specified.\n\nAdd a <Suspense fallback=...> component higher in the tree to provide a loading indicator or placeholder to display."+
Bd(g))}F!==Xe&&(F=Oh);h=Le(h,g);k=f;do{switch(k.tag){case 3:m=h;k.effectTag|=4096;k.expirationTime=b;var A=Ih(k,m,b);Ug(k,A);break a;case 1:m=h;var u=k.type,B=k.stateNode;if(0===(k.effectTag&64)&&("function"===typeof u.getDerivedStateFromError||null!==B&&"function"===typeof B.componentDidCatch&&(null===La||!La.has(B)))){k.effectTag|=4096;k.expirationTime=b;var H=Jh(k,m,b);Ug(k,H);break a}}k=k.return}while(null!==k)}t=Sh(t)}catch(cj){b=cj;continue}break}while(1)}function Mh(a){a=gd.current;gd.current=
Tc;return null===a?Tc:a}function Vg(a,b){a<ta&&2<a&&(ta=a);null!==b&&a<Yb&&2<a&&(Yb=a,kd=b)}function Kc(a){a>Xb&&(Xb=a)}function tj(){for(;null!==t;)t=Th(t)}function rj(){for(;null!==t&&!yj();)t=Th(t)}function Th(a){var b=zj(a.alternate,a,P);a.memoizedProps=a.pendingProps;null===b&&(b=Sh(a));Uh.current=null;return b}function Sh(a){t=a;do{var b=t.alternate;a=t.return;if(0===(t.effectTag&2048)){b=hj(b,t,P);if(1===P||1!==t.childExpirationTime){for(var c=0,d=t.child;null!==d;){var e=d.expirationTime,
f=d.childExpirationTime;e>c&&(c=e);f>c&&(c=f);d=d.sibling}t.childExpirationTime=c}if(null!==b)return b;null!==a&&0===(a.effectTag&2048)&&(null===a.firstEffect&&(a.firstEffect=t.firstEffect),null!==t.lastEffect&&(null!==a.lastEffect&&(a.lastEffect.nextEffect=t.firstEffect),a.lastEffect=t.lastEffect),1<t.effectTag&&(null!==a.lastEffect?a.lastEffect.nextEffect=t:a.firstEffect=t,a.lastEffect=t))}else{b=lj(t);if(null!==b)return b.effectTag&=2047,b;null!==a&&(a.firstEffect=a.lastEffect=null,a.effectTag|=
2048)}b=t.sibling;if(null!==b)return b;t=a}while(null!==t);F===Xa&&(F=Xe);return null}function Ve(a){var b=a.expirationTime;a=a.childExpirationTime;return b>a?b:a}function ab(a){var b=Cc();Da(99,Aj.bind(null,a,b));return null}function Aj(a,b){do xb();while(null!==Zb);if((p&(ca|ma))!==H)throw Error(k(327));var c=a.finishedWork,d=a.finishedExpirationTime;if(null===c)return null;a.finishedWork=null;a.finishedExpirationTime=0;if(c===a.current)throw Error(k(177));a.callbackNode=null;a.callbackExpirationTime=
0;a.callbackPriority=90;a.nextKnownPendingLevel=0;var e=Ve(c);a.firstPendingTime=e;d<=a.lastSuspendedTime?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:d<=a.firstSuspendedTime&&(a.firstSuspendedTime=d-1);d<=a.lastPingedTime&&(a.lastPingedTime=0);d<=a.lastExpiredTime&&(a.lastExpiredTime=0);a===U&&(t=U=null,P=0);1<c.effectTag?null!==c.lastEffect?(c.lastEffect.nextEffect=c,e=c.firstEffect):e=c:e=c.firstEffect;if(null!==e){var f=p;p|=ma;Uh.current=null;Ze=tc;var g=kg();if(Xd(g)){if("selectionStart"in
g)var h={start:g.selectionStart,end:g.selectionEnd};else a:{h=(h=g.ownerDocument)&&h.defaultView||window;var m=h.getSelection&&h.getSelection();if(m&&0!==m.rangeCount){h=m.anchorNode;var n=m.anchorOffset,q=m.focusNode;m=m.focusOffset;try{h.nodeType,q.nodeType}catch(sb){h=null;break a}var ba=0,w=-1,y=-1,B=0,D=0,r=g,z=null;b:for(;;){for(var v;;){r!==h||0!==n&&3!==r.nodeType||(w=ba+n);r!==q||0!==m&&3!==r.nodeType||(y=ba+m);3===r.nodeType&&(ba+=r.nodeValue.length);if(null===(v=r.firstChild))break;z=r;
r=v}for(;;){if(r===g)break b;z===h&&++B===n&&(w=ba);z===q&&++D===m&&(y=ba);if(null!==(v=r.nextSibling))break;r=z;z=r.parentNode}r=v}h=-1===w||-1===y?null:{start:w,end:y}}else h=null}h=h||{start:0,end:0}}else h=null;$e={activeElementDetached:null,focusedElem:g,selectionRange:h};tc=!1;l=e;do try{Bj()}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=e;do try{for(g=a,h=b;null!==l;){var x=l.effectTag;x&16&&Wb(l.stateNode,"");if(x&128){var A=l.alternate;if(null!==A){var u=
A.ref;null!==u&&("function"===typeof u?u(null):u.current=null)}}switch(x&1038){case 2:Gh(l);l.effectTag&=-3;break;case 6:Gh(l);l.effectTag&=-3;Qe(l.alternate,l);break;case 1024:l.effectTag&=-1025;break;case 1028:l.effectTag&=-1025;Qe(l.alternate,l);break;case 4:Qe(l.alternate,l);break;case 8:n=l,Dh(g,n,h),Eh(n)}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);u=$e;A=kg();x=u.focusedElem;h=u.selectionRange;if(A!==x&&x&&x.ownerDocument&&jg(x.ownerDocument.documentElement,
x)){null!==h&&Xd(x)&&(A=h.start,u=h.end,void 0===u&&(u=A),"selectionStart"in x?(x.selectionStart=A,x.selectionEnd=Math.min(u,x.value.length)):(u=(A=x.ownerDocument||document)&&A.defaultView||window,u.getSelection&&(u=u.getSelection(),n=x.textContent.length,g=Math.min(h.start,n),h=void 0===h.end?g:Math.min(h.end,n),!u.extend&&g>h&&(n=h,h=g,g=n),n=ig(x,g),q=ig(x,h),n&&q&&(1!==u.rangeCount||u.anchorNode!==n.node||u.anchorOffset!==n.offset||u.focusNode!==q.node||u.focusOffset!==q.offset)&&(A=A.createRange(),
A.setStart(n.node,n.offset),u.removeAllRanges(),g>h?(u.addRange(A),u.extend(q.node,q.offset)):(A.setEnd(q.node,q.offset),u.addRange(A))))));A=[];for(u=x;u=u.parentNode;)1===u.nodeType&&A.push({element:u,left:u.scrollLeft,top:u.scrollTop});"function"===typeof x.focus&&x.focus();for(x=0;x<A.length;x++)u=A[x],u.element.scrollLeft=u.left,u.element.scrollTop=u.top}tc=!!Ze;$e=Ze=null;a.current=c;l=e;do try{for(x=a;null!==l;){var F=l.effectTag;F&36&&oj(x,l.alternate,l);if(F&128){A=void 0;var E=l.ref;if(null!==
E){var G=l.stateNode;switch(l.tag){case 5:A=G;break;default:A=G}"function"===typeof E?E(A):E.current=A}}l=l.nextEffect}}catch(sb){if(null===l)throw Error(k(330));Za(l,sb);l=l.nextEffect}while(null!==l);l=null;Cj();p=f}else a.current=c;if(ld)ld=!1,Zb=a,$b=b;else for(l=e;null!==l;)b=l.nextEffect,l.nextEffect=null,l=b;b=a.firstPendingTime;0===b&&(La=null);1073741823===b?a===af?ac++:(ac=0,af=a):ac=0;"function"===typeof bf&&bf(c.stateNode,d);V(a);if(cd)throw cd=!1,a=Se,Se=null,a;if((p&Ye)!==H)return null;
ha();return null}function Bj(){for(;null!==l;){var a=l.effectTag;0!==(a&256)&&nj(l.alternate,l);0===(a&512)||ld||(ld=!0,Ng(97,function(){xb();return null}));l=l.nextEffect}}function xb(){if(90!==$b){var a=97<$b?97:$b;$b=90;return Da(a,Dj)}}function Dj(){if(null===Zb)return!1;var a=Zb;Zb=null;if((p&(ca|ma))!==H)throw Error(k(331));var b=p;p|=ma;for(a=a.current.firstEffect;null!==a;){try{var c=a;if(0!==(c.effectTag&512))switch(c.tag){case 0:case 11:case 15:case 22:Ah(5,c),Bh(5,c)}}catch(d){if(null===
a)throw Error(k(330));Za(a,d)}c=a.nextEffect;a.nextEffect=null;a=c}p=b;ha();return!0}function Vh(a,b,c){b=Le(c,b);b=Ih(a,b,1073741823);Fa(a,b);a=ed(a,1073741823);null!==a&&V(a)}function Za(a,b){if(3===a.tag)Vh(a,a,b);else for(var c=a.return;null!==c;){if(3===c.tag){Vh(c,a,b);break}else if(1===c.tag){var d=c.stateNode;if("function"===typeof c.type.getDerivedStateFromError||"function"===typeof d.componentDidCatch&&(null===La||!La.has(d))){a=Le(b,a);a=Jh(c,a,1073741823);Fa(c,a);c=ed(c,1073741823);null!==
c&&V(c);break}}c=c.return}}function xj(a,b,c){var d=a.pingCache;null!==d&&d.delete(b);U===a&&P===c?F===bd||F===ad&&1073741823===ta&&Y()-Re<Ph?$a(a,P):jd=!0:Kh(a,c)&&(b=a.lastPingedTime,0!==b&&b<c||(a.lastPingedTime=c,V(a)))}function qj(a,b){var c=a.stateNode;null!==c&&c.delete(b);b=0;0===b&&(b=ka(),b=Va(b,a,null));a=ed(a,b);null!==a&&V(a)}function Ej(a){if("undefined"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__)return!1;var b=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(b.isDisabled||!b.supportsFiber)return!0;try{var c=
b.inject(a);bf=function(a,e){try{b.onCommitFiberRoot(c,a,void 0,64===(a.current.effectTag&64))}catch(f){}};Ne=function(a){try{b.onCommitFiberUnmount(c,a)}catch(e){}}}catch(d){}return!0}function Fj(a,b,c,d){this.tag=a;this.key=c;this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null;this.index=0;this.ref=null;this.pendingProps=b;this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null;this.mode=d;this.effectTag=0;this.lastEffect=this.firstEffect=this.nextEffect=
null;this.childExpirationTime=this.expirationTime=0;this.alternate=null}function Ge(a){a=a.prototype;return!(!a||!a.isReactComponent)}function Gj(a){if("function"===typeof a)return Ge(a)?1:0;if(void 0!==a&&null!==a){a=a.$$typeof;if(a===zd)return 11;if(a===Ad)return 14}return 2}function Sa(a,b){var c=a.alternate;null===c?(c=la(a.tag,b,a.key,a.mode),c.elementType=a.elementType,c.type=a.type,c.stateNode=a.stateNode,c.alternate=a,a.alternate=c):(c.pendingProps=b,c.effectTag=0,c.nextEffect=null,c.firstEffect=
null,c.lastEffect=null);c.childExpirationTime=a.childExpirationTime;c.expirationTime=a.expirationTime;c.child=a.child;c.memoizedProps=a.memoizedProps;c.memoizedState=a.memoizedState;c.updateQueue=a.updateQueue;b=a.dependencies;c.dependencies=null===b?null:{expirationTime:b.expirationTime,firstContext:b.firstContext,responders:b.responders};c.sibling=a.sibling;c.index=a.index;c.ref=a.ref;return c}function Oc(a,b,c,d,e,f){var g=2;d=a;if("function"===typeof a)Ge(a)&&(g=1);else if("string"===typeof a)g=
5;else a:switch(a){case Ma:return Ha(c.children,e,f,b);case Hj:g=8;e|=7;break;case Af:g=8;e|=1;break;case kc:return a=la(12,c,b,e|8),a.elementType=kc,a.type=kc,a.expirationTime=f,a;case lc:return a=la(13,c,b,e),a.type=lc,a.elementType=lc,a.expirationTime=f,a;case yd:return a=la(19,c,b,e),a.elementType=yd,a.expirationTime=f,a;default:if("object"===typeof a&&null!==a)switch(a.$$typeof){case Cf:g=10;break a;case Bf:g=9;break a;case zd:g=11;break a;case Ad:g=14;break a;case Ef:g=16;d=null;break a;case Df:g=
22;break a}throw Error(k(130,null==a?a:typeof a,""));}b=la(g,c,b,e);b.elementType=a;b.type=d;b.expirationTime=f;return b}function Ha(a,b,c,d){a=la(7,a,d,b);a.expirationTime=c;return a}function qe(a,b,c){a=la(6,a,null,b);a.expirationTime=c;return a}function re(a,b,c){b=la(4,null!==a.children?a.children:[],a.key,b);b.expirationTime=c;b.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation};return b}function Ij(a,b,c){this.tag=b;this.current=null;this.containerInfo=
a;this.pingCache=this.pendingChildren=null;this.finishedExpirationTime=0;this.finishedWork=null;this.timeoutHandle=-1;this.pendingContext=this.context=null;this.hydrate=c;this.callbackNode=null;this.callbackPriority=90;this.lastExpiredTime=this.lastPingedTime=this.nextKnownPendingLevel=this.lastSuspendedTime=this.firstSuspendedTime=this.firstPendingTime=0}function Kh(a,b){var c=a.firstSuspendedTime;a=a.lastSuspendedTime;return 0!==c&&c>=b&&a<=b}function Ya(a,b){var c=a.firstSuspendedTime,d=a.lastSuspendedTime;
c<b&&(a.firstSuspendedTime=b);if(d>b||0===c)a.lastSuspendedTime=b;b<=a.lastPingedTime&&(a.lastPingedTime=0);b<=a.lastExpiredTime&&(a.lastExpiredTime=0)}function yh(a,b){b>a.firstPendingTime&&(a.firstPendingTime=b);var c=a.firstSuspendedTime;0!==c&&(b>=c?a.firstSuspendedTime=a.lastSuspendedTime=a.nextKnownPendingLevel=0:b>=a.lastSuspendedTime&&(a.lastSuspendedTime=b+1),b>a.nextKnownPendingLevel&&(a.nextKnownPendingLevel=b))}function Ue(a,b){var c=a.lastExpiredTime;if(0===c||c>b)a.lastExpiredTime=b}
function md(a,b,c,d){var e=b.current,f=ka(),g=Vb.suspense;f=Va(f,e,g);a:if(c){c=c._reactInternalFiber;b:{if(Na(c)!==c||1!==c.tag)throw Error(k(170));var h=c;do{switch(h.tag){case 3:h=h.stateNode.context;break b;case 1:if(N(h.type)){h=h.stateNode.__reactInternalMemoizedMergedChildContext;break b}}h=h.return}while(null!==h);throw Error(k(171));}if(1===c.tag){var m=c.type;if(N(m)){c=Gg(c,m,h);break a}}c=h}else c=Ca;null===b.context?b.context=c:b.pendingContext=c;b=Ea(f,g);b.payload={element:a};d=void 0===
d?null:d;null!==d&&(b.callback=d);Fa(e,b);Ja(e,f);return f}function cf(a){a=a.current;if(!a.child)return null;switch(a.child.tag){case 5:return a.child.stateNode;default:return a.child.stateNode}}function Wh(a,b){a=a.memoizedState;null!==a&&null!==a.dehydrated&&a.retryTime<b&&(a.retryTime=b)}function df(a,b){Wh(a,b);(a=a.alternate)&&Wh(a,b)}function ef(a,b,c){c=null!=c&&!0===c.hydrate;var d=new Ij(a,b,c),e=la(3,null,null,2===b?7:1===b?3:0);d.current=e;e.stateNode=d;ne(e);a[Lb]=d.current;c&&0!==b&&
xi(a,9===a.nodeType?a:a.ownerDocument);this._internalRoot=d}function bc(a){return!(!a||1!==a.nodeType&&9!==a.nodeType&&11!==a.nodeType&&(8!==a.nodeType||" react-mount-point-unstable "!==a.nodeValue))}function Jj(a,b){b||(b=a?9===a.nodeType?a.documentElement:a.firstChild:null,b=!(!b||1!==b.nodeType||!b.hasAttribute("data-reactroot")));if(!b)for(var c;c=a.lastChild;)a.removeChild(c);return new ef(a,0,b?{hydrate:!0}:void 0)}function nd(a,b,c,d,e){var f=c._reactRootContainer;if(f){var g=f._internalRoot;
if("function"===typeof e){var h=e;e=function(){var a=cf(g);h.call(a)}}md(b,g,a,e)}else{f=c._reactRootContainer=Jj(c,d);g=f._internalRoot;if("function"===typeof e){var m=e;e=function(){var a=cf(g);m.call(a)}}Rh(function(){md(b,g,a,e)})}return cf(g)}function Kj(a,b,c){var d=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:gb,key:null==d?null:""+d,children:a,containerInfo:b,implementation:c}}function Xh(a,b){var c=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;
if(!bc(b))throw Error(k(200));return Kj(a,b,null,c)}if(!ea)throw Error(k(227));var ki=function(a,b,c,d,e,f,g,h,m){var n=Array.prototype.slice.call(arguments,3);try{b.apply(c,n)}catch(C){this.onError(C)}},yb=!1,gc=null,hc=!1,pd=null,li={onError:function(a){yb=!0;gc=a}},td=null,rf=null,mf=null,ic=null,cb={},jc=[],qd={},db={},rd={},wa=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),M=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.assign,
sd=null,eb=null,fb=null,ee=function(a,b){return a(b)},eg=function(a,b,c,d,e){return a(b,c,d,e)},vd=function(){},vf=ee,Oa=!1,wd=!1,Z=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.Scheduler,Lj=Z.unstable_cancelCallback,ff=Z.unstable_now,$f=Z.unstable_scheduleCallback,Mj=Z.unstable_shouldYield,Yh=Z.unstable_requestPaint,Pd=Z.unstable_runWithPriority,Nj=Z.unstable_getCurrentPriorityLevel,Oj=Z.unstable_ImmediatePriority,Zh=Z.unstable_UserBlockingPriority,ag=Z.unstable_NormalPriority,Pj=Z.unstable_LowPriority,
Qj=Z.unstable_IdlePriority,oi=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,wf=Object.prototype.hasOwnProperty,yf={},xf={},E={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(a){E[a]=
new L(a,0,!1,a,null,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(a){var b=a[0];E[b]=new L(b,1,!1,a[1],null,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(a){E[a]=new L(a,2,!1,a.toLowerCase(),null,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(a){E[a]=new L(a,2,!1,a,null,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(a){E[a]=
new L(a,3,!1,a.toLowerCase(),null,!1)});["checked","multiple","muted","selected"].forEach(function(a){E[a]=new L(a,3,!0,a,null,!1)});["capture","download"].forEach(function(a){E[a]=new L(a,4,!1,a,null,!1)});["cols","rows","size","span"].forEach(function(a){E[a]=new L(a,6,!1,a,null,!1)});["rowSpan","start"].forEach(function(a){E[a]=new L(a,5,!1,a.toLowerCase(),null,!1)});var gf=/[\-:]([a-z])/g,hf=function(a){return a[1].toUpperCase()};"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(a){var b=
a.replace(gf,hf);E[b]=new L(b,1,!1,a,null,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/1999/xlink",!1)});["xml:base","xml:lang","xml:space"].forEach(function(a){var b=a.replace(gf,hf);E[b]=new L(b,1,!1,a,"http://www.w3.org/XML/1998/namespace",!1)});["tabIndex","crossOrigin"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!1)});E.xlinkHref=new L("xlinkHref",1,
!1,"xlink:href","http://www.w3.org/1999/xlink",!0);["src","href","action","formAction"].forEach(function(a){E[a]=new L(a,1,!1,a.toLowerCase(),null,!0)});var da=ea.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;da.hasOwnProperty("ReactCurrentDispatcher")||(da.ReactCurrentDispatcher={current:null});da.hasOwnProperty("ReactCurrentBatchConfig")||(da.ReactCurrentBatchConfig={suspense:null});var si=/^(.*)[\\\/]/,Q="function"===typeof Symbol&&Symbol.for,Pc=Q?Symbol.for("react.element"):60103,gb=Q?Symbol.for("react.portal"):
60106,Ma=Q?Symbol.for("react.fragment"):60107,Af=Q?Symbol.for("react.strict_mode"):60108,kc=Q?Symbol.for("react.profiler"):60114,Cf=Q?Symbol.for("react.provider"):60109,Bf=Q?Symbol.for("react.context"):60110,Hj=Q?Symbol.for("react.concurrent_mode"):60111,zd=Q?Symbol.for("react.forward_ref"):60112,lc=Q?Symbol.for("react.suspense"):60113,yd=Q?Symbol.for("react.suspense_list"):60120,Ad=Q?Symbol.for("react.memo"):60115,Ef=Q?Symbol.for("react.lazy"):60116,Df=Q?Symbol.for("react.block"):60121,zf="function"===
typeof Symbol&&Symbol.iterator,od,xh=function(a){return"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(b,c,d,e){MSApp.execUnsafeLocalFunction(function(){return a(b,c,d,e)})}:a}(function(a,b){if("http://www.w3.org/2000/svg"!==a.namespaceURI||"innerHTML"in a)a.innerHTML=b;else{od=od||document.createElement("div");od.innerHTML="<svg>"+b.valueOf().toString()+"</svg>";for(b=od.firstChild;a.firstChild;)a.removeChild(a.firstChild);for(;b.firstChild;)a.appendChild(b.firstChild)}}),Wb=function(a,
b){if(b){var c=a.firstChild;if(c&&c===a.lastChild&&3===c.nodeType){c.nodeValue=b;return}}a.textContent=b},ib={animationend:nc("Animation","AnimationEnd"),animationiteration:nc("Animation","AnimationIteration"),animationstart:nc("Animation","AnimationStart"),transitionend:nc("Transition","TransitionEnd")},Id={},Of={};wa&&(Of=document.createElement("div").style,"AnimationEvent"in window||(delete ib.animationend.animation,delete ib.animationiteration.animation,delete ib.animationstart.animation),"TransitionEvent"in
window||delete ib.transitionend.transition);var $h=oc("animationend"),ai=oc("animationiteration"),bi=oc("animationstart"),ci=oc("transitionend"),Db="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Pf=new ("function"===typeof WeakMap?WeakMap:Map),Ab=null,wi=function(a){if(a){var b=a._dispatchListeners,c=a._dispatchInstances;
if(Array.isArray(b))for(var d=0;d<b.length&&!a.isPropagationStopped();d++)lf(a,b[d],c[d]);else b&&lf(a,b,c);a._dispatchListeners=null;a._dispatchInstances=null;a.isPersistent()||a.constructor.release(a)}},qc=[],Rd=!1,fa=[],xa=null,ya=null,za=null,Eb=new Map,Fb=new Map,Jb=[],Nd="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput close cancel copy cut paste click change contextmenu reset submit".split(" "),
yi="focus blur dragenter dragleave mouseover mouseout pointerover pointerout gotpointercapture lostpointercapture".split(" "),dg={},cg=new Map,Td=new Map,Rj=["abort","abort",$h,"animationEnd",ai,"animationIteration",bi,"animationStart","canplay","canPlay","canplaythrough","canPlayThrough","durationchange","durationChange","emptied","emptied","encrypted","encrypted","ended","ended","error","error","gotpointercapture","gotPointerCapture","load","load","loadeddata","loadedData","loadedmetadata","loadedMetadata",
"loadstart","loadStart","lostpointercapture","lostPointerCapture","playing","playing","progress","progress","seeking","seeking","stalled","stalled","suspend","suspend","timeupdate","timeUpdate",ci,"transitionEnd","waiting","waiting"];Sd("blur blur cancel cancel click click close close contextmenu contextMenu copy copy cut cut auxclick auxClick dblclick doubleClick dragend dragEnd dragstart dragStart drop drop focus focus input input invalid invalid keydown keyDown keypress keyPress keyup keyUp mousedown mouseDown mouseup mouseUp paste paste pause pause play play pointercancel pointerCancel pointerdown pointerDown pointerup pointerUp ratechange rateChange reset reset seeked seeked submit submit touchcancel touchCancel touchend touchEnd touchstart touchStart volumechange volumeChange".split(" "),
0);Sd("drag drag dragenter dragEnter dragexit dragExit dragleave dragLeave dragover dragOver mousemove mouseMove mouseout mouseOut mouseover mouseOver pointermove pointerMove pointerout pointerOut pointerover pointerOver scroll scroll toggle toggle touchmove touchMove wheel wheel".split(" "),1);Sd(Rj,2);(function(a,b){for(var c=0;c<a.length;c++)Td.set(a[c],b)})("change selectionchange textInput compositionstart compositionend compositionupdate".split(" "),0);var Hi=Zh,Gi=Pd,tc=!0,Kb={animationIterationCount:!0,
borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,
strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sj=["Webkit","ms","Moz","O"];Object.keys(Kb).forEach(function(a){Sj.forEach(function(b){b=b+a.charAt(0).toUpperCase()+a.substring(1);Kb[b]=Kb[a]})});var Ii=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0}),ng="$",og="/$",$d="$?",Zd="$!",Ze=null,$e=null,We="function"===typeof setTimeout?setTimeout:void 0,vj="function"===
typeof clearTimeout?clearTimeout:void 0,jf=Math.random().toString(36).slice(2),Aa="__reactInternalInstance$"+jf,vc="__reactEventHandlers$"+jf,Lb="__reactContainere$"+jf,Ba=null,ce=null,wc=null;M(R.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():"unknown"!==typeof a.returnValue&&(a.returnValue=!1),this.isDefaultPrevented=xc)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():"unknown"!==
typeof a.cancelBubble&&(a.cancelBubble=!0),this.isPropagationStopped=xc)},persist:function(){this.isPersistent=xc},isPersistent:yc,destructor:function(){var a=this.constructor.Interface,b;for(b in a)this[b]=null;this.nativeEvent=this._targetInst=this.dispatchConfig=null;this.isPropagationStopped=this.isDefaultPrevented=yc;this._dispatchInstances=this._dispatchListeners=null}});R.Interface={type:null,target:null,currentTarget:function(){return null},eventPhase:null,bubbles:null,cancelable:null,timeStamp:function(a){return a.timeStamp||
Date.now()},defaultPrevented:null,isTrusted:null};R.extend=function(a){function b(){return c.apply(this,arguments)}var c=this,d=function(){};d.prototype=c.prototype;d=new d;M(d,b.prototype);b.prototype=d;b.prototype.constructor=b;b.Interface=M({},c.Interface,a);b.extend=c.extend;sg(b);return b};sg(R);var Tj=R.extend({data:null}),Uj=R.extend({data:null}),Ni=[9,13,27,32],de=wa&&"CompositionEvent"in window,cc=null;wa&&"documentMode"in document&&(cc=document.documentMode);var Vj=wa&&"TextEvent"in window&&
!cc,xg=wa&&(!de||cc&&8<cc&&11>=cc),wg=String.fromCharCode(32),ua={beforeInput:{phasedRegistrationNames:{bubbled:"onBeforeInput",captured:"onBeforeInputCapture"},dependencies:["compositionend","keypress","textInput","paste"]},compositionEnd:{phasedRegistrationNames:{bubbled:"onCompositionEnd",captured:"onCompositionEndCapture"},dependencies:"blur compositionend keydown keypress keyup mousedown".split(" ")},compositionStart:{phasedRegistrationNames:{bubbled:"onCompositionStart",captured:"onCompositionStartCapture"},
dependencies:"blur compositionstart keydown keypress keyup mousedown".split(" ")},compositionUpdate:{phasedRegistrationNames:{bubbled:"onCompositionUpdate",captured:"onCompositionUpdateCapture"},dependencies:"blur compositionupdate keydown keypress keyup mousedown".split(" ")}},vg=!1,mb=!1,Wj={eventTypes:ua,extractEvents:function(a,b,c,d,e){var f;if(de)b:{switch(a){case "compositionstart":var g=ua.compositionStart;break b;case "compositionend":g=ua.compositionEnd;break b;case "compositionupdate":g=
ua.compositionUpdate;break b}g=void 0}else mb?tg(a,c)&&(g=ua.compositionEnd):"keydown"===a&&229===c.keyCode&&(g=ua.compositionStart);g?(xg&&"ko"!==c.locale&&(mb||g!==ua.compositionStart?g===ua.compositionEnd&&mb&&(f=rg()):(Ba=d,ce="value"in Ba?Ba.value:Ba.textContent,mb=!0)),e=Tj.getPooled(g,b,c,d),f?e.data=f:(f=ug(c),null!==f&&(e.data=f)),lb(e),f=e):f=null;(a=Vj?Oi(a,c):Pi(a,c))?(b=Uj.getPooled(ua.beforeInput,b,c,d),b.data=a,lb(b)):b=null;return null===f?b:null===b?f:[f,b]}},Qi={color:!0,date:!0,
datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0},Ag={change:{phasedRegistrationNames:{bubbled:"onChange",captured:"onChangeCapture"},dependencies:"blur change click focus input keydown keyup selectionchange".split(" ")}},Mb=null,Nb=null,kf=!1;wa&&(kf=Tf("input")&&(!document.documentMode||9<document.documentMode));var Xj={eventTypes:Ag,_isInputEventSupported:kf,extractEvents:function(a,b,c,d,e){e=b?Pa(b):window;var f=
e.nodeName&&e.nodeName.toLowerCase();if("select"===f||"input"===f&&"file"===e.type)var g=Si;else if(yg(e))if(kf)g=Wi;else{g=Ui;var h=Ti}else(f=e.nodeName)&&"input"===f.toLowerCase()&&("checkbox"===e.type||"radio"===e.type)&&(g=Vi);if(g&&(g=g(a,b)))return zg(g,c,d);h&&h(a,e,b);"blur"===a&&(a=e._wrapperState)&&a.controlled&&"number"===e.type&&Ed(e,"number",e.value)}},dc=R.extend({view:null,detail:null}),Yi={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"},di=0,ei=0,fi=!1,gi=!1,ec=dc.extend({screenX:null,
screenY:null,clientX:null,clientY:null,pageX:null,pageY:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,getModifierState:fe,button:null,buttons:null,relatedTarget:function(a){return a.relatedTarget||(a.fromElement===a.srcElement?a.toElement:a.fromElement)},movementX:function(a){if("movementX"in a)return a.movementX;var b=di;di=a.screenX;return fi?"mousemove"===a.type?a.screenX-b:0:(fi=!0,0)},movementY:function(a){if("movementY"in a)return a.movementY;var b=ei;ei=a.screenY;return gi?"mousemove"===
a.type?a.screenY-b:0:(gi=!0,0)}}),hi=ec.extend({pointerId:null,width:null,height:null,pressure:null,tangentialPressure:null,tiltX:null,tiltY:null,twist:null,pointerType:null,isPrimary:null}),fc={mouseEnter:{registrationName:"onMouseEnter",dependencies:["mouseout","mouseover"]},mouseLeave:{registrationName:"onMouseLeave",dependencies:["mouseout","mouseover"]},pointerEnter:{registrationName:"onPointerEnter",dependencies:["pointerout","pointerover"]},pointerLeave:{registrationName:"onPointerLeave",dependencies:["pointerout",
"pointerover"]}},Yj={eventTypes:fc,extractEvents:function(a,b,c,d,e){var f="mouseover"===a||"pointerover"===a,g="mouseout"===a||"pointerout"===a;if(f&&0===(e&32)&&(c.relatedTarget||c.fromElement)||!g&&!f)return null;f=d.window===d?d:(f=d.ownerDocument)?f.defaultView||f.parentWindow:window;if(g){if(g=b,b=(b=c.relatedTarget||c.toElement)?Bb(b):null,null!==b){var h=Na(b);if(b!==h||5!==b.tag&&6!==b.tag)b=null}}else g=null;if(g===b)return null;if("mouseout"===a||"mouseover"===a){var m=ec;var n=fc.mouseLeave;
var l=fc.mouseEnter;var k="mouse"}else if("pointerout"===a||"pointerover"===a)m=hi,n=fc.pointerLeave,l=fc.pointerEnter,k="pointer";a=null==g?f:Pa(g);f=null==b?f:Pa(b);n=m.getPooled(n,g,c,d);n.type=k+"leave";n.target=a;n.relatedTarget=f;c=m.getPooled(l,b,c,d);c.type=k+"enter";c.target=f;c.relatedTarget=a;d=g;k=b;if(d&&k)a:{m=d;l=k;g=0;for(a=m;a;a=pa(a))g++;a=0;for(b=l;b;b=pa(b))a++;for(;0<g-a;)m=pa(m),g--;for(;0<a-g;)l=pa(l),a--;for(;g--;){if(m===l||m===l.alternate)break a;m=pa(m);l=pa(l)}m=null}else m=
null;l=m;for(m=[];d&&d!==l;){g=d.alternate;if(null!==g&&g===l)break;m.push(d);d=pa(d)}for(d=[];k&&k!==l;){g=k.alternate;if(null!==g&&g===l)break;d.push(k);k=pa(k)}for(k=0;k<m.length;k++)be(m[k],"bubbled",n);for(k=d.length;0<k--;)be(d[k],"captured",c);return 0===(e&64)?[n]:[n,c]}},Qa="function"===typeof Object.is?Object.is:Zi,$i=Object.prototype.hasOwnProperty,Zj=wa&&"documentMode"in document&&11>=document.documentMode,Eg={select:{phasedRegistrationNames:{bubbled:"onSelect",captured:"onSelectCapture"},
dependencies:"blur contextmenu dragend focus keydown keyup mousedown mouseup selectionchange".split(" ")}},nb=null,he=null,Pb=null,ge=!1,ak={eventTypes:Eg,extractEvents:function(a,b,c,d,e,f){e=f||(d.window===d?d.document:9===d.nodeType?d:d.ownerDocument);if(!(f=!e)){a:{e=Jd(e);f=rd.onSelect;for(var g=0;g<f.length;g++)if(!e.has(f[g])){e=!1;break a}e=!0}f=!e}if(f)return null;e=b?Pa(b):window;switch(a){case "focus":if(yg(e)||"true"===e.contentEditable)nb=e,he=b,Pb=null;break;case "blur":Pb=he=nb=null;
break;case "mousedown":ge=!0;break;case "contextmenu":case "mouseup":case "dragend":return ge=!1,Dg(c,d);case "selectionchange":if(Zj)break;case "keydown":case "keyup":return Dg(c,d)}return null}},bk=R.extend({animationName:null,elapsedTime:null,pseudoElement:null}),ck=R.extend({clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),dk=dc.extend({relatedTarget:null}),ek={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",
Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},fk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",
224:"Meta"},gk=dc.extend({key:function(a){if(a.key){var b=ek[a.key]||a.key;if("Unidentified"!==b)return b}return"keypress"===a.type?(a=Ac(a),13===a?"Enter":String.fromCharCode(a)):"keydown"===a.type||"keyup"===a.type?fk[a.keyCode]||"Unidentified":""},location:null,ctrlKey:null,shiftKey:null,altKey:null,metaKey:null,repeat:null,locale:null,getModifierState:fe,charCode:function(a){return"keypress"===a.type?Ac(a):0},keyCode:function(a){return"keydown"===a.type||"keyup"===a.type?a.keyCode:0},which:function(a){return"keypress"===
a.type?Ac(a):"keydown"===a.type||"keyup"===a.type?a.keyCode:0}}),hk=ec.extend({dataTransfer:null}),ik=dc.extend({touches:null,targetTouches:null,changedTouches:null,altKey:null,metaKey:null,ctrlKey:null,shiftKey:null,getModifierState:fe}),jk=R.extend({propertyName:null,elapsedTime:null,pseudoElement:null}),kk=ec.extend({deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?
-a.wheelDelta:0},deltaZ:null,deltaMode:null}),lk={eventTypes:dg,extractEvents:function(a,b,c,d,e){e=cg.get(a);if(!e)return null;switch(a){case "keypress":if(0===Ac(c))return null;case "keydown":case "keyup":a=gk;break;case "blur":case "focus":a=dk;break;case "click":if(2===c.button)return null;case "auxclick":case "dblclick":case "mousedown":case "mousemove":case "mouseup":case "mouseout":case "mouseover":case "contextmenu":a=ec;break;case "drag":case "dragend":case "dragenter":case "dragexit":case "dragleave":case "dragover":case "dragstart":case "drop":a=
hk;break;case "touchcancel":case "touchend":case "touchmove":case "touchstart":a=ik;break;case $h:case ai:case bi:a=bk;break;case ci:a=jk;break;case "scroll":a=dc;break;case "wheel":a=kk;break;case "copy":case "cut":case "paste":a=ck;break;case "gotpointercapture":case "lostpointercapture":case "pointercancel":case "pointerdown":case "pointermove":case "pointerout":case "pointerover":case "pointerup":a=hi;break;default:a=R}b=a.getPooled(e,b,c,d);lb(b);return b}};(function(a){if(ic)throw Error(k(101));
ic=Array.prototype.slice.call(a);nf()})("ResponderEventPlugin SimpleEventPlugin EnterLeaveEventPlugin ChangeEventPlugin SelectEventPlugin BeforeInputEventPlugin".split(" "));(function(a,b,c){td=a;rf=b;mf=c})(ae,Hb,Pa);pf({SimpleEventPlugin:lk,EnterLeaveEventPlugin:Yj,ChangeEventPlugin:Xj,SelectEventPlugin:ak,BeforeInputEventPlugin:Wj});var ie=[],ob=-1,Ca={},B={current:Ca},G={current:!1},Ra=Ca,bj=Pd,je=$f,Rg=Lj,aj=Nj,Dc=Oj,Ig=Zh,Jg=ag,Kg=Pj,Lg=Qj,Qg={},yj=Mj,Cj=void 0!==Yh?Yh:function(){},qa=null,
Ec=null,ke=!1,ii=ff(),Y=1E4>ii?ff:function(){return ff()-ii},Ic={current:null},Hc=null,qb=null,Gc=null,Tg=0,Jc=2,Ga=!1,Vb=da.ReactCurrentBatchConfig,$g=(new ea.Component).refs,Mc={isMounted:function(a){return(a=a._reactInternalFiber)?Na(a)===a:!1},enqueueSetState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;d=Va(d,a,e);e=Ea(d,e);e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueReplaceState:function(a,b,c){a=a._reactInternalFiber;var d=ka(),e=Vb.suspense;
d=Va(d,a,e);e=Ea(d,e);e.tag=1;e.payload=b;void 0!==c&&null!==c&&(e.callback=c);Fa(a,e);Ja(a,d)},enqueueForceUpdate:function(a,b){a=a._reactInternalFiber;var c=ka(),d=Vb.suspense;c=Va(c,a,d);d=Ea(c,d);d.tag=Jc;void 0!==b&&null!==b&&(d.callback=b);Fa(a,d);Ja(a,c)}},Qc=Array.isArray,wb=ah(!0),Fe=ah(!1),Sb={},ja={current:Sb},Ub={current:Sb},Tb={current:Sb},D={current:0},Sc=da.ReactCurrentDispatcher,X=da.ReactCurrentBatchConfig,Ia=0,z=null,K=null,J=null,Uc=!1,Tc={readContext:W,useCallback:S,useContext:S,
useEffect:S,useImperativeHandle:S,useLayoutEffect:S,useMemo:S,useReducer:S,useRef:S,useState:S,useDebugValue:S,useResponder:S,useDeferredValue:S,useTransition:S},dj={readContext:W,useCallback:ih,useContext:W,useEffect:eh,useImperativeHandle:function(a,b,c){c=null!==c&&void 0!==c?c.concat([a]):null;return ze(4,2,gh.bind(null,b,a),c)},useLayoutEffect:function(a,b){return ze(4,2,a,b)},useMemo:function(a,b){var c=ub();b=void 0===b?null:b;a=a();c.memoizedState=[a,b];return a},useReducer:function(a,b,c){var d=
ub();b=void 0!==c?c(b):b;d.memoizedState=d.baseState=b;a=d.queue={pending:null,dispatch:null,lastRenderedReducer:a,lastRenderedState:b};a=a.dispatch=ch.bind(null,z,a);return[d.memoizedState,a]},useRef:function(a){var b=ub();a={current:a};return b.memoizedState=a},useState:xe,useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=xe(a),d=c[0],e=c[1];eh(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=
xe(!1),c=b[0];b=b[1];return[ih(Ce.bind(null,b,a),[b,a]),c]}},ej={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Vc,useRef:dh,useState:function(a){return Vc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Vc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Vc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,
b,a),[b,a]),c]}},fj={readContext:W,useCallback:Yc,useContext:W,useEffect:Xc,useImperativeHandle:hh,useLayoutEffect:fh,useMemo:jh,useReducer:Wc,useRef:dh,useState:function(a){return Wc(Ua)},useDebugValue:Be,useResponder:ue,useDeferredValue:function(a,b){var c=Wc(Ua),d=c[0],e=c[1];Xc(function(){var c=X.suspense;X.suspense=void 0===b?null:b;try{e(a)}finally{X.suspense=c}},[a,b]);return d},useTransition:function(a){var b=Wc(Ua),c=b[0];b=b[1];return[Yc(Ce.bind(null,b,a),[b,a]),c]}},ra=null,Ka=null,Wa=
!1,gj=da.ReactCurrentOwner,ia=!1,Je={dehydrated:null,retryTime:0};var jj=function(a,b,c,d){for(c=b.child;null!==c;){if(5===c.tag||6===c.tag)a.appendChild(c.stateNode);else if(4!==c.tag&&null!==c.child){c.child.return=c;c=c.child;continue}if(c===b)break;for(;null===c.sibling;){if(null===c.return||c.return===b)return;c=c.return}c.sibling.return=c.return;c=c.sibling}};var wh=function(a){};var ij=function(a,b,c,d,e){var f=a.memoizedProps;if(f!==d){var g=b.stateNode;Ta(ja.current);a=null;switch(c){case "input":f=
Cd(g,f);d=Cd(g,d);a=[];break;case "option":f=Fd(g,f);d=Fd(g,d);a=[];break;case "select":f=M({},f,{value:void 0});d=M({},d,{value:void 0});a=[];break;case "textarea":f=Gd(g,f);d=Gd(g,d);a=[];break;default:"function"!==typeof f.onClick&&"function"===typeof d.onClick&&(g.onclick=uc)}Ud(c,d);var h,m;c=null;for(h in f)if(!d.hasOwnProperty(h)&&f.hasOwnProperty(h)&&null!=f[h])if("style"===h)for(m in g=f[h],g)g.hasOwnProperty(m)&&(c||(c={}),c[m]="");else"dangerouslySetInnerHTML"!==h&&"children"!==h&&"suppressContentEditableWarning"!==
h&&"suppressHydrationWarning"!==h&&"autoFocus"!==h&&(db.hasOwnProperty(h)?a||(a=[]):(a=a||[]).push(h,null));for(h in d){var k=d[h];g=null!=f?f[h]:void 0;if(d.hasOwnProperty(h)&&k!==g&&(null!=k||null!=g))if("style"===h)if(g){for(m in g)!g.hasOwnProperty(m)||k&&k.hasOwnProperty(m)||(c||(c={}),c[m]="");for(m in k)k.hasOwnProperty(m)&&g[m]!==k[m]&&(c||(c={}),c[m]=k[m])}else c||(a||(a=[]),a.push(h,c)),c=k;else"dangerouslySetInnerHTML"===h?(k=k?k.__html:void 0,g=g?g.__html:void 0,null!=k&&g!==k&&(a=a||
[]).push(h,k)):"children"===h?g===k||"string"!==typeof k&&"number"!==typeof k||(a=a||[]).push(h,""+k):"suppressContentEditableWarning"!==h&&"suppressHydrationWarning"!==h&&(db.hasOwnProperty(h)?(null!=k&&oa(e,h),a||g===k||(a=[])):(a=a||[]).push(h,k))}c&&(a=a||[]).push("style",c);e=a;if(b.updateQueue=e)b.effectTag|=4}};var kj=function(a,b,c,d){c!==d&&(b.effectTag|=4)};var pj="function"===typeof WeakSet?WeakSet:Set,wj="function"===typeof WeakMap?WeakMap:Map,sj=Math.ceil,gd=da.ReactCurrentDispatcher,
Uh=da.ReactCurrentOwner,H=0,Ye=8,ca=16,ma=32,Xa=0,hd=1,Oh=2,ad=3,bd=4,Xe=5,p=H,U=null,t=null,P=0,F=Xa,id=null,ta=1073741823,Yb=1073741823,kd=null,Xb=0,jd=!1,Re=0,Ph=500,l=null,cd=!1,Se=null,La=null,ld=!1,Zb=null,$b=90,bb=null,ac=0,af=null,dd=0,Ja=function(a,b){if(50<ac)throw ac=0,af=null,Error(k(185));a=ed(a,b);if(null!==a){var c=Cc();1073741823===b?(p&Ye)!==H&&(p&(ca|ma))===H?Te(a):(V(a),p===H&&ha()):V(a);(p&4)===H||98!==c&&99!==c||(null===bb?bb=new Map([[a,b]]):(c=bb.get(a),(void 0===c||c>b)&&bb.set(a,
b)))}};var zj=function(a,b,c){var d=b.expirationTime;if(null!==a){var e=b.pendingProps;if(a.memoizedProps!==e||G.current)ia=!0;else{if(d<c){ia=!1;switch(b.tag){case 3:sh(b);Ee();break;case 5:bh(b);if(b.mode&4&&1!==c&&e.hidden)return b.expirationTime=b.childExpirationTime=1,null;break;case 1:N(b.type)&&Bc(b);break;case 4:se(b,b.stateNode.containerInfo);break;case 10:d=b.memoizedProps.value;e=b.type._context;y(Ic,e._currentValue);e._currentValue=d;break;case 13:if(null!==b.memoizedState){d=b.child.childExpirationTime;
if(0!==d&&d>=c)return th(a,b,c);y(D,D.current&1);b=sa(a,b,c);return null!==b?b.sibling:null}y(D,D.current&1);break;case 19:d=b.childExpirationTime>=c;if(0!==(a.effectTag&64)){if(d)return vh(a,b,c);b.effectTag|=64}e=b.memoizedState;null!==e&&(e.rendering=null,e.tail=null);y(D,D.current);if(!d)return null}return sa(a,b,c)}ia=!1}}else ia=!1;b.expirationTime=0;switch(b.tag){case 2:d=b.type;null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;e=pb(b,B.current);rb(b,c);e=we(null,
b,d,a,e,c);b.effectTag|=1;if("object"===typeof e&&null!==e&&"function"===typeof e.render&&void 0===e.$$typeof){b.tag=1;b.memoizedState=null;b.updateQueue=null;if(N(d)){var f=!0;Bc(b)}else f=!1;b.memoizedState=null!==e.state&&void 0!==e.state?e.state:null;ne(b);var g=d.getDerivedStateFromProps;"function"===typeof g&&Lc(b,d,g,a);e.updater=Mc;b.stateNode=e;e._reactInternalFiber=b;pe(b,d,a,c);b=Ie(null,b,d,!0,f,c)}else b.tag=0,T(null,b,e,c),b=b.child;return b;case 16:a:{e=b.elementType;null!==a&&(a.alternate=
null,b.alternate=null,b.effectTag|=2);a=b.pendingProps;ri(e);if(1!==e._status)throw e._result;e=e._result;b.type=e;f=b.tag=Gj(e);a=aa(e,a);switch(f){case 0:b=He(null,b,e,a,c);break a;case 1:b=rh(null,b,e,a,c);break a;case 11:b=nh(null,b,e,a,c);break a;case 14:b=oh(null,b,e,aa(e.type,a),d,c);break a}throw Error(k(306,e,""));}return b;case 0:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),He(a,b,d,e,c);case 1:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),rh(a,b,d,e,c);
case 3:sh(b);d=b.updateQueue;if(null===a||null===d)throw Error(k(282));d=b.pendingProps;e=b.memoizedState;e=null!==e?e.element:null;oe(a,b);Qb(b,d,null,c);d=b.memoizedState.element;if(d===e)Ee(),b=sa(a,b,c);else{if(e=b.stateNode.hydrate)Ka=kb(b.stateNode.containerInfo.firstChild),ra=b,e=Wa=!0;if(e)for(c=Fe(b,null,d,c),b.child=c;c;)c.effectTag=c.effectTag&-3|1024,c=c.sibling;else T(a,b,d,c),Ee();b=b.child}return b;case 5:return bh(b),null===a&&De(b),d=b.type,e=b.pendingProps,f=null!==a?a.memoizedProps:
null,g=e.children,Yd(d,e)?g=null:null!==f&&Yd(d,f)&&(b.effectTag|=16),qh(a,b),b.mode&4&&1!==c&&e.hidden?(b.expirationTime=b.childExpirationTime=1,b=null):(T(a,b,g,c),b=b.child),b;case 6:return null===a&&De(b),null;case 13:return th(a,b,c);case 4:return se(b,b.stateNode.containerInfo),d=b.pendingProps,null===a?b.child=wb(b,null,d,c):T(a,b,d,c),b.child;case 11:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),nh(a,b,d,e,c);case 7:return T(a,b,b.pendingProps,c),b.child;case 8:return T(a,
b,b.pendingProps.children,c),b.child;case 12:return T(a,b,b.pendingProps.children,c),b.child;case 10:a:{d=b.type._context;e=b.pendingProps;g=b.memoizedProps;f=e.value;var h=b.type._context;y(Ic,h._currentValue);h._currentValue=f;if(null!==g)if(h=g.value,f=Qa(h,f)?0:("function"===typeof d._calculateChangedBits?d._calculateChangedBits(h,f):1073741823)|0,0===f){if(g.children===e.children&&!G.current){b=sa(a,b,c);break a}}else for(h=b.child,null!==h&&(h.return=b);null!==h;){var m=h.dependencies;if(null!==
m){g=h.child;for(var l=m.firstContext;null!==l;){if(l.context===d&&0!==(l.observedBits&f)){1===h.tag&&(l=Ea(c,null),l.tag=Jc,Fa(h,l));h.expirationTime<c&&(h.expirationTime=c);l=h.alternate;null!==l&&l.expirationTime<c&&(l.expirationTime=c);Sg(h.return,c);m.expirationTime<c&&(m.expirationTime=c);break}l=l.next}}else g=10===h.tag?h.type===b.type?null:h.child:h.child;if(null!==g)g.return=h;else for(g=h;null!==g;){if(g===b){g=null;break}h=g.sibling;if(null!==h){h.return=g.return;g=h;break}g=g.return}h=
g}T(a,b,e.children,c);b=b.child}return b;case 9:return e=b.type,f=b.pendingProps,d=f.children,rb(b,c),e=W(e,f.unstable_observedBits),d=d(e),b.effectTag|=1,T(a,b,d,c),b.child;case 14:return e=b.type,f=aa(e,b.pendingProps),f=aa(e.type,f),oh(a,b,e,f,d,c);case 15:return ph(a,b,b.type,b.pendingProps,d,c);case 17:return d=b.type,e=b.pendingProps,e=b.elementType===d?e:aa(d,e),null!==a&&(a.alternate=null,b.alternate=null,b.effectTag|=2),b.tag=1,N(d)?(a=!0,Bc(b)):a=!1,rb(b,c),Yg(b,d,e),pe(b,d,e,c),Ie(null,
b,d,!0,a,c);case 19:return vh(a,b,c)}throw Error(k(156,b.tag));};var bf=null,Ne=null,la=function(a,b,c,d){return new Fj(a,b,c,d)};ef.prototype.render=function(a){md(a,this._internalRoot,null,null)};ef.prototype.unmount=function(){var a=this._internalRoot,b=a.containerInfo;md(null,a,null,function(){b[Lb]=null})};var Di=function(a){if(13===a.tag){var b=Fc(ka(),150,100);Ja(a,b);df(a,b)}};var Yf=function(a){13===a.tag&&(Ja(a,3),df(a,3))};var Bi=function(a){if(13===a.tag){var b=ka();b=Va(b,a,null);Ja(a,
b);df(a,b)}};sd=function(a,b,c){switch(b){case "input":Dd(a,c);b=c.name;if("radio"===c.type&&null!=b){for(c=a;c.parentNode;)c=c.parentNode;c=c.querySelectorAll("input[name="+JSON.stringify(""+b)+'][type="radio"]');for(b=0;b<c.length;b++){var d=c[b];if(d!==a&&d.form===a.form){var e=ae(d);if(!e)throw Error(k(90));Gf(d);Dd(d,e)}}}break;case "textarea":Lf(a,c);break;case "select":b=c.value,null!=b&&hb(a,!!c.multiple,b,!1)}};(function(a,b,c,d){ee=a;eg=b;vd=c;vf=d})(Qh,function(a,b,c,d,e){var f=p;p|=4;
try{return Da(98,a.bind(null,b,c,d,e))}finally{p=f,p===H&&ha()}},function(){(p&(1|ca|ma))===H&&(uj(),xb())},function(a,b){var c=p;p|=2;try{return a(b)}finally{p=c,p===H&&ha()}});var mk={Events:[Hb,Pa,ae,pf,qd,lb,function(a){Kd(a,Ki)},sf,tf,sc,pc,xb,{current:!1}]};(function(a){var b=a.findFiberByHostInstance;return Ej(M({},a,{overrideHookState:null,overrideProps:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:da.ReactCurrentDispatcher,findHostInstanceByFiber:function(a){a=Sf(a);
return null===a?null:a.stateNode},findFiberByHostInstance:function(a){return b?b(a):null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null}))})({findFiberByHostInstance:Bb,bundleType:0,version:"16.13.1",rendererPackageName:"react-dom"});I.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=mk;I.createPortal=Xh;I.findDOMNode=function(a){if(null==a)return null;if(1===a.nodeType)return a;var b=a._reactInternalFiber;if(void 0===
b){if("function"===typeof a.render)throw Error(k(188));throw Error(k(268,Object.keys(a)));}a=Sf(b);a=null===a?null:a.stateNode;return a};I.flushSync=function(a,b){if((p&(ca|ma))!==H)throw Error(k(187));var c=p;p|=1;try{return Da(99,a.bind(null,b))}finally{p=c,ha()}};I.hydrate=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!0,c)};I.render=function(a,b,c){if(!bc(b))throw Error(k(200));return nd(null,a,b,!1,c)};I.unmountComponentAtNode=function(a){if(!bc(a))throw Error(k(40));return a._reactRootContainer?
(Rh(function(){nd(null,null,a,!1,function(){a._reactRootContainer=null;a[Lb]=null})}),!0):!1};I.unstable_batchedUpdates=Qh;I.unstable_createPortal=function(a,b){return Xh(a,b,2<arguments.length&&void 0!==arguments[2]?arguments[2]:null)};I.unstable_renderSubtreeIntoContainer=function(a,b,c,d){if(!bc(c))throw Error(k(200));if(null==a||void 0===a._reactInternalFiber)throw Error(k(38));return nd(a,b,c,!1,d)};I.version="16.13.1"});
</script>
    <script>const e = React.createElement;

function pathToString(path) {
  if (path[0] === '/') {
    return '/' + path.slice(1).join('/');
  } else {
    return path.join('/');
  }
}

function findCommonPath(files) {
  if (!files || !files.length) {
    return [];
  }

  function isPrefix(arr, prefix) {
    if (arr.length < prefix.length) {
      return false;
    }
    for (let i = prefix.length - 1; i >= 0; --i) {
      if (arr[i] !== prefix[i]) {
        return false;
      }
    }
    return true;
  }

  let commonPath = files[0].path.slice(0, -1);
  while (commonPath.length) {
    if (files.every(file => isPrefix(file.path, commonPath))) {
      break;
    }
    commonPath.pop();
  }
  return commonPath;
}

function findFolders(files) {
  if (!files || !files.length) {
    return [];
  }

  let folders = files.filter(file => file.path.length > 1).map(file => file.path[0]);
  folders = [...new Set(folders)]; // unique
  folders.sort();

  folders = folders.map(folder => {
    let filesInFolder = files
      .filter(file => file.path[0] === folder)
      .map(file => ({
        ...file,
        path: file.path.slice(1),
        parent: [...file.parent, file.path[0]],
      }));

    const children = findFolders(filesInFolder); // recursion

    return {
      is_folder: true,
      path: [folder],
      parent: files[0].parent,
      children,
      covered: children.reduce((sum, file) => sum + file.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.coverable, 0),
      prevRun: {
        covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
        coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
      }
    };
  });

  return [
    ...folders,
    ...files.filter(file => file.path.length === 1),
  ];
}

class App extends React.Component {
  constructor(...args) {
    super(...args);

    this.state = {
      current: [],
    };
  }

  componentDidMount() {
    this.updateStateFromLocation();
    window.addEventListener("hashchange", () => this.updateStateFromLocation(), false);
  }

  updateStateFromLocation() {
    if (window.location.hash.length > 1) {
      const current = window.location.hash.substr(1).split('/');
      this.setState({current});
    } else {
      this.setState({current: []});
    }
  }

  getCurrentPath() {
    let file = this.props.root;
    let path = [file];
    for (let p of this.state.current) {
      file = file.children.find(file => file.path[0] === p);
      if (!file) {
        return path;
      }
      path.push(file);
    }
    return path;
  }

  render() {
    const path = this.getCurrentPath();
    const file = path[path.length - 1];

    let w = null;
    if (file.is_folder) {
      w = e(FilesList, {
        folder: file,
        onSelectFile: this.selectFile.bind(this),
        onBack: path.length > 1 ? this.back.bind(this) : null,
      });
    } else {
      w = e(DisplayFile, {
        file,
        onBack: this.back.bind(this),
      });
    }

    return e('div', {className: 'app'}, w);
  }

  selectFile(file) {
    this.setState(({current}) => {
      return {current: [...current, file.path[0]]};
    }, () => this.updateHash());
  }

  back(file) {
    this.setState(({current}) => {
      return {current: current.slice(0, current.length - 1)};
    }, () => this.updateHash());
  }

  updateHash() {
    if (!this.state.current || !this.state.current.length) {
      window.location = '#';
    } else {
      window.location = '#' + this.state.current.join('/');
    }
  }
}

function FilesList({folder, onSelectFile, onBack}) {
  let files = folder.children;
  return e('div', {className: 'display-folder'},
    e(FileHeader, {file: folder, onBack}),
    e('table', {className: 'files-list'},
      e('thead', {className: 'files-list__head'},
        e('tr', null,
          e('th', null, "Path"),
          e('th', null, "Coverage")
        )
      ),
      e('tbody', {className: 'files-list__body'},
        files.map(file => e(File, {file, onClick: onSelectFile}))
      )
    )
  );
}

function File({file, onClick}) {
  const coverage = file.coverable ? file.covered / file.coverable * 100 : -1;
  const coverageDelta = file.prevRun &&
    (file.covered / file.coverable * 100 - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('tr', {
      className: 'files-list__file'
        + (coverage >= 0 && coverage < 50 ? ' files-list__file_low': '')
        + (coverage >= 50 && coverage < 80 ? ' files-list__file_medium': '')
        + (coverage >= 80 ? ' files-list__file_high': '')
        + (file.is_folder ? ' files-list__file_folder': ''),
      onClick: () => onClick(file),
    },
    e('td', null, pathToString(file.path)),
    e('td', null,
      file.covered + ' / ' + file.coverable +
      (coverage >= 0 ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function DisplayFile({file, onBack}) {
  return e('div', {className: 'display-file'},
    e(FileHeader, {file, onBack}),
    e(FileContent, {file})
  );
}

function FileHeader({file, onBack}) {
  const coverage = file.covered / file.coverable * 100;
  const coverageDelta = file.prevRun && (coverage - file.prevRun.covered / file.prevRun.coverable * 100);

  return e('div', {className: 'file-header'},
    onBack ? e('a', {className: 'file-header__back', onClick: onBack}, 'Back') : null,
    e('div', {className: 'file-header__name'}, pathToString([...file.parent, ...file.path])),
    e('div', {className: 'file-header__stat'},
      'Covered: ' + file.covered + ' of ' + file.coverable +
      (file.coverable ? ' (' + coverage.toFixed(2) + '%)' : ''),
      e('span', {title: 'Change from the previous run'},
        (coverageDelta ? ` (${coverageDelta > 0 ? '+' : ''}${coverageDelta.toFixed(2)}%)` : ''))
    )
  );
}

function FileContent({file}) {
  return e('div', {className: 'file-content'},
    file.content.split(/\r?\n/).map((line, index) => {
      const trace = file.traces.find(trace => trace.line === index + 1);
      const covered = trace && trace.stats.Line;
      const uncovered = trace && !trace.stats.Line;
      return e('pre', {
          className: 'code-line'
            + (covered ? ' code-line_covered' : '')
            + (uncovered ? ' code-line_uncovered' : ''),
          title: trace ? JSON.stringify(trace.stats, null, 2) : null,
        }, line);
    })
  );
}

(function(){
  const commonPath = findCommonPath(data.files);
  const prevFilesMap = new Map();

  previousData && previousData.files.forEach((file) => {
    const path = file.path.slice(commonPath.length).join('/');
    prevFilesMap.set(path, file);
  });

  const files = data.files.map((file) => {
    const path = file.path.slice(commonPath.length);
    const { covered = 0, coverable = 0 } = prevFilesMap.get(path.join('/')) || {};
    return {
      ...file,
      path,
      parent: commonPath,
      prevRun: { covered, coverable },
    };
  });

  const children = findFolders(files);

  const root = {
    is_folder: true,
    children,
    path: commonPath,
    parent: [],
    covered: children.reduce((sum, file) => sum + file.covered, 0),
    coverable: children.reduce((sum, file) => sum + file.coverable, 0),
    prevRun: {
      covered: children.reduce((sum, file) => sum + file.prevRun.covered, 0),
      coverable: children.reduce((sum, file) => sum + file.prevRun.coverable, 0),
    }
  };

  ReactDOM.render(e(App, {root, prevFilesMap}), document.getElementById('root'));
}());
</script>
</body>
</html>